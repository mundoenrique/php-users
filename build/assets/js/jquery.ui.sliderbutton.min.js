(function(e){"use strict";e.widget("ju.sliderbutton",{options:{text:"activate",direction:"right",tolerance:1,releaseToActivate:!0,opacity:function(e){return 1-e/50}},_checkSliderPosAndActivate:function(e,t){var i=this;!1===i.activated&&("right"===i.options.direction&&t.value>=100-i.options.tolerance||"left"===i.options.direction&&t.value<=0+i.options.tolerance)&&(i._trigger("activate",e,t),i.activated=!0)},_create:function(){var t=this;t.element.empty(),t.element.addClass("ju-sliderbutton"),!0===t.options.disabled&&t.element.addClass("ui-state-disabled");var i=e("<span></span>").addClass("ju-sliderbutton-text").text(t.options.text),s=e("<div></div>").addClass("ju-sliderbutton-slider"),a=e("<div></div>").addClass("ui-slider-handle");s.append(a),t.element.append(i),t.element.append(s);var n=0;"left"===t.options.direction&&(t.element.addClass("ju-sliderbutton-left"),n=100),e.extend(t,{slider:s,handle:a,text:i,activated:!1}),s.slider({animate:!0,value:n,disabled:t.options.disabled,slide:function(e,i){var s=t._trigger("slide",e,i);return!1!==s&&(t.text.css("opacity",t.options.opacity("left"===t.options.direction?100-i.value:i.value)),!1===t.options.releaseToActivate&&t._checkSliderPosAndActivate(e,i)),s},stop:function(e,i){!1!==t.options.releaseToActivate&&t._checkSliderPosAndActivate(e,i),t._trigger("stop",e,i),t._reset("fast")},start:function(e,i){return t._trigger("start",e,i)}}),s.find(".ui-slider-handle").unbind("keydown").unbind("keyup")},_reset:function(e){function t(){s.slider.slider("value",i)}var i,s=this;s.activated=!1,"right"===s.options.direction?i=0:"left"===s.options.direction&&(i=100),null==e||"number"!=typeof e&&"string"!=typeof e?(s.handle.css("left",i+"%"),t(),s.text.css("opacity",s.options.opacity(0))):(s.handle.animate({left:i+"%"},e,t),s.text.animate({opacity:s.options.opacity(0)},e))},destroy:function(){var e=this;e.slider.slider("destroy"),e.element.empty(),e.element.removeClass("ju-sliderbutton ju-sliderbutton-left")},_setOption:function(t,i){var s=this;switch(e.Widget.prototype._setOption.apply(s,arguments),t){case"text":s.text.text(i);break;case"disabled":!0===i?(s.slider.slider("disable").removeClass("ui-state-disabled"),s.element.addClass("ui-state-disabled"),s.element.attr("disabled",!0),s.text.css("opacity","")):!1===i&&(s.slider.slider("enable"),s.element.attr("disabled",!1),s.element.removeClass("ui-state-disabled"));break;case"direction":"right"===i?s.element.removeClass("ju-sliderbutton-left"):"left"===i&&s.element.addClass("ju-sliderbutton-left"),s._reset()}}})})(jQuery);