function msgService(e,o,a,r){$("#registrar").fadeIn(),$("#dialogo-movil").dialog({title:e,modal:"true",width:"440px",open:function(e,r){$(".ui-dialog-titlebar-close",r.dialog).hide(),$("#modalType").addClass(a),$("#msgService").html(o)}}),$("#inva5").click(function(){$("#dialogo-movil").dialog("close"),1==r&&$(location).attr("href",base_url)})}var pais,base_url,base_cdn,digVer="",aplicaPerfil=0,fecha=new Date;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn");var skin=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_skin\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$(function(){function e(){var e=$("#fecha-de-nacimiento-new").val().split("/"),o=e[0],a=e[1],r=e[2];return""!=o&&""!=a&&""!=r?r<anioMayorEdad||r==anioMayorEdad&&(a<mesActual||a==mesActual&&o<=diaActual):""!=o||""!=a||""!=r||void 0}function o(e,o){var r=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),i=JSON.stringify({pais:o,subRegion:e});i=CryptoJS.AES.encrypt(i,r,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/listadoDepartamento",{request:i,cpo_name:r,plot:btoa(r)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc&&($("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#provincia").append(a)}))}),$("#provincia").change(function(){$("#distrito").empty().append("<option value=''>Cargando...</option>"),""!=this.value?a(this.value,o):$("#distrito").empty().append("<option value=''>-</option>")})}function a(e,o){var a=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),r=JSON.stringify({pais:o,subRegion:e});r=CryptoJS.AES.encrypt(r,a,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/listadoDepartamento",{request:r,cpo_name:a,plot:btoa(a)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc&&($("#distrito").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#distrito").append(a)}))})}function r(){$("#ocupacion-laboral").empty().append("<option value=''>Cargando...</option>");var e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),o=JSON.stringify({pais:country});o=CryptoJS.AES.encrypt(o,e,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/ListadoProfesiones",{request:o,cpo_name:e,plot:btoa(e)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc&&($("#ocupacion-laboral").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaProfesiones,function(e,o){var a;a="<option value="+o.idProfesion+"> "+o.tipoProfesion+" </option>",$("#ocupacion-laboral").append(a)}))})}function i(){var e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/registro/listado",{cpo_name:e},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$.each(data.listaPaises,function(e,o){if("Ec"!=o.cod_pais&&"Ec-bp"!=o.cod_pais){var a="<option value="+o.cod_pais+"> "+o.nombre_pais+" </option>";$("#iso").append(a)}})})}function t(){var e=$("#dia").val(),o=$("#mes option:selected").val();return 31==e&&2==o||30==e&&2==o||31==e&&4==o||31==e&&6==o||31==e&&9==o||31==e&&11==o?($("#dia").removeClass("field-success").addClass("field-error"),$("#mes").removeClass("field-success").addClass("field-error"),!1):($("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),!0)}function n(e,o){return!e.match(/[^a-z ñáéíóú \s]/gi)}function l(e,o){return!e.match(/[^a-z ñáéíóú 0-9 \s]/gi)}function d(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),jQuery.validator.addMethod("numberEqual1",function(e,o){return!(o.value.length>0)||o.value!=$("#telefonoFijo").val()&&o.value!=$("#telefonoMovil").val()},"Teléfono Otro está repetido"),jQuery.validator.addMethod("numberEqual2",function(e,o){return!(o.value.length>0)||o.value!=$("#telefonoMovil").val()&&o.value!=$("#otroTelefonoNum").val()},"Teléfono Fijo está repetido"),jQuery.validator.addMethod("numberEqual3",function(e,o){return!(o.value.length>0)||o.value!=$("#telefonoFijo").val()&&o.value!=$("#otroTelefonoNum").val()},"Teléfono Movil está repetido"),jQuery.validator.addMethod("username",function(e,o,a){return a.test(e)},"Usuario invalido. "),jQuery.validator.addMethod("mayorEdadAnio",function(o,a){var r=e();return 1==r||0!=r&&void 0},"Usted no es mayor de edad. "),jQuery.validator.addMethod("fecha_invalida",function(e,o){var a=t();return 1==a||0!=a&&void 0},"Fecha invalida. "),jQuery.validator.addMethod("expresionRegular",function(e,o){var a=n(e,o);return 1==a||0!=a&&void 0},"Usted. "),jQuery.validator.addMethod("expresionRegular2",function(e,o){var a=l(e,o);return 1==a||0!=a&&void 0},"Usted. "),jQuery.validator.addMethod("mail",function(e,o,a){return a.test(e)},"Correo invalido. "),jQuery.validator.addMethod("validatePassword",function(e,o){return!e.match(/((\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#\$%])*\d(\w|[!@#$%])*(\d)*)/)||!e.match(/\d{1}/gi)},"El campo debe tener mínimo 1 y máximo 3 números consecutivos"),jQuery.validator.addMethod("digValido",function(e,o,a){return e==digVer}),$.validator.addMethod("esBisiesto",function(e,o,a){var r=$("#fecha-de-nacimiento-new").val().split("/"),i=r[0],t=r[1],n=r[2],l=new Date(t+"/"+i+"/"+n);return"29"==i&&"02"==t?n%4==0&&(n%100!=0||n%400==0):t==l.getMonth()+1&&i==l.getDate()&&n==l.getFullYear()},"Usted introdujo una fecha inválida."),jQuery.validator.addMethod("rangoDias",function(e,o){var a=$("#fecha-de-nacimiento-new").val().split("/"),r=a[0];return!(r>31||r<=0)},"El Día debe estar comprendido entre 1 y 31."),$("#form-validar").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{"card-holder-pin":{required:!0},"card-number":{required:!0,number:!0,minlength:16,maxlength:16},"card-holder-id":{required:!0,number:!0},iso:{required:!0},"accept-terms":{required:!0}},messages:{"card-holder-pin":"Debe introducir la clave secreta o clave web de su tarjeta","card-number":"Debe introducir un número de tarjeta","card-holder-id":"Debe introducir el número de su documento de identidad",iso:"Debe seleccionar su país","accept-terms":"Debe aceptar las Condiciones de Uso"}}),$("#form-usuario").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg2",rules:{tipo_identificacion:{required:!0},numero_identificacion:{required:!0,number:!0},"dig-ver":{required:!0,digits:!0,maxlength:1,digValido:!0},primer_nombre:{required:!0,expresionRegular:!0},segundo_nombre:{required:!1,expresionRegular:!0},primer_apellido:{required:!0,expresionRegular:!0},segundo_apellido:{required:!1,expresionRegular:!0},lugar_nacimiento:{required:!1,expresionRegular:!0},genero:{required:!1},edo_civil:{required:!1},nacionalidad:{required:!0,expresionRegular:!0},tipo_direccion:{required:!0},codigo_postal:{required:!1,digits:!0},pais_Residencia:{required:!0},departamento:{required:!0},provincia:{required:!0},distrito:{required:!0},direccion:{required:!0},correo:{required:!0,mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/},"confirm-correo":{required:!0,mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,equalTo:"#email"},telefono_fijo:{number:!0,numberEqual2:!0,minlength:7,maxlength:s},telefono_movil:{required:!0,number:!0,numberEqual3:!0,minlength:7,maxlength:11},otro_tipo_telefono:{required:!1},otro_telefono_num:{number:!0,numberEqual1:!0,minlength:7,maxlength:11},ruc_laboral:{required:!0},centro_laboral:{required:!0},situacion_laboral:{required:!1},ocupacion_laboral:{required:!0},cargo_laboral:{expresionRegular:!0},ingreso:{required:!1,number:!0},desem_publico:{required:!0},cargo_publico:{required:!0,expresionRegular:!0},institucion:{required:!0,expresionRegular2:!0},uif:{required:!0},username:{required:!0,nowhitespace:!0,username:/^[a-z0-9_-]{6,16}$/i},userpwd:{required:!0,minlength:8,maxlength:15,validatePassword:!0},confirm_userpwd:{required:!0,minlength:8,maxlength:15,equalTo:"#userpwd"},contrato:{required:!0},proteccion:{required:!0},"fecha-de-nacimiento-new":{required:!0,rangoDias:!0,esBisiesto:!0,mayorEdadAnio:!0}},messages:{tipo_identificacion:"Debe Seleccionar su Tipo de Identificación.",numero_identificacion:"El campo Número de identificación no puede estar vacío y debe contener solo números.","dig-ver":"Dígito verificador inválido.",primer_nombre:"El campo Primer Nombre no puede estar vacío y debe contener solo letras.",segundo_nombre:"El campo Segundo Nombre debe contener solo letras.",primer_apellido:"El campo Apellido Paterno no puede estar vacío y debe contener solo letras.",segundo_apellido:"El campo Apellido Materno debe contener solo letras.",lugar_nacimiento:"El campo Lugar de Nacimiento debe contener solo letras.",nacionalidad:"El campo Nacionalidad no puede estar vacío.",tipo_direccion:"El campo Tipo Dirección no puede estar vacío",codigo_postal:"El campo Código Postal debe contener solo números.",pais_Residencia:"El campo País de Residencia no puede estar vacío y debe contener solo letras.",departamento:"El campo Departamento no puede estar vacío.",provincia:"El campo Provincia no puede estar vacío.",distrito:"El campo Distrito no puede estar vacío.",direccion:"El campo Dirección no puede estar vacío.",correo:"El correo electrónico no puede estar vacío y debe contener formato correcto. (usuario@ejemplo.com).","confirm-correo":"El campo confirmar correo electrónico debe coincidir con su correo electrónico.",telefono_fijo:{number:"El campo Teléfono Fijo debe contener solo números.",numberEqual2:"Teléfono Fijo está repetido.",minlength:"El campo Teléfono Fijo debe contener como mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Fijo debe contener máximo "+s+" caracteres numéricos."},telefono_movil:{required:"El campo Teléfono Móvil no puede estar vacío y debe contener solo números.",number:"El campo Teléfono Móvil no puede estar vacío y debe contener solo números.",numberEqual3:"Teléfono Móvil está repetido.",minlength:"El campo Teléfono Móvil debe contener como mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Móvil debe contener máximo 11 caracteres numéricos."},otro_telefono_num:{number:"El campo Otro Teléfono debe contener solo números.",numberEqual1:"El campo Otro Teléfono está repetido.",minlength:"El campo Otro Teléfono debe contener como minímo 7 caracteres númericos.",maxlength:"El campo Otro Teléfono  debe contener máximo 11 caracteres númericos."},ruc_laboral:"El campo Teléfono Móvil no puede estar vacío.",centro_laboral:"El campo Centro Laboral no puede estar vacío.",ocupacion_laboral:"El campo Ocupación Laboral no puede estar vacío y debe contener solo letras.",cargo_laboral:"El campo Cargo Laboral debe contener solo letras.",ingreso:"El campo Ingreso promedio mensual debe contener solo números.",desem_publico:"El campo ¿Desempeñó cargo público en últimos 2 años? no puede estar vacío.",cargo_publico:"El campo Cargo Público no puede estar vacío y debe contener solo letras.",institucion:"El campo Institución no puede estar vacío.",uif:"El campo ¿Es sujeto obligado a informar UIF-Perú, conforme al artículo 3° de la Ley N° 29038? no puede estar vacío.",username:{required:"El campo Usuario no puede estar vacío.",username:"El campo usuario no tiene un formato válido. Permitido alfanumérico y underscore (barra_piso),  min 6, max 16 caracteres",nowhitespace:"El campo Usuario no permite espacios en blanco."},userpwd:"El campo Contraseña debe cumplir con los requerimientos",confirm_userpwd:"El campo confirmar contraseña debe coincidir con su contraseña.",contrato:"Debe aceptar el contrato de cuenta dinero electrónico.",proteccion:"Debe aceptar protección de datos personales.","fecha-de-nacimiento-new":{required:"El campo Fecha de nacimiento no puede estar vacío."}}})}$("input[type=text], input[type=password], input[type=textarea]").attr("autocomplete","off");var s="11";"pichincha"==skin&&($("#telefonoFijo").attr("maxlength","9"),s="9",$("#condiciones").removeClass("label-disabled"),$("#accept-terms").prop("disabled",!1)),$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$("#birth-date").datepicker({onSelect:function(e){$("#birth-date").datepicker("option","maxDate",fecha)}}),$("#condiciones").on("click","a",function(){!1===$("#accept-terms").is("disabled")&&("Co"==$("#iso").val()?$("#dialog-rg-Co").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}):"Ec-bp"==$("#iso").val()?$("#dialog-rg-Ec-bp").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}):"Pe"==$("#iso").val()||"Usd"==$("#iso").val()?$("#dialog-rg-Pe").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}):"Ve"==$("#iso").val()&&$("#dialog-rg-Ve").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}))}),i(),$("button#aceptar").on("click",function(){var e=$(this).parent().parent().attr("id");$("#"+e).dialog("close")}),$("#iso").on("change",function(e){pais=$("option:selected",this),acceptance=$("#accept-terms"),acceptance.removeAttr("checked"),this.selectedIndex>0?(acceptance.prop("disabled",!1),$("#condiciones").removeClass("label-disabled")):acceptance.prop("disabled",!0)}),$(".iso2").on("change",function(e){var o=$(".iso2").val();$(".ocultar").hide(),"Co"==o?$("#dialog-rg-Co2").show():"Pe"==o||"Usd"==o?$("#dialog-rg-Pe2").show():"Ve"==o?$("#dialog-rg-Ve2").show():"Ve"==o&&$(".ocultar").hide()}),anioMayorEdad=0,diaActual=0,mesActual=0,anioActual=0,$("#validar").click(function(){$("#loading").show(),$("button").attr("disabled",!0),d();var e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$("#form-validar").append('<input type="hidden" name="cpo_name" class="ignore" value="'+e+'">'),$("#form-validar").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3);var a=$("#form-validar");if(1==a.valid()){var i,t,n,l,s,u,p,m;i=$("#iso").val(),t=$("#content-holder").find("#card-number").val(),n=$("#content-holder").find("#card-holder-id").val(),l=$("#content-holder").find("#card-holder-pin").val(),s=$.datepicker.formatDate("ddmmy",new Date),n=$("#content-holder").find("#card-holder-id").val(),id_ext_per1=$("#content-holder").find("#card-holder-id").val(),u=n+""+s,p=hex_md5(l),country=i,noTarjerta=t,m=new Date,anioActual=m.getFullYear(),mesActual=m.getMonth()+1,diaActual=m.getDate(),anioMayorEdad=parseInt(anioActual-18),t=c.encode(t),n=c.encode(n);e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));var v=JSON.stringify({userName:u,pais:i,cuenta:t,id_ext_per:n,pin:l,claveWeb:p});v=CryptoJS.AES.encrypt(v,e,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/validar",{request:v,cpo_name:e,plot:btoa(e)},function(e){switch(dataUser=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#loading").hide(),$("button").attr("disabled",!1),dataUser.code){case 0:$("#form-validar")[0].reset();var a=dataUser.dataUser,i=a.pais;if(aplicaPerfil=a.user.aplicaPerfil,digVer=a.afiliacion.dig_verificador_aux,"Ec-bp"==i&&($("#email-bp").val(a.user.email),$("#email_cypher").val(a.user.emailEnc),$("#telf-hab").val(a.user.telefono.replace(/^0+/,"")),$("#hab_cypher").val(a.user.telefonoEnc),$("#telf-cel").val(a.user.celular.replace(/^0+/,"")),$("#cel_cypher").val(a.user.celularEnc)),"Pe"==i){if("N"==a.user.aplicaPerfil)$(".dig-verificador").remove(),$("#contract").remove(),$(".lugar-nacimiento").remove(),$(".verificacion-one").remove(),$(".segments-laborales").remove(),$(".separador-3").remove(),$(".remove-plata-sueldo").remove(),$(".area-telefonos").removeClass("four-segments"),$(".area-telefonos").addClass("two-segments"),$(".nacimiento-mitad").removeClass("inline-list four-segments field-plata"),$(".radio-sexo").removeClass("field-group four-segments"),$(".fecha-nacimiento li").removeClass("field-group-item"),$(".radio-sexo li").removeClass("select-group-item"),$(".fecha-nacimiento").addClass("ul-mitad"),$(".nacimiento-mitad").addClass("ul-mitad"),$(".radio-sexo").addClass("ul-mitad"),$("#content-registro").css("display","block");else if("S"==a.user.aplicaPerfil){$(".verificacion-one").remove(),$("#content-registro").css("display","block");var t=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),n=JSON.stringify({pais:i,subRegion:1});n=CryptoJS.AES.encrypt(n,t,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/listadoDepartamento",{request:n,cpo_name:t,plot:btoa(t)},function(e){a=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#departamento").empty().append("<option value=''>Cargando...</option>"),0==dataUser.code?($("#departamento").empty().append("<option value=''>Seleccione</option>"),$.each(a.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#departamento").append(a)})):($("#dialog-cargar-regiones").show(800),$("#invalido3").click(function(){$("#dialog-cargar-regiones").hide("slow")}))}),$("#departamento").change(function(){$("#provincia").empty().append("<option value=''>Cargando...</option>"),$("#distrito").empty().append("<option value=''>-</option>"),""!=this.value?o(this.value,i):$("#provincia").empty().append("<option value=''>-</option>")}),r()}}else $(".dig-verificador").remove(),$("#contract").remove(),$(".lugar-nacimiento").remove(),$(".verificacion-one").remove(),$(".segments-laborales").remove(),$(".separador-3").remove(),$(".remove-plata-sueldo").remove(),$(".area-telefonos").removeClass("four-segments"),$(".area-telefonos").addClass("two-segments"),$(".nacimiento-mitad").removeClass("inline-list four-segments field-plata"),$(".radio-sexo").removeClass("field-group four-segments"),$(".fecha-nacimiento li").removeClass("field-group-item"),$(".radio-sexo li").removeClass("select-group-item"),$(".fecha-nacimiento").addClass("ul-mitad"),$(".nacimiento-mitad").addClass("ul-mitad"),$(".radio-sexo").addClass("ul-mitad"),$("#content-registro").css("display","block");for(var l=0;l<51;l++)$(".antiguedad-laboral").append("<option>"+l+"</option>");if("Ve"!=i&&"Co"!=i||($("#first-name").attr("disabled",!1),$("#first-nam").attr("disabled",!1),$("#first-ext-name").attr("disabled",!1),$("#last-name").attr("disabled",!1),$("#last-ext-name").attr("disabled",!1),$("#telefonoFijo").attr("disabled",!1),$("#birth-date").attr("disabled",!1)),$("#content").children().remove(),$("#content").append($("#content-registro").removeAttr("style")).html(),i=a.pais,tipo_doc=a.user.tipo_id_ext_per,nro_doc=a.user.id_ext_per,primer_nombre=a.user.primerNombre,segundo_nombre=a.user.segundoNombre,primer_apellido=a.user.primerApellido,segundo_apellido=a.user.segundoApellido,sexo=a.afiliacion.sexo,fecha_nacimiento=a.user.fechaNacimiento,"S"==a.user.aplicaPerfil){lugar_nacimiento=a.afiliacion.lugar_nacimiento,estado_civil=a.afiliacion.edocivil,nacionalidad=a.afiliacion.nacionalidad,aceptaContrato=a.afiliacion.acepta_contrato,"S"===aceptaContrato&&$("#modalContrato").html("pn cuenta general"),"Pe"==i&&$("#paisResidencia").val("Perú");var d=a.afiliacion.ruc_cto_laboral;$("#ruc").val(d)}$("#paisResidenciaHidden").val(i),$("#listaIdentificadores").val(tipo_doc),$("#holder-id").val(nro_doc),$("#first-name").val(primer_nombre),$("#first-ext-name").val(segundo_nombre),$("#last-name").val(primer_apellido),$("#last-ext-name").val(segundo_apellido),"M"==sexo?$("#gender-male").prop("checked",!0):"F"==sexo&&$("#gender-female").prop("checked",!0);break;case 2:msgService(dataUser.title,dataUser.msn,dataUser.modalType,0)}})}else $("#loading").hide(),$("button").attr("disabled",!1)}),$.datepicker.regional.es={closeText:"Cerrar",prevText:"Previo",nextText:"Próximo",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthStatus:"Ver otro mes",yearStatus:"Ver otro año",dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:0,initStatus:"Selecciona la fecha",isRTL:!1,maxDate:"+0d",changeMonth:!0,changeYear:!0},$.datepicker.setDefaults($.datepicker.regional.es),$("#birth-date").datepicker(),$("#fecha-de-nacimiento-new").datepicker(),$("#userpwd").keyup(function(){var e=$(this).val();e.length<8||e.length>15?($("#length").removeClass("rule-valid").addClass("rule-invalid"),longitud=!1):($("#length").removeClass("rule-invalid").addClass("rule-valid"),longitud=!0),e.match(/[a-z]/)?($("#letter").removeClass("rule-invalid").addClass("rule-valid"),mt=!0):($("#letter").removeClass("rule-valid").addClass("rule-invalid"),mt=!1),e.match(/[A-Z]/)?($("#capital").removeClass("rule-invalid").addClass("rule-valid"),cap=!0):($("#capital").removeClass("rule-valid").addClass("rule-invalid"),cap=!1),!e.match(/((\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#\$%])*\d(\w|[!@#$%])*(\d)*)/)&&e.match(/\d{1}/)?($("#number").removeClass("rule-invalid").addClass("rule-valid"),car=!0):($("#number").removeClass("rule-valid").addClass("rule-invalid"),car=!1),e.match(/(.)\1{2,}/)?($("#consecutivo").removeClass("rule-valid").addClass("rule-invalid"),cons=!1):($("#consecutivo").removeClass("rule-invalid").addClass("rule-valid"),cons=!0),e.match(/([!@\*\-\?¡¿+\/.,_#])/)?($("#especial").removeClass("rule-invalid").addClass("rule-valid"),esp=!0):($("#especial").removeClass("rule-valid").addClass("rule-invalid"),esp=!1),1==longitud&&1==mt&&1==cap&&1==car&&1==cons&&1==esp?$("#registrar").removeAttr("disabled"):$("#registrar").attr("disabled",!0)}).focus(function(){$("#new").showBalloon({position:"right",contents:$("#psw_info")}),$("#psw_info").show()}).blur(function(){$("#new").hideBalloon({position:"right",contents:$("#psw_info")}),$("#psw_info").hide()}),$("#username").blur(function(){if(usuario=$("#username").val(),usuario==$("#holder-id").val()&&"Ec-bp"==country){var e="Nombre de usuario",o="EL nombre de usurio no puede ser igual a su número de identificación",a="alert-warning";return msgService(e,o,a,0),void $("#username").removeClass("field-success").addClass("field-error")}if(""==usuario||!/^[a-z0-9_-]{6,16}$/i.test(usuario)){e="Nombre de usuario",o="El campo Usuario no puede estar vacío y debe tener un formato válido.",a="alert-warning";return msgService(e,o,a,0),void $("#username").removeClass("field-success").addClass("field-error")}if(username=usuario.toUpperCase(),usuario.match(/[\s]/gi))$("#loading").hide();else{$("#loading").show();var r=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),i=JSON.stringify({usuario:username});i=CryptoJS.AES.encrypt(i,r,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/verificar",{request:i,cpo_name:r,plot:btoa(r)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc?($("#loading").hide(),$("#registrar").removeAttr("disabled"),$("#username").removeClass("field-error").addClass("field-success")):($("#loading").hide(),$("#username").removeClass("field-success").addClass("field-error"),$("#registrar").attr("disabled",!0),$("#dialogo_disponible").dialog({title:"Usuario no disponible",modal:"true",width:"440px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#disp").click(function(){$("#dialogo_disponible").dialog("close")}))})}}),$("#proteccion").on("click",function(){$(this).off("click"),$("#datos_personales").dialog({title:"PROTECCIÓN DE DATOS PERSONALES",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-datos").click(function(){$("#datos_personales").dialog("close")})}),$("#contrato").on("click",function(){$(this).off("click"),"S"==aceptaContrato?($("#contrato_cuenta_general").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PN CUENTA GENERAL",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-contrato-general").click(function(){$("#contrato_cuenta_general").dialog("close")})):($("#contrato_cuenta").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PLATA BENEFICIOS",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-contrato").click(function(){$("#contrato_cuenta").dialog("close")})),$(".contratos").css("top","50px"),$(".ui-dialog-title").css("width","92%"),$("html, body").animate({scrollTop:$("body").offset().top},0)}),$("#registrar").click(function(){var e,o,a,r,i,t,n,l,s,c,u,p,m,v,f,g,b,h,_,C,y,S,E,A,w,x,J,k,N,T,q,D,P,U,M,R,O,j,I,F,L;if($("#registrar").css("display","none"),d(),$("#form-usuario").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3),e=$("#form-usuario"),s=$("#fecha-de-nacimiento-new").val(),1==e.valid())if($("#load_reg").show(),emailTrue=$("#email").val(),phoneTrue=$("#telefonoFijo").val(),movilPhoneTrue=$("#telefonoMovil").val(),"Ec-bp"==country&&(emailTrue=$("#email_cypher").val(),phoneTrue=$("#hab_cypher").val(),movilPhoneTrue=$("#cel_cypher").val()),$("#listaIdentificadores").val(),o=$("#holder-id").val(),a=$("#dig-ver").val(),r=$("#first-name").val(),i=$("#first-ext-name").val(),t=$("#last-name").val(),n=$("#last-ext-name").val(),l=$("#lugar-nacimiento").val(),s=$("#fecha-de-nacimiento-new").val(),c=$("input[name='genero']:checked").val(),u=$("#edocivil").val(),p=$("#nacionalidad").val(),m=$("#tipoDireccion").val(),v=$("#codigoPostal").val(),f=country,g=$("#departamento").val(),b=$("#provincia").val(),h=$("#distrito").val(),_=$("#text-address").val(),C=emailTrue,$("#confirm-email").val(),y=phoneTrue,S=movilPhoneTrue,E=$("#otroTelefonoSelect option:selected").val(),A=$("#otroTelefonoNum").val(),w=$("#ruc").val(),x=$("#centro-laboral").val(),J=$("#text-situacion").val(),k=$("#antiguedadLaboral").val(),N=$("#ocupacion-laboral option:selected").val(),T=$("#cargo-laboral").val(),q=$("#ingreso").val(),null!=q&&(q=q.replace(/,/g,""),q=parseFloat(q)),D=$("input[name='desem_publico']:checked").val(),P=$("#cargo-publico").val(),U=$("#institucion").val(),M=$("input[name='uif']:checked").val(),R=$("#username").val(),O=R.toUpperCase(),j=$("#userpwd").val(),$("#confirm-userpwd").val(),F=$("#proteccion").is(":checked")?1:0,L=$("#contrato").is(":checked")?1:0,"Ve"!=f&&"Ec-bp"!=f||(I=3),"Co"==f&&(I=4),"Pe"!=f&&"Usd"!=f||(I=1),j.match(/[a-z]/)&&j.match(/[A-Z]/)&&j.match(/([!@\*\-\?¡¿+\/.,_#])/)&&!j.match(/(.)\1{2,}/)){if(null!=E&&0!=E||(E=""),null!=E&&0!=E||(E=""),"S"==aplicaPerfil)var V={aplicaPerfil:aplicaPerfil,primerNombre:r,segundoNombre:i,primerApellido:t,segundoApellido:n,telefono:y,id_ext_per:o,fechaNacimiento:s,tipo_id_ext_per:I,lugar_nacimiento:l,sexo:c,edocivil:u,nacionalidad:p,tipo_direccion:m,cod_postal:v,pais:f,departamento:g,provincia:b,distrito:h,direccion:_,correo:C,telefono2:S,otro_telefono:E,telefono3:A,ruc_cto_laboral:w,centrolab:x,situacionLaboral:J,antiguedad_laboral:k,profesion:N,cargo:T,ingreso_promedio_mensual:q,cargo_publico_last2:D,cargo_publico:P,institucion_publica:U,uif:M,userName:O,password:j,notarjeta:noTarjerta,verifyDigit:a,proteccion:F,contrato:L};else V={aplicaPerfil:aplicaPerfil,primerNombre:r,segundoNombre:i,primerApellido:t,segundoApellido:n,telefono:y,id_ext_per:o,fechaNacimiento:s,tipo_id_ext_per:I,lugar_nacimiento:l,sexo:c,correo:C,telefono2:S,otro_telefono:E,telefono3:A,userName:O,password:j,pais:f};var Q=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));V.cpo_name=Q;var z=JSON.stringify(V);z=CryptoJS.AES.encrypt(z,Q,{format:CryptoJSAesJson}).toString(),$.ajax({method:"POST",url:base_url+"/registro/registrar",data:{request:z,cpo_name:Q,plot:btoa(Q)}}).done(function(e){switch(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),data.code){case 0:$("#form-usuario")[0].reset();var o='<span aria-hidden="true" class="icon-ok-sign"></span>'+data.title;o+='<p>El usuario "'+O+'" '+data.msn+" </p>",$("#content").children().remove(),$("#content").append($("#exito"+data.modalType).removeAttr("style")).html(),$("#message"+data.modalType).append(o);break;case 2:$("#form-usuario")[0].reset(),$(location).attr("href",base_url+"/users/error_gral");break;case 3:msgService(data.title,data.msn,data.modalType,0),$("#load_reg").hide();break;case 4:msgService(data.title,data.msn,data.modalType,1)}})}else $("#load_reg").hide(),$("#registrar").fadeIn(),$("#dialogo_oculto").dialog({title:"Contraseña Errónea",modal:"true",width:"440px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-nopass").on("click",function(){$("#dialogo_oculto").dialog("close")});else $("#registrar").fadeIn()}),$("#otroTelefonoNum").attr("disabled","disabled"),$("#otroTelefonoSelect").on("change",function(){""!=$("#otroTelefonoSelect option:selected").val()?$("#otroTelefonoNum").removeAttr("disabled"):($("#otroTelefonoNum").attr("disabled","disabled"),$("#otroTelefonoNum").val(""))}),$("#cargo-publico").attr("disabled","disabled"),$("#institucion").attr("disabled","disabled"),$("input[name=desem_publico]").on("click",function(){$("#cargo-publico-si").is(":checked")?($("#cargo-publico").removeAttr("disabled"),$("#institucion").removeAttr("disabled")):$("#cargo-publico-no").is(":checked")&&($("#cargo-publico").attr("disabled","disabled"),$("#institucion").attr("disabled","disabled"),$("#cargo-publico").val(""),$("#institucion").val(""))});var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var o,a,r,i,t,n,l,d="",s=0;for(e=c._utf8_encode(e);s<e.length;)o=e.charCodeAt(s++),a=e.charCodeAt(s++),r=e.charCodeAt(s++),i=o>>2,t=(3&o)<<4|a>>4,n=(15&a)<<2|r>>6,l=63&r,isNaN(a)?n=l=64:isNaN(r)&&(l=64),d=d+this._keyStr.charAt(i)+this._keyStr.charAt(t)+this._keyStr.charAt(n)+this._keyStr.charAt(l);return d},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var o="",a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?o+=String.fromCharCode(r):r>127&&r<2048?(o+=String.fromCharCode(r>>6|192),o+=String.fromCharCode(63&r|128)):(o+=String.fromCharCode(r>>12|224),o+=String.fromCharCode(r>>6&63|128),o+=String.fromCharCode(63&r|128))}return o}}});