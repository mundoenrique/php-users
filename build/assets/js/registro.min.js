function msgService(e,o,a,r){$("#registrar").fadeIn(),$("#dialogo-movil").dialog({title:e,modal:"true",width:"440px",open:function(e,r){$(".ui-dialog-titlebar-close",r.dialog).hide(),$("#modalType").addClass(a),$("#msgService").html(o)}}),$("#inva5").click(function(){$("#dialogo-movil").dialog("close"),1==r&&$(location).attr("href",base_url)})}var pais,base_url,base_cdn,digVer="",aplicaPerfil=0,fecha=new Date;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn");var skin=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_skin\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$(function(){function e(){var e=$("#dia").val(),o=$("#mes option:selected").val(),a=$("#ano").val();return""!=e&&""!=o&&""!=a?a<anioMayorEdad?($("#fecha-de-nacimiento").val(e+"/"+o+"/"+a),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):a==anioMayorEdad&&(o<mesActual?($("#fecha-de-nacimiento").val(e+"/"+o+"/"+a),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):o==mesActual&&(e<=diaActual&&($("#fecha-de-nacimiento").val(e+"/"+o+"/"+a),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0))):""!=e||""!=o||""!=a?($("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):void 0}function o(e,o){$.post(base_url+"/registro/listadoDepartamento",{pais:o,subRegion:e},function(e){0==e.rc&&($("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(e.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#provincia").append(a)}))}),$("#provincia").change(function(){$("#distrito").empty().append("<option value=''>Cargando...</option>"),""!=this.value?a(this.value,o):$("#distrito").empty().append("<option value=''>-</option>")})}function a(e,o){$.post(base_url+"/registro/listadoDepartamento",{pais:o,subRegion:e},function(e){0==e.rc&&($("#distrito").empty().append("<option value=''>Seleccione</option>"),$.each(e.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#distrito").append(a)}))})}function r(){$("#ocupacion-laboral").empty().append("<option value=''>Cargando...</option>"),$.post(base_url+"/registro/ListadoProfesiones",{pais:country},function(e){0==e.rc&&($("#ocupacion-laboral").empty().append("<option value=''>Seleccione</option>"),$.each(e.listaProfesiones,function(e,o){var a;a="<option value="+o.idProfesion+"> "+o.tipoProfesion+" </option>",$("#ocupacion-laboral").append(a)}))})}function i(){"pichincha"!=skin?$.post(base_url+"/registro/listado",function(e){$.each(e.listaPaises,function(e,o){var a;a="<option value="+o.cod_pais+"> "+o.nombre_pais+" </option>",$("#iso").append(a)})}):($("#condiciones").removeClass("label-disabled"),$("#accept-terms").prop("disabled",!1))}function n(){var e=$("#dia").val(),o=$("#mes option:selected").val();return 31==e&&2==o||30==e&&2==o||31==e&&4==o||31==e&&6==o||31==e&&9==o||31==e&&11==o?($("#dia").removeClass("field-success").addClass("field-error"),$("#mes").removeClass("field-success").addClass("field-error"),!1):($("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),!0)}function t(e,o){return!e.match(/[^a-z ñáéíóú \s]/gi)}function l(e,o){return!e.match(/[^a-z ñáéíóú 0-9 \s]/gi)}function s(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),jQuery.validator.addMethod("numberEqual1",function(e,o){return!(o.value.length>0)||o.value!=$("#telefonoFijo").val()&&o.value!=$("#telefonoMovil").val()},"Teléfono Otro está repetido"),jQuery.validator.addMethod("numberEqual2",function(e,o){return!(o.value.length>0)||o.value!=$("#telefonoMovil").val()&&o.value!=$("#otroTelefonoNum").val()},"Teléfono Fijo está repetido"),jQuery.validator.addMethod("numberEqual3",function(e,o){return!(o.value.length>0)||o.value!=$("#telefonoFijo").val()&&o.value!=$("#otroTelefonoNum").val()},"Teléfono Movil está repetido"),jQuery.validator.addMethod("username",function(e,o,a){return a.test(e)},"Usuario invalido. "),jQuery.validator.addMethod("mayorEdadAnio",function(o,a){var r=e();return 1==r||0!=r&&void 0},"Usted no es mayor de edad "),jQuery.validator.addMethod("fecha_invalida",function(e,o){var a=n();return 1==a||0!=a&&void 0},"Fecha invalida. "),jQuery.validator.addMethod("expresionRegular",function(e,o){var a=t(e,o);return 1==a||0!=a&&void 0},"Usted. "),jQuery.validator.addMethod("expresionRegular2",function(e,o){var a=l(e,o);return 1==a||0!=a&&void 0},"Usted. "),jQuery.validator.addMethod("mail",function(e,o,a){return a.test(e)},"Correo invalido. "),jQuery.validator.addMethod("validatePassword",function(e,o){return!e.match(/((\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#\$%])*\d(\w|[!@#$%])*(\d)*)/)||!e.match(/\d{1}/gi)},"El campo debe tener mínimo 1 y máximo 3 números consecutivos"),jQuery.validator.addMethod("digValido",function(e,o,a){return e==digVer}),$("#form-validar").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{"card-holder-pin":{required:!0},"card-number":{required:!0,number:!0,minlength:16,maxlength:16},"card-holder-id":{required:!0,number:!0},iso:{required:!0},"accept-terms":{required:!0}},messages:{"card-holder-pin":"Debe introducir la clave secreta o clave web de su tarjeta","card-number":"Debe introducir un número de tarjeta","card-holder-id":"Debe introducir el número de su documento de identidad",iso:"Debe seleccionar su país","accept-terms":"Debe aceptar las Condiciones de Uso"}}),$("#form-usuario").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg2",rules:{tipo_identificacion:{required:!0},numero_identificacion:{required:!0,number:!0},"dig-ver":{required:!0,digits:!0,maxlength:1,digValido:!0},primer_nombre:{required:!0,expresionRegular:!0},segundo_nombre:{required:!1,expresionRegular:!0},primer_apellido:{required:!0,expresionRegular:!0},segundo_apellido:{required:!1,expresionRegular:!0},lugar_nacimiento:{required:!1,expresionRegular:!0},dia:{required:!0,number:!0,range:[1,31]},mes:{required:!0,number:!0,range:[1,12],fecha_invalida:!0},ano:{required:!0,number:!0,min:1900,mayorEdadAnio:!0},genero:{required:!1},edo_civil:{required:!1},nacionalidad:{required:!0,expresionRegular:!0},tipo_direccion:{required:!0},codigo_postal:{required:!1,digits:!0},pais_Residencia:{required:!0},departamento:{required:!0},provincia:{required:!0},distrito:{required:!0},direccion:{required:!0},correo:{required:!0,mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/},"confirm-correo":{required:!0,mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,equalTo:"#email"},telefono_fijo:{number:!0,numberEqual2:!0,minlength:7,maxlength:d},telefono_movil:{required:!0,number:!0,numberEqual3:!0,minlength:7,maxlength:11},otro_tipo_telefono:{required:!1},otro_telefono_num:{number:!0,numberEqual1:!0,minlength:7,maxlength:11},ruc_laboral:{required:!0},centro_laboral:{required:!0},situacion_laboral:{required:!1},ocupacion_laboral:{required:!0},cargo_laboral:{expresionRegular:!0},ingreso:{required:!1,number:!0},desem_publico:{required:!0},cargo_publico:{required:!0,expresionRegular:!0},institucion:{required:!0,expresionRegular2:!0},uif:{required:!0},username:{required:!0,nowhitespace:!0,username:/^[a-z0-9_-]{6,16}$/i},userpwd:{required:!0,minlength:8,maxlength:15,validatePassword:!0},confirm_userpwd:{required:!0,minlength:8,maxlength:15,equalTo:"#userpwd"},contrato:{required:!0},proteccion:{required:!0}},messages:{tipo_identificacion:"Debe Seleccionar su Tipo de Identificación.",numero_identificacion:"El campo Número de identificación NO puede estar vacío y debe contener solo números.","dig-ver":"Dígito verificador inválido.",primer_nombre:"El campo Primer Nombre NO puede estar vacío y debe contener solo letras.",segundo_nombre:"El campo Segundo Nombre debe contener solo letras.",primer_apellido:"El campo Apellido Paterno NO puede estar vacío y debe contener solo letras.",segundo_apellido:"El campo Apellido Materno debe contener solo letras.",lugar_nacimiento:"El campo Lugar de Nacimiento debe contener solo letras.",dia:{required:"El campo Día NO puede estar vacío y debe contener solo números.",number:"El campo Día NO puede estar vacío y debe contener solo números.",range:"El Día debe estar comprendido entre 1 y 31."},mes:{required:"El campo Mes NO puede estar vacío y debe contener solo números.",number:"El campo Mes NO puede estar vacío y debe contener solo números.",fecha_invalida:"Usted introdujo una fecha inválida."},ano:{required:"El campo Año NO puede estar vacío y debe contener solo números.",number:"El campo Año NO puede estar vacío y debe contener solo números.",min:"Por favor ingrese un Año de nacimiento válido."},nacionalidad:"El campo Nacionalidad NO puede estar vacío.",tipo_direccion:"El campo Tipo Dirección NO puede estar vacío",codigo_postal:"El campo Código Postal debe contener solo números.",pais_Residencia:"El campo País de Residencia NO puede estar vacío y debe contener solo letras.",departamento:"El campo Departamento NO puede estar vacío.",provincia:"El campo Provincia NO puede estar vacío.",distrito:"El campo Distrito NO puede estar vacío.",direccion:"El campo Dirección NO puede estar vacío.",correo:"El correo electrónico NO puede estar vacío y debe contener formato correcto. (usuario@ejemplo.com).","confirm-correo":"El campo confirmar correo electrónico debe coincidir con su correo electrónico.",telefono_fijo:{number:"El campo Teléfono Fijo debe contener solo números.",numberEqual2:"Teléfono Fijo está repetido.",minlength:"El campo Teléfono Fijo debe contener como mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Fijo debe contener máximo "+d+" caracteres numéricos."},telefono_movil:{required:"El campo Teléfono Móvil NO puede estar vacío y debe contener solo números.",number:"El campo Teléfono Móvil NO puede estar vacío y debe contener solo números.",numberEqual3:"Teléfono Móvil está repetido.",minlength:"El campo Teléfono Móvil debe contener como mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Móvil debe contener máximo 11 caracteres numéricos."},otro_telefono_num:{number:"El campo Otro Teléfono debe contener solo números.",numberEqual1:"El campo Otro Teléfono está repetido.",minlength:"El campo Otro Teléfono debe contener como minímo 7 caracteres númericos.",maxlength:"El campo Otro Teléfono  debe contener máximo 11 caracteres númericos."},ruc_laboral:"El campo Teléfono Móvil NO puede estar vacío.",centro_laboral:"El campo Centro Laboral NO puede estar vacío.",ocupacion_laboral:"El campo Ocupación Laboral NO puede estar vacío y debe contener solo letras.",cargo_laboral:"El campo Cargo Laboral debe contener solo letras.",ingreso:"El campo Ingreso promedio mensual debe contener solo números.",desem_publico:"El campo ¿Desempeñó cargo público en últimos 2 años? NO puede estar vacío.",cargo_publico:"El campo Cargo Público NO puede estar vacío y debe contener solo letras.",institucion:"El campo Institución NO puede estar vacío.",uif:"El campo ¿Es sujeto obligado a informar UIF-Perú, conforme al artículo 3° de la Ley N° 29038? NO puede estar vacío.",username:{required:"El campo Usuario NO puede estar vacío.",username:"El campo Usuario no tiene un formato valido. Permitido alfanumérico y underscore (barra_piso).",nowhitespace:"El campo Usuario no permite espacios en blanco."},userpwd:"El campo Contraseña debe cumplir con los requerimientos",confirm_userpwd:"El campo confirmar contraseña debe coincidir con su contraseña.",contrato:"Debe aceptar el contrato de cuenta dinero electrónico.",proteccion:"Debe aceptar protección de datos personales."}})}var d="11";"pichincha"==skin&&($("#telefonoFijo").attr("maxlength","9"),d="9"),$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$("#birth-date").datepicker({onSelect:function(e){$("#birth-date").datepicker("option","maxDate",fecha)}}),$("#condiciones").on("click","a",function(){!1===$("#accept-terms").is("disabled")&&("Co"==$("#iso").val()||"Ec-bp"==$("#iso").val()?$("#dialog-rg-Co").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}):"Pe"==$("#iso").val()||"Usd"==$("#iso").val()?$("#dialog-rg-Pe").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}):"Ve"==$("#iso").val()&&$("#dialog-rg-Ve").dialog({modal:"true",width:"940px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}))}),i(),$("button#aceptar").on("click",function(){var e=$(this).parent().parent().attr("id");$("#"+e).dialog("close")}),$("#iso").on("change",function(e){pais=$("option:selected",this),acceptance=$("#accept-terms"),acceptance.removeAttr("checked"),this.selectedIndex>0?(acceptance.prop("disabled",!1),$("#condiciones").removeClass("label-disabled")):acceptance.prop("disabled",!0)}),$(".iso2").on("change",function(e){var o=$(".iso2").val();$(".ocultar").hide(),"Co"==o?$("#dialog-rg-Co2").show():"Pe"==o||"Usd"==o?$("#dialog-rg-Pe2").show():"Ve"==o?$("#dialog-rg-Ve2").show():"Ve"==o&&$(".ocultar").hide()}),anioMayorEdad=0,diaActual=0,mesActual=0,anioActual=0,$("#validar").click(function(){$("#loading").show(),$("button").attr("disabled",!0),s(),$("#form-validar").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3);var a,i,n,t,l,d,u,m,p=$("#form-validar");1==p.valid()?(a=$("#iso").val(),i=$("#content-holder").find("#card-number").val(),n=$("#content-holder").find("#card-holder-id").val(),t=$("#content-holder").find("#card-holder-pin").val(),l=$.datepicker.formatDate("ddmmy",new Date),n=$("#content-holder").find("#card-holder-id").val(),id_ext_per1=$("#content-holder").find("#card-holder-id").val(),d=n+""+l,t=t.toUpperCase(),u=hex_md5(t),"Ve"==a?pin_enc=hex_md5(t+i):(cuentaP=i.substring(10,16),pin_enc=hex_md5(t+cuentaP)),country=a,noTarjerta=i,m=new Date,anioActual=m.getFullYear(),mesActual=m.getMonth()+1,diaActual=m.getDate(),anioMayorEdad=parseInt(anioActual-18),i=c.encode(i),n=c.encode(n),$.post(base_url+"/registro/validar",{userName:d,pais:a,cuenta:i,id_ext_per:n,pin:pin_enc,claveWeb:u},function(a){switch($("#loading").hide(),$("button").attr("disabled",!1),a.code){case 0:var i=a.dataUser,n=i.pais;aplicaPerfil=i.user.aplicaPerfil,digVer=i.afiliacion.dig_verificador_aux,"Pe"==n?"N"==i.user.aplicaPerfil?($(".dig-verificador").remove(),$("#contract").remove(),$(".lugar-nacimiento").remove(),$(".verificacion-one").remove(),$(".segments-laborales").remove(),$(".separador-3").remove(),$(".remove-plata-sueldo").remove(),$(".area-telefonos").removeClass("four-segments"),$(".area-telefonos").addClass("two-segments"),$(".nacimiento-mitad").removeClass("inline-list four-segments field-plata"),$(".radio-sexo").removeClass("field-group four-segments"),$(".fecha-nacimiento li").removeClass("field-group-item"),$(".radio-sexo li").removeClass("select-group-item"),$(".fecha-nacimiento").addClass("ul-mitad"),$(".nacimiento-mitad").addClass("ul-mitad"),$(".radio-sexo").addClass("ul-mitad"),$("#content-registro").css("display","block")):"S"==i.user.aplicaPerfil&&($(".verificacion-one").remove(),$("#content-registro").css("display","block"),$.post(base_url+"/registro/listadoDepartamento",{pais:n,subRegion:1},function(e){$("#departamento").empty().append("<option value=''>Cargando...</option>"),0==a.code?($("#departamento").empty().append("<option value=''>Seleccione</option>"),$.each(e.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#departamento").append(a)})):($("#dialog-cargar-regiones").show(800),$("#invalido3").click(function(){$("#dialog-cargar-regiones").hide("slow")}))}),$("#departamento").change(function(){$("#provincia").empty().append("<option value=''>Cargando...</option>"),$("#distrito").empty().append("<option value=''>-</option>"),""!=this.value?o(this.value,n):$("#provincia").empty().append("<option value=''>-</option>")}),r()):($(".dig-verificador").remove(),$("#contract").remove(),$(".lugar-nacimiento").remove(),$(".verificacion-one").remove(),$(".segments-laborales").remove(),$(".separador-3").remove(),$(".remove-plata-sueldo").remove(),$(".area-telefonos").removeClass("four-segments"),$(".area-telefonos").addClass("two-segments"),$(".nacimiento-mitad").removeClass("inline-list four-segments field-plata"),$(".radio-sexo").removeClass("field-group four-segments"),$(".fecha-nacimiento li").removeClass("field-group-item"),$(".radio-sexo li").removeClass("select-group-item"),$(".fecha-nacimiento").addClass("ul-mitad"),$(".nacimiento-mitad").addClass("ul-mitad"),$(".radio-sexo").addClass("ul-mitad"),$("#content-registro").css("display","block"));for(var t=0;t<51;t++)$(".antiguedad-laboral").append("<option>"+t+"</option>");if("Ve"!=n&&"Co"!=n||($("#first-name").attr("disabled",!1),$("#first-nam").attr("disabled",!1),$("#first-ext-name").attr("disabled",!1),$("#last-name").attr("disabled",!1),$("#last-ext-name").attr("disabled",!1),$("#telefonoFijo").attr("disabled",!1),$("#birth-date").attr("disabled",!1)),$("#content").children().remove(),$("#content").append($("#content-registro").removeAttr("style")).html(),n=i.pais,tipo_doc=i.user.tipo_id_ext_per,nro_doc=i.user.id_ext_per,primer_nombre=i.user.primerNombre,segundo_nombre=i.user.segundoNombre,primer_apellido=i.user.primerApellido,segundo_apellido=i.user.segundoApellido,sexo=i.afiliacion.sexo,fecha_nacimiento=i.user.fechaNacimiento,$("#dia").blur(e),$("#mes").change(e),$("#ano").blur(e),"S"==i.user.aplicaPerfil){lugar_nacimiento=i.afiliacion.lugar_nacimiento,estado_civil=i.afiliacion.edocivil,nacionalidad=i.afiliacion.nacionalidad,aceptaContrato=i.afiliacion.acepta_contrato,"S"===aceptaContrato&&$("#modalContrato").html("pn cuenta general"),"Pe"==n&&$("#paisResidencia").val("Perú");var l=i.afiliacion.ruc_cto_laboral;$("#ruc").val(l)}$("#paisResidenciaHidden").val(n),$("#listaIdentificadores").val(tipo_doc),$("#holder-id").val(nro_doc),$("#first-name").val(primer_nombre),$("#first-ext-name").val(segundo_nombre),$("#last-name").val(primer_apellido),$("#last-ext-name").val(segundo_apellido),"M"==sexo?$("#gender-male").prop("checked",!0):"F"==sexo&&$("#gender-female").prop("checked",!0);var s=fecha_nacimiento.substring(0,2),d=fecha_nacimiento.substring(3,5),c=fecha_nacimiento.substring(6,10);$("#dia").val(s),$("#mes").val(d),$("#ano").val(c),""!=s&&""!=d&&""!=c&&$("#fecha-de-nacimiento").val(s+"/"+d+"/"+c);break;case 2:msgService(a.title,a.msn,a.modalType,0)}})):($("#loading").hide(),$("button").attr("disabled",!1))}),$.datepicker.regional.es={closeText:"Cerrar",prevText:"Previo",nextText:"Próximo",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthStatus:"Ver otro mes",yearStatus:"Ver otro año",dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:0,initStatus:"Selecciona la fecha",isRTL:!1},$.datepicker.setDefaults($.datepicker.regional.es),$("#birth-date").datepicker(),$("#userpwd").keyup(function(){var e=$(this).val();e.length<8||e.length>15?($("#length").removeClass("rule-valid").addClass("rule-invalid"),longitud=!1):($("#length").removeClass("rule-invalid").addClass("rule-valid"),longitud=!0),e.match(/[A-z]/)?($("#letter").removeClass("rule-invalid").addClass("rule-valid"),mt=!0):($("#letter").removeClass("rule-valid").addClass("rule-invalid"),mt=!1),e.match(/[A-Z]/)?($("#capital").removeClass("rule-invalid").addClass("rule-valid"),cap=!0):($("#capital").removeClass("rule-valid").addClass("rule-invalid"),cap=!1),!e.match(/((\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#\$%])*\d(\w|[!@#$%])*(\d)*)/)&&e.match(/\d{1}/)?($("#number").removeClass("rule-invalid").addClass("rule-valid"),car=!0):($("#number").removeClass("rule-valid").addClass("rule-invalid"),car=!1),e.match(/(.)\1{2,}/)?($("#consecutivo").removeClass("rule-valid").addClass("rule-invalid"),cons=!1):($("#consecutivo").removeClass("rule-invalid").addClass("rule-valid"),cons=!0),e.match(/([!@\*\-\?¡¿+\/.,_#])/)?($("#especial").removeClass("rule-invalid").addClass("rule-valid"),esp=!0):($("#especial").removeClass("rule-valid").addClass("rule-invalid"),esp=!1),1==longitud&&1==mt&&1==cap&&1==car&&1==cons&&1==esp?$("#registrar").removeAttr("disabled"):$("#registrar").attr("disabled",!0)}).focus(function(){$("#new").showBalloon({position:"right",contents:$("#psw_info")}),$("#psw_info").show()}).blur(function(){$("#new").hideBalloon({position:"right",contents:$("#psw_info")}),$("#psw_info").hide()}),$("#username").blur(function(){if(usuario=$("#username").val(),usuario==$("#holder-id").val()&&"Ec-bp"==country){var e="Nombre de usuario",o="EL nombre de usurio no puede ser igual a su número de identificación",a="alert-warning";return msgService(e,o,a,0),void $("#username").removeClass("field-success").addClass("field-error")}if(""==usuario||!/^[a-z0-9_-]{6,16}$/i.test(usuario)){e="Nombre de usuario",o="El campo Usuario no puede estar vacío y debe tener un formato valido",a="alert-warning";return msgService(e,o,a,0),void $("#username").removeClass("field-success").addClass("field-error")}username=usuario.toUpperCase(),usuario.match(/[\s]/gi)?$("#loading").hide():($("#loading").show(),$.post(base_url+"/registro/verificar",{usuario:username},function(e){0==e.rc?($("#loading").hide(),$("#registrar").removeAttr("disabled"),$("#username").removeClass("field-error").addClass("field-success")):($("#loading").hide(),$("#username").removeClass("field-success").addClass("field-error"),$("#registrar").attr("disabled",!0),$("#dialogo_disponible").dialog({title:"Usuario no disponible",modal:"true",width:"440px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#disp").click(function(){$("#dialogo_disponible").dialog("close")}))}))}),$("#proteccion").on("click",function(){$(this).off("click"),$("#datos_personales").dialog({title:"PROTECCIÓN DE DATOS PERSONALES",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-datos").click(function(){$("#datos_personales").dialog("close")})}),$("#contrato").on("click",function(){$(this).off("click"),"S"==aceptaContrato?($("#contrato_cuenta_general").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PN CUENTA GENERAL",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-contrato-general").click(function(){$("#contrato_cuenta_general").dialog("close")})):($("#contrato_cuenta").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PLATA BENEFICIOS",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-contrato").click(function(){$("#contrato_cuenta").dialog("close")})),$(".contratos").css("top","50px"),$(".ui-dialog-title").css("width","92%"),$("html, body").animate({scrollTop:$("body").offset().top},0)}),$("#registrar").click(function(){var e,o,a,r,i,n,t,l,d,c,u,m,p,v,f,g,b,h,_,C,E,y,N,x,w,q,T,A,k,S,O,P,D,M,R,j,U,I,L,V,F;if($("#registrar").css("display","none"),s(),$("#form-usuario").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3),e=$("#form-usuario"),1==e.valid())if($("#load_reg").show(),$("#listaIdentificadores").val(),o=$("#holder-id").val(),a=$("#dig-ver").val(),r=$("#first-name").val(),i=$("#first-ext-name").val(),n=$("#last-name").val(),t=$("#last-ext-name").val(),l=$("#lugar-nacimiento").val(),d=$("#fecha-de-nacimiento").val(),c=$("input[name='genero']:checked").val(),u=$("#edocivil").val(),m=$("#nacionalidad").val(),p=$("#tipoDireccion").val(),v=$("#codigoPostal").val(),f=country,g=$("#departamento").val(),b=$("#provincia").val(),h=$("#distrito").val(),_=$("#text-address").val(),C=$("#email").val(),$("#confirm-email").val(),E=$("#telefonoFijo").val(),y=$("#telefonoMovil").val(),N=$("#otroTelefonoSelect option:selected").val(),x=$("#otroTelefonoNum").val(),w=$("#ruc").val(),q=$("#centro-laboral").val(),T=$("#text-situacion").val(),A=$("#antiguedadLaboral").val(),k=$("#ocupacion-laboral option:selected").val(),S=$("#cargo-laboral").val(),O=$("#ingreso").val(),P=$("input[name='desem_publico']:checked").val(),D=$("#cargo-publico").val(),M=$("#institucion").val(),R=$("input[name='uif']:checked").val(),j=$("#username").val(),U=j.toUpperCase(),I=$("#userpwd").val(),$("#confirm-userpwd").val(),V=$("#proteccion").is(":checked")?1:0,F=$("#contrato").is(":checked")?1:0,"Ve"!=f&&"Ec-bp"!=f||(L=3),"Co"==f&&(L=4),"Pe"!=f&&"Usd"!=f||(L=1),empresa="tebca",empresaU="TEBCA",empresa2="servitebca",empresa2U="SERVITEBCA",!(I.match(/[A-z]/)&&I.match(/[A-Z]/)&&I.match(/([!@\*\-\?¡¿+\/.,_#])/))||I.match(/(.)\1{2,}/)||I.match(empresa)||I.match(empresaU)||I.match(empresa2)||I.match(empresa2U))$("#registrar").fadeIn(),$("#dialogo_oculto").dialog({title:"Contraseña Errónea",modal:"true",width:"440px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}});else{if(null!=N&&0!=N||(N=""),null!=N&&0!=N||(N=""),"S"==aplicaPerfil)var Q={aplicaPerfil:aplicaPerfil,primerNombre:r,segundoNombre:i,primerApellido:n,segundoApellido:t,telefono:E,id_ext_per:o,fechaNacimiento:d,tipo_id_ext_per:L,lugar_nacimiento:l,sexo:c,edocivil:u,nacionalidad:m,tipo_direccion:p,cod_postal:v,pais:f,departamento:g,provincia:b,distrito:h,direccion:_,correo:C,telefono2:y,otro_telefono:N,telefono3:x,ruc_cto_laboral:w,centrolab:q,situacionLaboral:T,antiguedad_laboral:A,profesion:k,cargo:S,ingreso_promedio_mensual:O,cargo_publico_last2:P,cargo_publico:D,institucion_publica:M,uif:R,userName:U,password:I,notarjeta:noTarjerta,verifyDigit:a,proteccion:V,contrato:F};else Q={aplicaPerfil:aplicaPerfil,primerNombre:r,segundoNombre:i,primerApellido:n,segundoApellido:t,telefono:E,id_ext_per:o,fechaNacimiento:d,tipo_id_ext_per:L,lugar_nacimiento:l,sexo:c,correo:C,telefono2:y,otro_telefono:N,telefono3:x,userName:U,password:I,pais:f};$.ajax({method:"POST",url:base_url+"/registro/registrar",data:Q}).done(function(e){switch(e.code){case 0:var o='<span aria-hidden="true" class="icon-ok-sign"></span>'+e.title;o+='<p>El usuario "'+U+'" '+e.msn+" </p>",$("#content").children().remove(),$("#content").append($("#exito"+e.modalType).removeAttr("style")).html(),$("#message"+e.modalType).append(o);break;case 2:$(location).attr("href",base_url+"/users/error_gral");break;case 3:msgService(e.title,e.msn,e.modalType,0),$("#load_reg").hide();break;case 4:msgService(e.title,e.msn,e.modalType,1)}})}else $("#registrar").fadeIn()}),$("#otroTelefonoNum").attr("disabled","disabled"),$("#otroTelefonoSelect").on("change",function(){""!=$("#otroTelefonoSelect option:selected").val()?$("#otroTelefonoNum").removeAttr("disabled"):($("#otroTelefonoNum").attr("disabled","disabled"),$("#otroTelefonoNum").val(""))}),$("#cargo-publico").attr("disabled","disabled"),$("#institucion").attr("disabled","disabled"),$("input[name=desem_publico]").on("click",function(){$("#cargo-publico-si").is(":checked")?($("#cargo-publico").removeAttr("disabled"),$("#institucion").removeAttr("disabled")):$("#cargo-publico-no").is(":checked")&&($("#cargo-publico").attr("disabled","disabled"),$("#institucion").attr("disabled","disabled"),$("#cargo-publico").val(""),$("#institucion").val(""))}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({dialogClass:"cond-serv",modal:"true",width:"940px",draggable:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$(".cond-serv").css("top","50px"),$("#ok").click(function(){$("#dialog-tc").dialog("close")})});var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var o,a,r,i,n,t,l,s="",d=0;for(e=c._utf8_encode(e);d<e.length;)o=e.charCodeAt(d++),a=e.charCodeAt(d++),r=e.charCodeAt(d++),i=o>>2,n=(3&o)<<4|a>>4,t=(15&a)<<2|r>>6,l=63&r,isNaN(a)?t=l=64:isNaN(r)&&(l=64),s=s+this._keyStr.charAt(i)+this._keyStr.charAt(n)+this._keyStr.charAt(t)+this._keyStr.charAt(l);return s},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var o="",a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?o+=String.fromCharCode(r):r>127&&r<2048?(o+=String.fromCharCode(r>>6|192),o+=String.fromCharCode(63&r|128)):(o+=String.fromCharCode(r>>12|224),o+=String.fromCharCode(r>>6&63|128),o+=String.fromCharCode(63&r|128))}return o}}});