var base_url,base_cdn,pais,digVer="",aplicaPerfil=0,fecha=new Date,base_url,base_cdn;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn");var skin=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_skin\s*\=\s*([^;]*).*$)|^.*$/,"$1"));function msgService(title,msg,modalType,redirect){$("#registrar").fadeIn(),$("#dialogo-movil").dialog({title:title,modal:"true",width:"440px",open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide(),$("#modalType").addClass(modalType),$("#msgService").html(msg)}}),$("#inva5").click(function(){$("#dialogo-movil").dialog("close"),1==redirect&&$(location).attr("href",base_url)})}$(function(){$("input[type=text], input[type=password], input[type=textarea]").attr("autocomplete","off");var tlfLength="11";function fechaNacimiento(){var dia=$("#dia").val(),mes=$("#mes option:selected").val(),anio=$("#ano").val();return""!=dia&&""!=mes&&""!=anio?anio<anioMayorEdad?($("#fecha-de-nacimiento").val(dia+"/"+mes+"/"+anio),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):anio==anioMayorEdad&&(mes<mesActual?($("#fecha-de-nacimiento").val(dia+"/"+mes+"/"+anio),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):mes==mesActual&&(dia<=diaActual&&($("#fecha-de-nacimiento").val(dia+"/"+mes+"/"+anio),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0))):""!=dia||""!=mes||""!=anio?($("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):void 0}function getProvincias(subRegion,pais){var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/registro/listadoDepartamento",{pais:pais,subRegion:subRegion,cpo_name:cpo_cook},function(data){0==data.rc&&($("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(pos,item){var lista;lista="<option value="+item.codregion+"> "+item.region+" </option>",$("#provincia").append(lista)}))}),$("#provincia").change(function(){$("#distrito").empty().append("<option value=''>Cargando...</option>"),""!=this.value?getDistritos(this.value,pais):$("#distrito").empty().append("<option value=''>-</option>")})}function getDistritos(subRegion,pais){var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/registro/listadoDepartamento",{pais:pais,subRegion:subRegion,cpo_name:cpo_cook},function(data){0==data.rc&&($("#distrito").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(pos,item){var lista;lista="<option value="+item.codregion+"> "+item.region+" </option>",$("#distrito").append(lista)}))})}function getProfesiones(){$("#ocupacion-laboral").empty().append("<option value=''>Cargando...</option>");var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/registro/ListadoProfesiones",{pais:country,cpo_name:cpo_cook},function(data){0==data.rc&&($("#ocupacion-laboral").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaProfesiones,function(pos,item){var lista;lista="<option value="+item.idProfesion+"> "+item.tipoProfesion+" </option>",$("#ocupacion-laboral").append(lista)}))})}function getPaises(){if("pichincha"!=skin){var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/registro/listado",{cpo_name:cpo_cook},function(data){$.each(data.listaPaises,function(pos,item){if("Ec"!=item.cod_pais&&"Ec-bp"!=item.cod_pais){var lista="<option value="+item.cod_pais+"> "+item.nombre_pais+" </option>";$("#iso").append(lista)}})})}else $("#condiciones").removeClass("label-disabled"),$("#accept-terms").prop("disabled",!1)}function fecha_Invalida(){var dia=$("#dia").val(),mes=$("#mes option:selected").val();return 31==dia&&2==mes||30==dia&&2==mes||31==dia&&4==mes||31==dia&&6==mes||31==dia&&9==mes||31==dia&&11==mes?($("#dia").removeClass("field-success").addClass("field-error"),$("#mes").removeClass("field-success").addClass("field-error"),!1):($("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),!0)}function expresionRegular(value,element){return!value.match(/[^a-z ñáéíóú \s]/gi)}function expresionRegular2(value,element){return!value.match(/[^a-z ñáéíóú 0-9 \s]/gi)}function validar_campos(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),jQuery.validator.addMethod("numberEqual1",function(value,element){return!(element.value.length>0)||element.value!=$("#telefonoFijo").val()&&element.value!=$("#telefonoMovil").val()},"Teléfono Otro está repetido"),jQuery.validator.addMethod("numberEqual2",function(value,element){return!(element.value.length>0)||element.value!=$("#telefonoMovil").val()&&element.value!=$("#otroTelefonoNum").val()},"Teléfono Fijo está repetido"),jQuery.validator.addMethod("numberEqual3",function(value,element){return!(element.value.length>0)||element.value!=$("#telefonoFijo").val()&&element.value!=$("#otroTelefonoNum").val()},"Teléfono Movil está repetido"),jQuery.validator.addMethod("username",function(value,element,regex){return regex.test(value)},"Usuario invalido. "),jQuery.validator.addMethod("mayorEdadAnio",function(value,element){var fecha_nacimiento=fechaNacimiento();return 1==fecha_nacimiento||0!=fecha_nacimiento&&void 0},"Usted no es mayor de edad "),jQuery.validator.addMethod("fecha_invalida",function(value,element){var fechaInvalida=fecha_Invalida();return 1==fechaInvalida||0!=fechaInvalida&&void 0},"Fecha invalida. "),jQuery.validator.addMethod("expresionRegular",function(value,element){var valida_expresion=expresionRegular(value,element);return 1==valida_expresion||0!=valida_expresion&&void 0},"Usted. "),jQuery.validator.addMethod("expresionRegular2",function(value,element){var valida_expresion2=expresionRegular2(value,element);return 1==valida_expresion2||0!=valida_expresion2&&void 0},"Usted. "),jQuery.validator.addMethod("mail",function(value,element,regex){return regex.test(value)},"Correo invalido. "),jQuery.validator.addMethod("validatePassword",function(value,element){return!value.match(/((\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#\$%])*\d(\w|[!@#$%])*(\d)*)/)||!value.match(/\d{1}/gi)},"El campo debe tener mínimo 1 y máximo 3 números consecutivos"),jQuery.validator.addMethod("digValido",function(value,element,regex){return value==digVer}),$("#form-validar").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{"card-holder-pin":{required:!0},"card-number":{required:!0,number:!0,minlength:16,maxlength:16},"card-holder-id":{required:!0,number:!0},iso:{required:!0},"accept-terms":{required:!0}},messages:{"card-holder-pin":"Debe introducir la clave secreta o clave web de su tarjeta","card-number":"Debe introducir un número de tarjeta","card-holder-id":"Debe introducir el número de su documento de identidad",iso:"Debe seleccionar su país","accept-terms":"Debe aceptar las Condiciones de Uso"}}),$("#form-usuario").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg2",rules:{tipo_identificacion:{required:!0},numero_identificacion:{required:!0,number:!0},"dig-ver":{required:!0,digits:!0,maxlength:1,digValido:!0},primer_nombre:{required:!0,expresionRegular:!0},segundo_nombre:{required:!1,expresionRegular:!0},primer_apellido:{required:!0,expresionRegular:!0},segundo_apellido:{required:!1,expresionRegular:!0},lugar_nacimiento:{required:!1,expresionRegular:!0},dia:{required:!0,number:!0,range:[1,31]},mes:{required:!0,number:!0,range:[1,12],fecha_invalida:!0},ano:{required:!0,number:!0,min:1900,mayorEdadAnio:!0},genero:{required:!1},edo_civil:{required:!1},nacionalidad:{required:!0,expresionRegular:!0},tipo_direccion:{required:!0},codigo_postal:{required:!1,digits:!0},pais_Residencia:{required:!0},departamento:{required:!0},provincia:{required:!0},distrito:{required:!0},direccion:{required:!0},correo:{required:!0,mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/},"confirm-correo":{required:!0,mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,equalTo:"#email"},telefono_fijo:{number:!0,numberEqual2:!0,minlength:7,maxlength:tlfLength},telefono_movil:{required:!0,number:!0,numberEqual3:!0,minlength:7,maxlength:11},otro_tipo_telefono:{required:!1},otro_telefono_num:{number:!0,numberEqual1:!0,minlength:7,maxlength:11},ruc_laboral:{required:!0},centro_laboral:{required:!0},situacion_laboral:{required:!1},ocupacion_laboral:{required:!0},cargo_laboral:{expresionRegular:!0},ingreso:{required:!1,number:!0},desem_publico:{required:!0},cargo_publico:{required:!0,expresionRegular:!0},institucion:{required:!0,expresionRegular2:!0},uif:{required:!0},username:{required:!0,nowhitespace:!0,username:/^[a-z0-9_-]{6,16}$/i},userpwd:{required:!0,minlength:8,maxlength:15,validatePassword:!0},confirm_userpwd:{required:!0,minlength:8,maxlength:15,equalTo:"#userpwd"},contrato:{required:!0},proteccion:{required:!0}},messages:{tipo_identificacion:"Debe Seleccionar su Tipo de Identificación.",numero_identificacion:"El campo Número de identificación NO puede estar vacío y debe contener solo números.","dig-ver":"Dígito verificador inválido.",primer_nombre:"El campo Primer Nombre NO puede estar vacío y debe contener solo letras.",segundo_nombre:"El campo Segundo Nombre debe contener solo letras.",primer_apellido:"El campo Apellido Paterno NO puede estar vacío y debe contener solo letras.",segundo_apellido:"El campo Apellido Materno debe contener solo letras.",lugar_nacimiento:"El campo Lugar de Nacimiento debe contener solo letras.",dia:{required:"El campo Día NO puede estar vacío y debe contener solo números.",number:"El campo Día NO puede estar vacío y debe contener solo números.",range:"El Día debe estar comprendido entre 1 y 31."},mes:{required:"El campo Mes NO puede estar vacío y debe contener solo números.",number:"El campo Mes NO puede estar vacío y debe contener solo números.",fecha_invalida:"Usted introdujo una fecha inválida."},ano:{required:"El campo Año NO puede estar vacío y debe contener solo números.",number:"El campo Año NO puede estar vacío y debe contener solo números.",min:"Por favor ingrese un Año de nacimiento válido."},nacionalidad:"El campo Nacionalidad NO puede estar vacío.",tipo_direccion:"El campo Tipo Dirección NO puede estar vacío",codigo_postal:"El campo Código Postal debe contener solo números.",pais_Residencia:"El campo País de Residencia NO puede estar vacío y debe contener solo letras.",departamento:"El campo Departamento NO puede estar vacío.",provincia:"El campo Provincia NO puede estar vacío.",distrito:"El campo Distrito NO puede estar vacío.",direccion:"El campo Dirección NO puede estar vacío.",correo:"El correo electrónico NO puede estar vacío y debe contener formato correcto. (usuario@ejemplo.com).","confirm-correo":"El campo confirmar correo electrónico debe coincidir con su correo electrónico.",telefono_fijo:{number:"El campo Teléfono Fijo debe contener solo números.",numberEqual2:"Teléfono Fijo está repetido.",minlength:"El campo Teléfono Fijo debe contener como mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Fijo debe contener máximo "+tlfLength+" caracteres numéricos."},telefono_movil:{required:"El campo Teléfono Móvil NO puede estar vacío y debe contener solo números.",number:"El campo Teléfono Móvil NO puede estar vacío y debe contener solo números.",numberEqual3:"Teléfono Móvil está repetido.",minlength:"El campo Teléfono Móvil debe contener como mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Móvil debe contener máximo 11 caracteres numéricos."},otro_telefono_num:{number:"El campo Otro Teléfono debe contener solo números.",numberEqual1:"El campo Otro Teléfono está repetido.",minlength:"El campo Otro Teléfono debe contener como minímo 7 caracteres númericos.",maxlength:"El campo Otro Teléfono  debe contener máximo 11 caracteres númericos."},ruc_laboral:"El campo Teléfono Móvil NO puede estar vacío.",centro_laboral:"El campo Centro Laboral NO puede estar vacío.",ocupacion_laboral:"El campo Ocupación Laboral NO puede estar vacío y debe contener solo letras.",cargo_laboral:"El campo Cargo Laboral debe contener solo letras.",ingreso:"El campo Ingreso promedio mensual debe contener solo números.",desem_publico:"El campo ¿Desempeñó cargo público en últimos 2 años? NO puede estar vacío.",cargo_publico:"El campo Cargo Público NO puede estar vacío y debe contener solo letras.",institucion:"El campo Institución NO puede estar vacío.",uif:"El campo ¿Es sujeto obligado a informar UIF-Perú, conforme al artículo 3° de la Ley N° 29038? NO puede estar vacío.",username:{required:"El campo Usuario NO puede estar vacío.",username:"El campo Usuario no tiene un formato valido. Permitido alfanumérico y underscore (barra_piso).",nowhitespace:"El campo Usuario no permite espacios en blanco."},userpwd:"El campo Contraseña debe cumplir con los requerimientos",confirm_userpwd:"El campo confirmar contraseña debe coincidir con su contraseña.",contrato:"Debe aceptar el contrato de cuenta dinero electrónico.",proteccion:"Debe aceptar protección de datos personales."}})}"pichincha"==skin&&($("#telefonoFijo").attr("maxlength","9"),tlfLength="9"),$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$("#birth-date").datepicker({onSelect:function(selected){$("#birth-date").datepicker("option","maxDate",fecha)}}),$("#condiciones").on("click","a",function(){!1===$("#accept-terms").is("disabled")&&("Co"==$("#iso").val()||"Ec-bp"==$("#iso").val()?$("#dialog-rg-Co").dialog({modal:"true",width:"940px",open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}):"Pe"==$("#iso").val()||"Usd"==$("#iso").val()?$("#dialog-rg-Pe").dialog({modal:"true",width:"940px",open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}):"Ve"==$("#iso").val()&&$("#dialog-rg-Ve").dialog({modal:"true",width:"940px",open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}))}),getPaises(),$("button#aceptar").on("click",function(){var $pais=$(this).parent().parent().attr("id");$("#"+$pais).dialog("close")}),$("#iso").on("change",function(evt){pais=$("option:selected",this),acceptance=$("#accept-terms"),acceptance.removeAttr("checked"),this.selectedIndex>0?(acceptance.prop("disabled",!1),$("#condiciones").removeClass("label-disabled")):acceptance.prop("disabled",!0)}),$(".iso2").on("change",function(evt){var valor=$(".iso2").val();$(".ocultar").hide(),"Co"==valor?$("#dialog-rg-Co2").show():"Pe"==valor||"Usd"==valor?$("#dialog-rg-Pe2").show():"Ve"==valor?$("#dialog-rg-Ve2").show():"Ve"==valor&&$(".ocultar").hide()}),anioMayorEdad=0,diaActual=0,mesActual=0,anioActual=0,$("#validar").click(function(){$("#loading").show(),$("button").attr("disabled",!0),validar_campos();var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),form;if($("#form-validar").append('<input type="hidden" name="cpo_name" class="ignore" value="'+cpo_cook+'">'),$("#form-validar").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3),1==$("#form-validar").valid()){var pais,cuenta,cedula,id_ext_per,pin,d,fecha,userName,claveWeb,anio;pais=$("#iso").val(),cuenta=$("#content-holder").find("#card-number").val(),id_ext_per=$("#content-holder").find("#card-holder-id").val(),pin=$("#content-holder").find("#card-holder-pin").val(),fecha=$.datepicker.formatDate("ddmmy",new Date),id_ext_per=$("#content-holder").find("#card-holder-id").val(),id_ext_per1=$("#content-holder").find("#card-holder-id").val(),userName=id_ext_per+""+fecha,pin=pin.toUpperCase(),claveWeb=hex_md5(pin),"Ve"==pais?pin_enc=hex_md5(pin+cuenta):(cuentaP=cuenta.substring(10,16),pin_enc=hex_md5(pin+cuentaP)),country=pais,noTarjerta=cuenta,anio=new Date,anioActual=anio.getFullYear(),mesActual=anio.getMonth()+1,diaActual=anio.getDate(),anioMayorEdad=parseInt(anioActual-18),cuenta=Base64.encode(cuenta),id_ext_per=Base64.encode(id_ext_per);var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),dataRequest=JSON.stringify({userName:userName,pais:pais,cuenta:cuenta,id_ext_per:id_ext_per,pin:pin_enc,claveWeb:claveWeb});dataRequest=CryptoJS.AES.encrypt(dataRequest,cpo_cook,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/validar",{request:dataRequest,cpo_name:cpo_cook,plot:btoa(cpo_cook)},function(response){switch(dataUser=JSON.parse(CryptoJS.AES.decrypt(response.code,response.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#loading").hide(),$("button").attr("disabled",!1),dataUser.code){case 0:$("#form-validar")[0].reset();var data=dataUser.dataUser,pais=data.pais;if(aplicaPerfil=data.user.aplicaPerfil,digVer=data.afiliacion.dig_verificador_aux,"Pe"==pais){if("N"==data.user.aplicaPerfil)$(".dig-verificador").remove(),$("#contract").remove(),$(".lugar-nacimiento").remove(),$(".verificacion-one").remove(),$(".segments-laborales").remove(),$(".separador-3").remove(),$(".remove-plata-sueldo").remove(),$(".area-telefonos").removeClass("four-segments"),$(".area-telefonos").addClass("two-segments"),$(".nacimiento-mitad").removeClass("inline-list four-segments field-plata"),$(".radio-sexo").removeClass("field-group four-segments"),$(".fecha-nacimiento li").removeClass("field-group-item"),$(".radio-sexo li").removeClass("select-group-item"),$(".fecha-nacimiento").addClass("ul-mitad"),$(".nacimiento-mitad").addClass("ul-mitad"),$(".radio-sexo").addClass("ul-mitad"),$("#content-registro").css("display","block");else if("S"==data.user.aplicaPerfil){$(".verificacion-one").remove(),$("#content-registro").css("display","block");var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/registro/listadoDepartamento",{pais:pais,subRegion:1,cpo_name:cpo_cook},function(data){$("#departamento").empty().append("<option value=''>Cargando...</option>"),0==dataUser.code?($("#departamento").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(pos,item){var lista;lista="<option value="+item.codregion+"> "+item.region+" </option>",$("#departamento").append(lista)})):($("#dialog-cargar-regiones").show(800),$("#invalido3").click(function(){$("#dialog-cargar-regiones").hide("slow")}))}),$("#departamento").change(function(){$("#provincia").empty().append("<option value=''>Cargando...</option>"),$("#distrito").empty().append("<option value=''>-</option>"),""!=this.value?getProvincias(this.value,pais):$("#provincia").empty().append("<option value=''>-</option>")}),getProfesiones()}}else $(".dig-verificador").remove(),$("#contract").remove(),$(".lugar-nacimiento").remove(),$(".verificacion-one").remove(),$(".segments-laborales").remove(),$(".separador-3").remove(),$(".remove-plata-sueldo").remove(),$(".area-telefonos").removeClass("four-segments"),$(".area-telefonos").addClass("two-segments"),$(".nacimiento-mitad").removeClass("inline-list four-segments field-plata"),$(".radio-sexo").removeClass("field-group four-segments"),$(".fecha-nacimiento li").removeClass("field-group-item"),$(".radio-sexo li").removeClass("select-group-item"),$(".fecha-nacimiento").addClass("ul-mitad"),$(".nacimiento-mitad").addClass("ul-mitad"),$(".radio-sexo").addClass("ul-mitad"),$("#content-registro").css("display","block");for(var antiguedad=0;antiguedad<51;antiguedad++)$(".antiguedad-laboral").append("<option>"+antiguedad+"</option>");if("Ve"!=pais&&"Co"!=pais||($("#first-name").attr("disabled",!1),$("#first-nam").attr("disabled",!1),$("#first-ext-name").attr("disabled",!1),$("#last-name").attr("disabled",!1),$("#last-ext-name").attr("disabled",!1),$("#telefonoFijo").attr("disabled",!1),$("#birth-date").attr("disabled",!1)),$("#content").children().remove(),$("#content").append($("#content-registro").removeAttr("style")).html(),pais=data.pais,tipo_doc=data.user.tipo_id_ext_per,nro_doc=data.user.id_ext_per,primer_nombre=data.user.primerNombre,segundo_nombre=data.user.segundoNombre,primer_apellido=data.user.primerApellido,segundo_apellido=data.user.segundoApellido,sexo=data.afiliacion.sexo,fecha_nacimiento=data.user.fechaNacimiento,$("#dia").blur(fechaNacimiento),$("#mes").change(fechaNacimiento),$("#ano").blur(fechaNacimiento),"S"==data.user.aplicaPerfil){lugar_nacimiento=data.afiliacion.lugar_nacimiento,estado_civil=data.afiliacion.edocivil,nacionalidad=data.afiliacion.nacionalidad,aceptaContrato=data.afiliacion.acepta_contrato,"S"===aceptaContrato&&$("#modalContrato").html("pn cuenta general"),"Pe"==pais&&$("#paisResidencia").val("Perú");var ruc=data.afiliacion.ruc_cto_laboral;$("#ruc").val(ruc)}$("#paisResidenciaHidden").val(pais),$("#listaIdentificadores").val(tipo_doc),$("#holder-id").val(nro_doc),$("#first-name").val(primer_nombre),$("#first-ext-name").val(segundo_nombre),$("#last-name").val(primer_apellido),$("#last-ext-name").val(segundo_apellido),"M"==sexo?$("#gender-male").prop("checked",!0):"F"==sexo&&$("#gender-female").prop("checked",!0);var dia=fecha_nacimiento.substring(0,2),mes=fecha_nacimiento.substring(3,5),ano=fecha_nacimiento.substring(6,10);$("#dia").val(dia),$("#mes").val(mes),$("#ano").val(ano),""!=dia&&""!=mes&&""!=ano&&$("#fecha-de-nacimiento").val(dia+"/"+mes+"/"+ano);break;case 2:msgService(dataUser.title,dataUser.msn,dataUser.modalType,0)}})}else $("#loading").hide(),$("button").attr("disabled",!1)}),$.datepicker.regional.es={closeText:"Cerrar",prevText:"Previo",nextText:"Próximo",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthStatus:"Ver otro mes",yearStatus:"Ver otro año",dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:0,initStatus:"Selecciona la fecha",isRTL:!1},$.datepicker.setDefaults($.datepicker.regional.es),$("#birth-date").datepicker(),$("#userpwd").keyup(function(){var pswd=$(this).val();pswd.length<8||pswd.length>15?($("#length").removeClass("rule-valid").addClass("rule-invalid"),longitud=!1):($("#length").removeClass("rule-invalid").addClass("rule-valid"),longitud=!0),pswd.match(/[A-z]/)?($("#letter").removeClass("rule-invalid").addClass("rule-valid"),mt=!0):($("#letter").removeClass("rule-valid").addClass("rule-invalid"),mt=!1),pswd.match(/[A-Z]/)?($("#capital").removeClass("rule-invalid").addClass("rule-valid"),cap=!0):($("#capital").removeClass("rule-valid").addClass("rule-invalid"),cap=!1),!pswd.match(/((\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#$%])*\d(\w|[!@#\$%])*\d(\w|[!@#$%])*(\d)*)/)&&pswd.match(/\d{1}/)?($("#number").removeClass("rule-invalid").addClass("rule-valid"),car=!0):($("#number").removeClass("rule-valid").addClass("rule-invalid"),car=!1),pswd.match(/(.)\1{2,}/)?($("#consecutivo").removeClass("rule-valid").addClass("rule-invalid"),cons=!1):($("#consecutivo").removeClass("rule-invalid").addClass("rule-valid"),cons=!0),pswd.match(/([!@\*\-\?¡¿+\/.,_#])/)?($("#especial").removeClass("rule-invalid").addClass("rule-valid"),esp=!0):($("#especial").removeClass("rule-valid").addClass("rule-invalid"),esp=!1),1==longitud&&1==mt&&1==cap&&1==car&&1==cons&&1==esp?$("#registrar").removeAttr("disabled"):$("#registrar").attr("disabled",!0)}).focus(function(){$("#new").showBalloon({position:"right",contents:$("#psw_info")}),$("#psw_info").show()}).blur(function(){$("#new").hideBalloon({position:"right",contents:$("#psw_info")}),$("#psw_info").hide()}),$("#username").blur(function(){var titleCI,msgCI,modalTypeCI,titleCI,msgCI,modalTypeCI;if(usuario=$("#username").val(),usuario==$("#holder-id").val()&&"Ec-bp"==country)return msgService(titleCI="Nombre de usuario",msgCI="EL nombre de usurio no puede ser igual a su número de identificación",modalTypeCI="alert-warning",0),void $("#username").removeClass("field-success").addClass("field-error");if(""==usuario||!/^[a-z0-9_-]{6,16}$/i.test(usuario))return msgService(titleCI="Nombre de usuario",msgCI="El campo Usuario no puede estar vacío y debe tener un formato valido",modalTypeCI="alert-warning",0),void $("#username").removeClass("field-success").addClass("field-error");if(username=usuario.toUpperCase(),usuario.match(/[\s]/gi))$("#loading").hide();else{$("#loading").show();var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),dataRequest=JSON.stringify({usuario:username});dataRequest=CryptoJS.AES.encrypt(dataRequest,cpo_cook,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/registro/verificar",{request:dataRequest,cpo_name:cpo_cook,plot:btoa(cpo_cook)},function(response){data=JSON.parse(CryptoJS.AES.decrypt(response.code,response.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc?($("#loading").hide(),$("#registrar").removeAttr("disabled"),$("#username").removeClass("field-error").addClass("field-success")):($("#loading").hide(),$("#username").removeClass("field-success").addClass("field-error"),$("#registrar").attr("disabled",!0),$("#dialogo_disponible").dialog({title:"Usuario no disponible",modal:"true",width:"440px",open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}),$("#disp").click(function(){$("#dialogo_disponible").dialog("close")}))})}}),$("#proteccion").on("click",function(){$(this).off("click"),$("#datos_personales").dialog({title:"PROTECCIÓN DE DATOS PERSONALES",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}),$("#close-datos").click(function(){$("#datos_personales").dialog("close")})}),$("#contrato").on("click",function(){$(this).off("click"),"S"==aceptaContrato?($("#contrato_cuenta_general").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PN CUENTA GENERAL",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}),$("#close-contrato-general").click(function(){$("#contrato_cuenta_general").dialog("close")})):($("#contrato_cuenta").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PLATA BENEFICIOS",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}),$("#close-contrato").click(function(){$("#contrato_cuenta").dialog("close")})),$(".contratos").css("top","50px"),$(".ui-dialog-title").css("width","92%"),$("html, body").animate({scrollTop:$("body").offset().top},0)}),$("#registrar").click(function(){var form,notSms,notEmail,typeIdentifier,nroDocument,verifyDigit,firstName,firstExtName,lastName,lastExtName,placeBirth,birthDate,sexo,civilStatus,nationality,typeAddress,postalCode,countryResidence,departament,province,district,address,email,confirmEmail,phone,movilPhone,anotherPhone,anotherPhoneNum,ruc,centroLaboral,situacionLaboral,antiguedadLaboral,ocupacionLaboral,cargoLaboral,ingreso,desemPublico,cargoPublico,institucion,uif,usuario,username,password,confirmPassword,tipoId,proteccion,contrato;if($("#registrar").css("display","none"),validar_campos(),$("#form-usuario").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3),1==(form=$("#form-usuario")).valid())if($("#load_reg").show(),typeIdentifier=$("#listaIdentificadores").val(),nroDocument=$("#holder-id").val(),verifyDigit=$("#dig-ver").val(),firstName=$("#first-name").val(),firstExtName=$("#first-ext-name").val(),lastName=$("#last-name").val(),lastExtName=$("#last-ext-name").val(),placeBirth=$("#lugar-nacimiento").val(),birthDate=$("#fecha-de-nacimiento").val(),sexo=$("input[name='genero']:checked").val(),civilStatus=$("#edocivil").val(),nationality=$("#nacionalidad").val(),typeAddress=$("#tipoDireccion").val(),postalCode=$("#codigoPostal").val(),countryResidence=country,departament=$("#departamento").val(),province=$("#provincia").val(),district=$("#distrito").val(),address=$("#text-address").val(),email=$("#email").val(),confirmEmail=$("#confirm-email").val(),phone=$("#telefonoFijo").val(),movilPhone=$("#telefonoMovil").val(),anotherPhone=$("#otroTelefonoSelect option:selected").val(),anotherPhoneNum=$("#otroTelefonoNum").val(),ruc=$("#ruc").val(),centroLaboral=$("#centro-laboral").val(),situacionLaboral=$("#text-situacion").val(),antiguedadLaboral=$("#antiguedadLaboral").val(),ocupacionLaboral=$("#ocupacion-laboral option:selected").val(),cargoLaboral=$("#cargo-laboral").val(),ingreso=$("#ingreso").val(),desemPublico=$("input[name='desem_publico']:checked").val(),cargoPublico=$("#cargo-publico").val(),institucion=$("#institucion").val(),uif=$("input[name='uif']:checked").val(),usuario=$("#username").val(),username=usuario.toUpperCase(),password=$("#userpwd").val(),confirmPassword=$("#confirm-userpwd").val(),proteccion=$("#proteccion").is(":checked")?1:0,contrato=$("#contrato").is(":checked")?1:0,"Ve"!=countryResidence&&"Ec-bp"!=countryResidence||(tipoId=3),"Co"==countryResidence&&(tipoId=4),"Pe"!=countryResidence&&"Usd"!=countryResidence||(tipoId=1),empresa="tebca",empresaU="TEBCA",empresa2="servitebca",empresa2U="SERVITEBCA",!(password.match(/[A-z]/)&&password.match(/[A-Z]/)&&password.match(/([!@\*\-\?¡¿+\/.,_#])/))||password.match(/(.)\1{2,}/)||password.match(empresa)||password.match(empresaU)||password.match(empresa2)||password.match(empresa2U))$("#registrar").fadeIn(),$("#dialogo_oculto").dialog({title:"Contraseña Errónea",modal:"true",width:"440px",open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}});else{if(null!=anotherPhone&&0!=anotherPhone||(anotherPhone=""),null!=anotherPhone&&0!=anotherPhone||(anotherPhone=""),"S"==aplicaPerfil)var dataUser={aplicaPerfil:aplicaPerfil,primerNombre:firstName,segundoNombre:firstExtName,primerApellido:lastName,segundoApellido:lastExtName,telefono:phone,id_ext_per:nroDocument,fechaNacimiento:birthDate,tipo_id_ext_per:tipoId,lugar_nacimiento:placeBirth,sexo:sexo,edocivil:civilStatus,nacionalidad:nationality,tipo_direccion:typeAddress,cod_postal:postalCode,pais:countryResidence,departamento:departament,provincia:province,distrito:district,direccion:address,correo:email,telefono2:movilPhone,otro_telefono:anotherPhone,telefono3:anotherPhoneNum,ruc_cto_laboral:ruc,centrolab:centroLaboral,situacionLaboral:situacionLaboral,antiguedad_laboral:antiguedadLaboral,profesion:ocupacionLaboral,cargo:cargoLaboral,ingreso_promedio_mensual:ingreso,cargo_publico_last2:desemPublico,cargo_publico:cargoPublico,institucion_publica:institucion,uif:uif,userName:username,password:password,notarjeta:noTarjerta,verifyDigit:verifyDigit,proteccion:proteccion,contrato:contrato};else var dataUser={aplicaPerfil:aplicaPerfil,primerNombre:firstName,segundoNombre:firstExtName,primerApellido:lastName,segundoApellido:lastExtName,telefono:phone,id_ext_per:nroDocument,fechaNacimiento:birthDate,tipo_id_ext_per:tipoId,lugar_nacimiento:placeBirth,sexo:sexo,correo:email,telefono2:movilPhone,otro_telefono:anotherPhone,telefono3:anotherPhoneNum,userName:username,password:password,pais:countryResidence};var cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));dataUser.cpo_name=cpo_cook;var dataRequest=JSON.stringify(dataUser);dataRequest=CryptoJS.AES.encrypt(dataRequest,cpo_cook,{format:CryptoJSAesJson}).toString(),$.ajax({method:"POST",url:base_url+"/registro/registrar",data:{request:dataRequest,cpo_name:cpo_cook,plot:btoa(cpo_cook)}}).done(function(response){switch(data=JSON.parse(CryptoJS.AES.decrypt(response.code,response.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),data.code){case 0:$("#form-usuario")[0].reset();var cadena='<span aria-hidden="true" class="icon-ok-sign"></span>'+data.title;cadena+='<p>El usuario "'+username+'" '+data.msn+" </p>",$("#content").children().remove(),$("#content").append($("#exito"+data.modalType).removeAttr("style")).html(),$("#message"+data.modalType).append(cadena);break;case 2:$("#form-usuario")[0].reset(),$(location).attr("href",base_url+"/users/error_gral");break;case 3:msgService(data.title,data.msn,data.modalType,0),$("#load_reg").hide();break;case 4:msgService(data.title,data.msn,data.modalType,1)}})}else $("#registrar").fadeIn()}),$("#otroTelefonoNum").attr("disabled","disabled"),$("#otroTelefonoSelect").on("change",function(){""!=$("#otroTelefonoSelect option:selected").val()?$("#otroTelefonoNum").removeAttr("disabled"):($("#otroTelefonoNum").attr("disabled","disabled"),$("#otroTelefonoNum").val(""))}),$("#cargo-publico").attr("disabled","disabled"),$("#institucion").attr("disabled","disabled"),$("input[name=desem_publico]").on("click",function(){$("#cargo-publico-si").is(":checked")?($("#cargo-publico").removeAttr("disabled"),$("#institucion").removeAttr("disabled")):$("#cargo-publico-no").is(":checked")&&($("#cargo-publico").attr("disabled","disabled"),$("#institucion").attr("disabled","disabled"),$("#cargo-publico").val(""),$("#institucion").val(""))}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({dialogClass:"cond-serv",modal:"true",width:"940px",draggable:!1,open:function(event,ui){$(".ui-dialog-titlebar-close",ui.dialog).hide()}}),$(".cond-serv").css("top","50px"),$("#ok").click(function(){$("#dialog-tc").dialog("close")})});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="",chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0;for(input=Base64._utf8_encode(input);i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}}});