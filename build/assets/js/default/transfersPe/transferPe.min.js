function modalCtasOrigen(){$("#content-product").dialog({title:"Selecci√≥n de Cuentas Origen",modal:"true",width:"950px",open:function(a,t){$(".ui-dialog-titlebar-close",t.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")})}function resetCard(){resetForms(),$("#form-trx").find("input, textarea, button, select").attr("disabled",!0),$("#form-search").find("input, textarea, button, select").attr("disabled",!1),$("#tipoRef2").prop("checked",!0),$("#tipoRef").prop("checked",!1)}function resetForms(){$("#form-trx")[0].reset(),$("#form-search")[0].reset(),$("#msg-history").children().remove(),$("#form-trx *, #form-search *").children().removeClass("field-success field-error")}$(function(){operationType="P2P";$("#montoLabel").val();$(".dialog").on("click",function(){modalCtasOrigen()}),$("input:radio[name=tipoRef]").on("change",function(a){resetForms();var t=$("input:radio[name=tipoRef]:checked").val();1==t?($("#cardSelect").hide(),$("#cardText").show(),$("#telefonoDestino").attr("disabled",!0),$("#form-trx").find("input, textarea, button, select").attr("disabled",!1),$("#ctaDestino").addClass("ignore"),$("#ctaDestinoText").removeClass("ignore"),$("#telefonoDestino").val(""),$("#search-cards").attr("disabled",!0),$("#continuar").attr("disabled",!1)):($("#ctaDestino").removeClass("ignore"),$("#ctaDestinoText").addClass("ignore"),$("#cardSelect").show(),$("#cardText").hide(),$("#form-trx").find("input, textarea, button, select").attr("disabled",!0),$("#form-search").find("input, textarea, button, select").attr("disabled",!1),$("#ctaDestinoText").val(""),$("#search-cards").attr("disabled",!1),$("#continuar").attr("disabled",!0))}),$(".dashboard-item").click(function(){var a,t,e,r,o,i,n,s,c;resetCard(),a=$(this).find("img").attr("src"),t=$(this).attr("card"),e=$(this).attr("marca").toLowerCase(),r=$(this).attr("mascara"),o=$(this).attr("producto1"),$(this).attr("empresa"),s=$(this).attr("nombre"),pais=$(this).attr("pais"),montoMaxOperaciones=parseFloat($(this).attr("montoMaxOperaciones")),montoMinOperaciones=parseFloat($(this).attr("montoMinOperaciones")),montoMaxDiario=parseFloat($(this).attr("montoMaxDiario")),montoMaxSemanal=parseFloat($(this).attr("montoMaxSemanal")),montoMaxMensual=parseFloat($(this).attr("montoMaxMensual")),cantidadOperacionesDiarias=parseInt($(this).attr("cantidadOperacionesDiarias")),cantidadOperacionesSemanales=parseInt($(this).attr("cantidadOperacionesSemanales")),cantidadOperacionesMensual=parseInt($(this).attr("cantidadOperacionesMensual")),montoAcumDiario=parseFloat($(this).attr("montoAcumDiario")),montoAcumSemanal=parseFloat($(this).attr("montoAcumSemanal")),montoAcumMensual=parseFloat($(this).attr("montoAcumMensual")),acumCantidadOperacionesDiarias=parseInt($(this).attr("acumCantidadOperacionesDiarias")),acumCantidadOperacionesSemanales=parseInt($(this).attr("acumCantidadOperacionesSemanales")),acumCantidadOperacionesMensual=parseInt($(this).attr("acumCantidadOperacionesMensual")),i=c="Pe"==pais||"Usd"==pais?"0.00":"0,00",$("#ctaOrigen").val(t),$("#donor").children().remove(),n='<div class="product-presentation" producto="'+o+'">',n+='<img src="'+a+'" width="200" height="130" alt="" />',n+='<div class="product-network '+e.toLowerCase()+'"></div>',n+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+t+'" />',n+="</div>",n+='<div class="product-info">',n+='<p class="product-cardholder" id="nombreCtaOrigen">'+s+"</p>",n+='<p class="product-cardnumber">'+r+"</p>",n+='<p class="product-metadata">'+o+"</p>",n+='<nav class="product-stack">',n+='<ul class="stack">',n+='<li class="stack-item">',n+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',n+="</li>",n+="</ul>",n+="</nav>",n+="</div>",n+='<div class="product-scheme">',n+='<ul class="product-balance-group" style="margin: 10px 0">',n+='<li>Disponible <span class="product-balance" id="balance-available">'+moneda+" "+c+"</span></li>",n+='<li>A debitar <span class="product-balance debitar" monto-transfer id="balance-debit">'+moneda+" "+i+"</span></li>",n+="</ul>",n+="<ul class='field-group'>",n+="<li class='field-group-item'>",n+="</li>",n+="</ul>",n+="</div>",$("#formTransferenciaDestino").show(),$("#donor").append(n);var d=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),l=JSON.stringify({tarjeta:$(this).attr("card")});l=CryptoJS.AES.encrypt(l,d,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/dashboard/saldo",{request:l,cpo_name:d,plot:btoa(d)},function(a){data=JSON.parse(CryptoJS.AES.decrypt(a.code,a.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8));var t=data.disponible;"string"!=typeof t&&(t="---",saldoVerifica=0),saldoVerifica=t,$("#balance-available").html(moneda+" "+t),$("#balance-available").attr("saldo",t)}),$.each($(".dashboard-item"),function(a,t){$(this).hasClass("current-dashboard-item")&&$(this).removeClass("current-dashboard-item")}),$(this).addClass("current-dashboard-item"),$("#content-product").dialog("close");$(this).attr("card"),$(this).attr("prefix")}),$("#donor").on("click",".stack-item",function(){modalCtasOrigen()}),$("#search-cards").on("click",function(){validar_campos()})}),$("#continuar").on("click",function(){var a,t=$("#continuar").attr("action");switch(t){case"form-confirm":a=$("#form-trx");break;case"form-trx":a="";var e=""===$("#ctaDestinoText").val()?$("#ctaDestino").val():$("#ctaDestinoText").val(),r={ctaOrigen:$("#donor-cardnumber-origen").attr("cardorigen"),ctaDestino:e,monto:$("#monto").val(),descripcion:$("#descripcion").val(),pin:""},o=$.param(r);makeTransferPe(o,0),$("#progress > ul > li:nth-child(2)").addClass("completed-step-item"),$("#progress > ul > li:nth-child(3)").addClass("current-step-item");break;case"form-pin":a=$("#form-pin")}if(""!==a){validar_campos();var i=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$(a).append('<input type="hidden" name="cpo_name" class="ignore" value="'+i+'">'),a.submit(),a.valid()}});