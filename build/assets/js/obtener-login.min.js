var path,base_cdn;path=window.location.href.split("/"),base_cdn=path[0]+"//"+path[2].replace("online","cdn")+"/"+path[3],base_url=path[0]+"//"+path[2]+"/"+path[3],$(function(){function a(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),$("#form-validar").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{email:{required:!0,email:!0},"card-holder-id":{required:!0,number:!0}},messages:{email:"El correo electrónico NO puede estar vacío y debe contener formato correcto. (xxxxx@ejemplo.com)","card-holder-id":"Debe introducir su número de identidad"}})}$("#continuar").click(function(){$("#continuar").attr("disabled",!0),$("#loading").show(),a(),$("#form-validar").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3);var c=$("#form-validar");if(1==c.valid()){var d,e;e=$("#card-holder-id").val(),d=$("#email").val(),e=b.encode(e),d=b.encode(d),$.post(base_url+"/users/obtenerlogin_call",{id_ext_per:e,email:d},function(a){a.rc==-61&&$(location).attr("href",base_url+"/users/error_gral"),0==a.rc?($("#content").children().remove(),$("#content").append($("#confirmacion").removeAttr("style")).html(),$("#continuar").attr("disabled",!1),$("#loading").hide()):a.rc==-187?($("#dialog-login-error").dialog({title:"Datos Erróneos",modal:"true",width:"400px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-login-error").dialog("close")}),$("#continuar").attr("disabled",!1),$("#loading").hide()):location.assign("/personas")})}else $("#continuar").attr("disabled",!1),$("#loading").hide()}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})});var b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var d,e,f,g,h,i,j,c="",k=0;for(a=b._utf8_encode(a);k<a.length;)d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=a.charCodeAt(k++),g=d>>2,h=(3&d)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),c=c+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i)+this._keyStr.charAt(j);return c},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}}});