var base_url,base_cdn;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn"),$(function(){function r(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),$("#form-validar").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{email:{required:!0,email:!0},"card-holder-id":{required:!0,number:!0}},messages:{email:"El correo electrónico NO puede estar vacío y debe contener formato correcto. (xxxxx@ejemplo.com)","card-holder-id":"Debe introducir su número de identidad"}})}$("#continuar").click(function(){$("#continuar").attr("disabled",!0),$("#loading").show(),r(),$("#form-validar").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3);var a=$("#form-validar");if(1==a.valid()){var o,i;i=$("#card-holder-id").val(),o=$("#email").val(),i=e.encode(i),o=e.encode(o),$.post(base_url+"/users/obtenerlogin_call",{id_ext_per:i,email:o},function(r){r.rc==-61&&$(location).attr("href",base_url+"/users/error_gral"),0==r.rc?($("#content").children().remove(),$("#content").append($("#confirmacion").removeAttr("style")).html(),$("#continuar").attr("disabled",!1),$("#loading").hide()):r.rc==-187?($("#dialog-login-error").dialog({title:"Datos Erróneos",modal:"true",width:"400px",open:function(r,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-login-error").dialog("close")}),$("#continuar").attr("disabled",!1),$("#loading").hide()):location.assign("/personas")})}else $("#continuar").attr("disabled",!1),$("#loading").hide()}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(r,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})});var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(r){var a,o,i,t,n,d,l,c="",s=0;for(r=e._utf8_encode(r);s<r.length;)a=r.charCodeAt(s++),o=r.charCodeAt(s++),i=r.charCodeAt(s++),t=a>>2,n=(3&a)<<4|o>>4,d=(15&o)<<2|i>>6,l=63&i,isNaN(o)?d=l=64:isNaN(i)&&(l=64),c=c+this._keyStr.charAt(t)+this._keyStr.charAt(n)+this._keyStr.charAt(d)+this._keyStr.charAt(l);return c},_utf8_encode:function(r){r=r.replace(/\r\n/g,"\n");for(var e="",a=0;a<r.length;a++){var o=r.charCodeAt(a);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e}}});