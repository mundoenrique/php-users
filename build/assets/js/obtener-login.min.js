var path,base_cdn,base_url;path=window.location.href.split("/"),base_url=path[0]+"//"+path[2],base_cdn=base_url+"/assets",$(function(){function e(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),$("#form-validar").validate({errorElement:"label",ignore:"",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{email:{required:!0,email:!0},"card-holder-id":{required:!0,number:!0}},messages:{email:"El correo electrónico NO puede estar vacío y debe contener formato correcto. (xxxxx@ejemplo.com)","card-holder-id":"Debe introducir su número de identidad"}})}$("#continuar").click(function(){$("#continuar").attr("disabled",!0),$("#loading").show(),e(),$("#form-validar").submit(),setTimeout(function(){$("#msg").fadeOut()},5e3);var o=$("#form-validar");if(1==o.valid()){var a,i;i=$("#card-holder-id").val(),a=$("#email").val(),i=r.encode(i),a=r.encode(a),$.post(base_url+"/users/obtenerlogin_call",{id_ext_per:i,email:a},function(e){e.rc==-61&&$(location).attr("href",base_url+"/users/error_gral"),0==e.rc?($("#content").children().remove(),$("#content").append($("#confirmacion").removeAttr("style")).html(),$("#continuar").attr("disabled",!1),$("#loading").hide()):e.rc==-187?($("#dialog-login-error").dialog({title:"Datos Erróneos",modal:"true",width:"400px",open:function(e,r){$(".ui-dialog-titlebar-close",r.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-login-error").dialog("close")}),$("#continuar").attr("disabled",!1),$("#loading").hide()):location.assign("/personas")})}else $("#continuar").attr("disabled",!1),$("#loading").hide()}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(e,r){$(".ui-dialog-titlebar-close",r.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})});var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var o,a,i,t,n,l,d,c="",s=0;for(e=r._utf8_encode(e);s<e.length;)o=e.charCodeAt(s++),a=e.charCodeAt(s++),i=e.charCodeAt(s++),t=o>>2,n=(3&o)<<4|a>>4,l=(15&a)<<2|i>>6,d=63&i,isNaN(a)?l=d=64:isNaN(i)&&(d=64),c=c+this._keyStr.charAt(t)+this._keyStr.charAt(n)+this._keyStr.charAt(l)+this._keyStr.charAt(d);return c},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var r="",o=0;o<e.length;o++){var a=e.charCodeAt(o);a<128?r+=String.fromCharCode(a):a>127&&a<2048?(r+=String.fromCharCode(a>>6|192),r+=String.fromCharCode(63&a|128)):(r+=String.fromCharCode(a>>12|224),r+=String.fromCharCode(a>>6&63|128),r+=String.fromCharCode(63&a|128))}return r}}});