var base_url,base_cdn;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn"),$(function(){function a(a,e,t){var i,r,n,s,o="Transferencia realizada";s='<div id ="loading" class="data-indicator" style="text-align: center;">',s+='<h3 style="border-bottom: 0px;">Cargando</h3>',s+='<span aria-hidden="true" class="icon-refresh icon-spin" style="font-size: 50px;"></span>',s+="</div>",$("#carga").append(s),$.post(base_url+"/historial/historial",{noTarjeta:a,tipoOperacion:"P2C",mes:e,anio:t},function(a){if(a.rc==-61&&$(location).attr("href",base_url+"/users/error_gral"),0==a.rc)$("#carga").children().remove(),$("#list-detail").children().remove(),$.each(a.listaTransferenciasRealizadas,function(a,e){"0"==e.estatusOperacion?(r="icon-warning-sign",n="feed-warning",i="En proceso"):1==e.estatusOperacion?(r="icon-ok-sign",n="feed-success",i="Procesado"):(r="icon-cancel-sign",n="feed-error",i="Rechazado");var t,s=e.fechaTransferencia.split("/"),c=s[0],d=$(".dashboard-item").attr("moneda");switch(s[1]){case"01":t="Ene";break;case"02":t="Feb";break;case"03":t="Mar";break;case"04":t="Abr";break;case"05":t="May";break;case"06":t="Jun";break;case"07":t="Jul";break;case"08":t="Ago";break;case"09":t="Sep";break;case"10":t="Oct";break;case"11":t="Nov";break;case"12":t="Dic"}var l='<li class="feed-item '+n+'">';l+='<div class="feed-date"> '+c+' <span class="feed-date-month"> '+t+" </span></div>",l+='<div class="feed-status">',l+='<span aria-hidden="true" class="'+r+'" title="'+i+'"></span>',l+="</div>",l+=o+": "+e.beneficiario+'<span class="money-amount"> '+d+" "+e.montoTransferencia+" </span>",l+='<ul class="feed-metadata">',l+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-info-sign"></span>'+e.referencia+"</li>",l+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-bank"></span>'+e.banco+"</li>",l+="</ul>",l+="</li>",$("#list-detail").append(l)});else{$("#carga").children().remove();var e='<div id="empty-state" style="position: static;">';e+="<h2>No se encontraron movimientos</h2>",e+="<p>Vuelva a realizar la búsqueda con un filtro distinto para obtener resultados.</p>",e+='<span aria-hidden="true" class="icon-cancel-sign" style="position: relative;right: -415px;"></span>',e+="</div>",$("#list-detail").append(e)}})}$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")});var a=$("#dashboard-donor");a.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var e=$("#filters-stack .option-set"),t=e.find("a");t.click(function(){var e=$(this);if(e.hasClass("selected"))return!1;var t=e.parents(".option-set");t.find(".selected").removeClass("selected"),e.addClass("selected");var i={},r=t.attr("data-option-key"),n=e.attr("data-option-value");return n="false"!==n&&n,i[r]=n,"layoutMode"===r&&"function"==typeof changeLayoutMode?changeLayoutMode(e,i):a.isotope(i),!1})}),$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item"),$(this).parents("li").addClass("current-stack-item")}),$(".dashboard-item").click(function(){var e,t,i,r,n,s,o,c;e=$(this).find("img").attr("src"),t=$(this).attr("card"),i=$(this).attr("marca").toLowerCase(),r=$(this).attr("mascara"),n=$(this).attr("producto1"),s=$(this).attr("empresa"),c=$(this).attr("nombre"),$("#donor").children().remove(),o='<div class="product-presentation" producto="'+n+'">',o+='<img src="'+e+'" width="200" height="130" alt="" />',o+='<div class="product-network '+i+'"></div>',o+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+t+'" />',o+="</div>",o+='<div class="product-info">',o+='<p class="product-cardholder" id="nombreCtaOrigen">'+c+"</p>",o+='<p class="product-cardnumber" id="mascara">'+r+"</p>",o+='<p class="product-metadata" id="marca">'+n+"</p>",o+='<nav class="product-stack">',o+='<ul class="stack">',o+='<li class="stack-item">',o+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',o+="</li>",o+="</ul>",o+="</nav>",o+="</div>",$("#donor").append(o),$(".product-button").removeClass("disabled-button"),$("#agregarCuenta").attr("href","#"),$("#agregarCuenta").parents("li").removeClass("disabled-group-action-item"),$(this).addClass("current-dashboard-item"),$("#content-product").dialog("close");var d=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val(),anio=$("#filter-year").val(),$("#list-detail").children().remove(),$("#buscar").removeClass("disabled-button"),a(d,mes,anio),$(".stack-item").click(function(){$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#botonContinuar").attr("disabled",!0),$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}})})}),$("#content").on("click","#buscar",function(){var e=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val(),anio=$("#filter-year").val(),$("#list-detail").children().remove(),a(e,mes,anio)}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});