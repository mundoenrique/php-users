var base_url,base_cdn,viewControl="",bloqAction,moneda,pais;base_url=$("body").attr("data-app-url");base_cdn=$("body").attr("data-app-cdn");$(function(){$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")});$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")});$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({dialogClass:"cond-serv",modal:"true",width:"940px",draggable:false,open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}});$(".cond-serv").css("top","50px");$("#ok").click(function(){$("#dialog-tc").dialog("close")})});$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas",modal:"true",width:"940px",open:function(d,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}});$("#cerrar").click(function(){$("#content-product").dialog("close")});var b=$("#dashboard-donor");b.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:true}});var a=$("#filters-stack .option-set"),c=a.find("a");c.click(function(){var h=$(this);if(h.hasClass("selected")){return false}var f=h.parents(".option-set");f.find(".selected").removeClass("selected");h.addClass("selected");var d={},e=f.attr("data-option-key"),g=h.attr("data-option-value");g=g==="false"?false:g;d[e]=g;if(e==="layoutMode"&&typeof changeLayoutMode==="function"){changeLayoutMode(h,d)}else{b.isotope(d)}return false})});$(".dashboard-item").click(function(){var n=$(this).find("img").attr("src"),i=$(this).attr("card"),f=$(this).attr("marca").toLowerCase(),d=$(this).attr("mascara"),o=$(this).attr("producto1"),j=$(this).attr("empresa"),m=$(this).attr("nombre"),a=$(this).attr("moneda"),h=$(this).attr("prefix"),g=$(this).attr("bloqueo"),c=$(this).attr("condition"),b=$(this).attr("fe"),q=true,l,p='<p class="field-tip" style="margin-left: 10px;">Indique la operación que desea realizar</p>',e;pais=$(this).attr("pais");p=(pais=="Ve")?"Haga clic aquí para solicitar su reposición de PIN para acceso a operaciones en comercios y cajeros automáticos":p;var k=(c==0&&pais!="Ve")?'<li id="replace" class="service-item-unselect"><span class="icon-spinner services-item"></span>Solicitud <br>de reposición</span></li>':"";p+='<ul class="product-balance-group services-content">';switch(g){case"N":if(pais=="Ve"){break}bloqAction="Bloquear ";l="lock";p+='<li id="lock" class="service-item-unselect"><span class="icon-'+l+' services-item"></span>Bloquear <br>cuenta</li>';p+='<li id="key" class="service-item-unselect"><span class="icon-key services-item"></span>Cambio <br>de PIN</span></li>';break;case"PB":if(pais=="Ve"){break}bloqAction="Desbloquear ";l="unlock";p+='<li id="lock" class="service-item-unselect"><span class="icon-'+l+' services-item"></span>Desbloquear <br>cuenta</li>';break;default:q=false}if(pais=="Ve"){p+='<li id="recover" class="service-item-unselect"><span class="icon-key services-item"></span>Solicitud <br>de PIN</span></li>'}p+=k;p+="</ul>";if(q==true){$("#donor").children().remove();e='<div class="product-presentation" producto="'+o+'">';e+='<img src="'+n+'" width="200" height="130" alt="" />';e+='<div class="product-network '+f+'"></div>';e+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" prefix="'+h+'" cardOrigen="'+i+'" stat-bloq="'+g+'" fe="'+b+'"/>';e+="</div>";e+='<div class="product-info">';e+='<p class="product-cardholder" id="nombreCtaOrigen">'+m+"</p>";e+='<p class="product-cardnumber">'+d+"</p>";e+='<p class="product-metadata">'+o+"</p>";e+='<nav class="product-stack">';e+='<ul class="stack">';e+='<li class="stack-item">';e+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>';e+="</li>";e+="</ul>";e+="</nav>";e+="</div>";e+='<div class="product-scheme">';e+=p;e+="</div>";$("#donor").append(e)}else{notiSystem("Servicios","No es posible realizar esta acción, la tarjeta se encuentra bloqueada permanentemente","warning").delay(10)}$("#content-product").dialog("close");$(".stack-item").click(function(){viewControl="";$("#lock-acount").hide();$("#change-key").hide();$("#rec-key").hide();$("#tdestino").children().remove();$("#tdestino").append($("#removerDestino").html());$("#continuar").prop("disabled",true);$("#content-product").dialog({title:"Modificación de Cuentas",modal:"true",width:"940px",open:function(r,s){$(".ui-dialog-titlebar-close",s.dialog).hide()}})})});$("#donor").on("click","#lock, #key, #replace, #recover",function(b){var a=b.target.id,d=b.target.parentNode.id,c;c=(a)?a:d;switch(c){case"lock":(viewControl!=c&&viewControl!="")?notiSystem(bloqAction+"cuenta","¿Realmente desea realizar esta acción?","warning","carry",c):viewSelect(c);break;case"key":(viewControl!=c&&viewControl!="")?notiSystem("Cambio de PIN","¿Realmente desea realizar esta acción?","warning","carry",c):viewSelect(c);break;case"replace":(viewControl!=c&&viewControl!="")?notiSystem("Reposición de tarjeta","¿Realmente desea realizar esta acción?","warning","carry",c):viewSelect(c);break;case"recover":(viewControl!=c&&viewControl!="")?notiSystem("Recuperar cuenta","¿Realmente desea realizar esta acción?","warning","carry",c):viewSelect(c);break}});$("#continuar").on("click",function(){var e=$("#continuar").attr("data-action"),b=$("#donor-cardnumber-origen").attr("fe"),k=$("#donor-cardnumber-origen").attr("cardorigen"),h,i=$("#donor-cardnumber-origen").attr("prefix"),a,d,j,c,g,f;if(e!="changePin"){h=$("#donor-cardnumber-origen").attr("stat-bloq");a=$("#bloqueo-cuenta");$("#fecha-exp-bloq").val(b);$("#card-bloq").val(k);$("#status").val(h);$("#prefix-bloq").val(i)}switch(e){case"lockAccoun":$("#lock-type").val("temporary");$("#prevent-bloq").hide();f="LockAccount";break;case"changePin":j=$("#pin-current").val();c=$("#new-pin").val();$("#fecha-exp-cambio").val(b);$("#card-cambio").val(k);$("#pin-current-now").val(j);$("#new-pin-now").val(c);$("#prefix-cambio").val(i);a=$("#cambio-pin");f="changePin";break;case"lockReplace":$("#lock-type").val("final");g=$("#mot-sol").val();$("#mot-sol-now").val(g);f="LockAccount";break;case"recoverKey":$("#rec-clave").hide();$("#fecha-exp-rec").val(b);$("#card-rec").val(k);$("#prefix-rec").val(i);a=$("#recover-key");f="recoverKey";break}validar_campos();a.submit();if(a.valid()==true){d=a.serialize();lock_change(d,f,a,e)}})});