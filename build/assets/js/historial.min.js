var path,base_cdn;path=window.location.href.split("/"),base_cdn=path[0]+"//"+path[2].replace("online","cdn")+"/"+path[3],base_url=path[0]+"//"+path[2]+"/"+path[3],$(function(){function a(a,b,c){var d,f,g,h,e="Transferencia realizada";h='<div id ="loading" class="data-indicator" style="text-align: center;">',h+='<h3 style="border-bottom: 0px;">Cargando</h3>',h+='<span aria-hidden="true" class="icon-refresh icon-spin" style="font-size: 50px;"></span>',h+="</div>",$("#carga").append(h),$.post(base_url+"/historial/historial",{noTarjeta:a,tipoOperacion:"P2P",mes:b,anio:c},function(a){if(-61==a.rc&&$(location).attr("href",base_url+"/users/error_gral"),0==a.rc)$("#carga").children().remove(),$("#list-detail").children().remove(),$.each(a.listaTransferenciasRealizadas,function(a,b){"0"==b.estatusOperacion?(f="icon-ok-sign",g="feed-success",d="Procesado"):(f="icon-cancel-sign",g="feed-error",d="Rechazado");var i,c=b.fechaTransferencia.split("/"),h=c[0],j=$(".dashboard-item").attr("moneda");switch(c[1]){case"01":i="Ene";break;case"02":i="Feb";break;case"03":i="Mar";break;case"04":i="Abr";break;case"05":i="May";break;case"06":i="Jun";break;case"07":i="Jul";break;case"08":i="Ago";break;case"09":i="Sep";break;case"10":i="Oct";break;case"11":i="Nov";break;case"12":i="Dic"}var k='<li class="feed-item '+g+'">';k+='<div class="feed-date">'+h+'<span class="feed-date-month">'+i+"</span></div>",k+='<div class="feed-status">',k+='<span aria-hidden="true" class="'+f+'" title="'+d+'"></span>',k+="</div>",k+=e+": "+b.beneficiario+'<span class="money-amount"> '+j+" "+b.montoTransferencia+" </span>",k+='<ul class="feed-metadata">',k+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-info-sign"></span>'+b.referencia+"</li>",k+="</ul>",k+="</li>",$("#list-detail").append(k)});else{$("#carga").children().remove();var b='<div id="empty-state" style="position: static;">';b+="<h2>No se encontraron movimientos</h2>",b+="<p>Vuelva a realizar la b\xfasqueda con un filtro distinto para obtener resultados.</p>",b+='<span aria-hidden="true" class="icon-cancel-sign" style="position: relative;right: -415px;"></span>',b+="</div>",$("#list-detail").append(b)}})}$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selecci\xf3n de Cuentas Origen",modal:"true",width:"940px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")});var a=$("#dashboard-donor");a.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var b=$("#filters-stack .option-set"),c=b.find("a");c.click(function(){var b=$(this);if(b.hasClass("selected"))return!1;var c=b.parents(".option-set");c.find(".selected").removeClass("selected"),b.addClass("selected");var d={},e=c.attr("data-option-key"),f=b.attr("data-option-value");return f="false"===f?!1:f,d[e]=f,"layoutMode"===e&&"function"==typeof changeLayoutMode?changeLayoutMode(b,d):a.isotope(d),!1})}),$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item"),$(this).parents("li").addClass("current-stack-item")}),$(".dashboard-item").click(function(){var b,c,d,e,f,g,h,i;b=$(this).find("img").attr("src"),c=$(this).attr("card"),d=$(this).attr("marca").toLowerCase(),e=$(this).attr("mascara"),f=$(this).attr("producto1"),g=$(this).attr("empresa"),i=$(this).attr("nombre"),$("#donor").children().remove(),h='<div class="product-presentation" producto="'+f+'">',h+='<img src="'+b+'" width="200" height="130" alt="" />',h+='<div class="product-network '+d+'"></div>',h+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+c+'" />',h+="</div>",h+='<div class="product-info-full">',h+='<p class="product-cardholder" id="nombreCtaOrigen">'+i+"</p>",h+='<p class="product-cardnumber" id="mascara">'+e+"</p>",h+='<p class="product-metadata" id="marca">'+f+"</p>",h+='<nav class="product-stack">',h+='<ul class="stack">',h+='<li class="stack-item">',h+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',h+="</li>",h+="</ul>",h+="</nav>",h+="</div>",$("#donor").append(h),$(".product-button").removeClass("disabled-button"),$("#agregarCuenta").attr("href","#"),$("#agregarCuenta").parents("li").removeClass("disabled-group-action-item"),$(this).addClass("current-dashboard-item"),$("#content-product").dialog("close");var j=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val(),anio=$("#filter-year").val(),$("#buscar").removeClass("disabled-button"),$("#list-detail").children().remove(),a(j,mes,anio),$(".stack-item").click(function(){$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#botonContinuar").attr("disabled",!0),$("#content-product").dialog({title:"Selecci\xf3n de Cuentas Origen",modal:"true",width:"940px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}})})}),$("#content").on("click","#buscar",function(){var b=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val(),anio=$("#filter-year").val(),$("#list-detail").children().remove(),a(b,mes,anio)}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});