function mostrarProcesando(o){var a="";switch(o){case"pichincha":a="loading-pichincha.gif";break;case"latodo":a="loading-latodo.gif"}$("#login").attr("disabled","true"),""==a?$("#login").html('<div id="loading" class="icono-load" style="display:flex; width:20px; margin:0 auto;"><span aria-hidden="true" class="icon-refresh icon-spin" style="font-size: 20px"></span></div>'):$("#login").html('<img src="'+base_cdn+"img/"+a+'">'),"pichincha"==o&&($("#login").css({position:"relative",height:"35px",width:"100%",opacity:"1"}),$("#login").children(0).css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"25px"}))}function ocultarProcesando(){$("#login").html("Ingresar"),$("#login").prop("disabled",!1)}function habilitar(){$("#username").removeAttr("disabled"),$("#userpwd").removeAttr("disabled")}function validateCaptcha(o,a,i){cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),dataRequest=JSON.stringify({token:o,user:a}),dataRequest=CryptoJS.AES.encrypt(dataRequest,cpo_cook,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/users/validateRecaptcha",{request:dataRequest,cpo_name:cpo_cook,plot:btoa(cpo_cook)}).done(function(o){data=JSON.parse(CryptoJS.AES.decrypt(o.code,o.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),1==data.success&&parseFloat(data.score)>=parseFloat("0")?login(a,i):(ocultarProcesando(),$("#dialog-validate").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#error-validate").click(function(){$("#dialog-validate").dialog("close"),habilitar()}))})}function login(o,a){cpo_cook=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),dataRequest=JSON.stringify({user_name:o,user_pass:hex_md5(a)}),dataRequest=CryptoJS.AES.encrypt(dataRequest,cpo_cook,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/users/login",{request:dataRequest,cpo_name:cpo_cook,plot:btoa(cpo_cook)}).done(function(o){data=JSON.parse(CryptoJS.AES.decrypt(o.code,o.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),1==data?$("#dialog-login-ve").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}):0==data.rc?1==data.passwordTemp?$(location).attr("href",base_url+"/users/cambiarPassword?t=t"):1==data.passwordVencido?$(location).attr("href",base_url+"/users/cambiarPassword?t=v"):$(location).attr("href",base_url+"/dashboard"):-1==data.rc?(ocultarProcesando(),$("#dialog-login").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-login").dialog("close"),habilitar()})):-5==data.rc?(ocultarProcesando(),$("#sesion-activa").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#activa").click(function(){$("#sesion-activa").dialog("close"),$(location).attr("href",base_url+"/users/closeSess"),habilitar()})):-194==data.rc?(ocultarProcesando(),$("#dialog-overlay").dialog({title:"Password Caducado",modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#caducado").click(function(){$("#dialog-overlay").dialog("close"),habilitar()})):-205==data.rc?(ocultarProcesando(),$("#dialog-voygo-error").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#error-voygo").click(function(){$("#dialog-voygo-error").dialog("close")})):-35==data.rc||-8==data.rc?(ocultarProcesando(),$("#dialog-bloq").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#aceptar").click(function(){$("#dialog-bloq").dialog("close"),habilitar()})):(ocultarProcesando(),$("#dialog-error").dialog({title:"Conexión Personas",modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#error").click(function(){$("#dialog-error").dialog("close"),habilitar()}))})}var cpo_cook,dataRequest,base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn"),skin=$("body").attr("data-app-skin");$(function(){var o,a,i=navigator.cookieEnabled;i||($("#form-login input, #form-login button").attr("disabled",!0),$("<div><h5>La funcionalidad de cookies de su navegador se encuentra desactivada.</h5><h4>Por favor vuelva activarla.</h4></div>").dialog({title:"Conexion personas Online",modal:!0,maxWidth:700,maxHeight:300,resizable:!1,close:function(){$(this).dialog("destroy")},buttons:{Aceptar:function(){$(this).dialog("destroy"),location.reload()}}})),$("#login").click(function(){return $("#username").removeAttr("class"),$("#userpwd").removeAttr("class"),$("#username").val($("#username").val().replace(/[ ]/g,"")),o=$("#username").val(),o=o.toUpperCase(),a=$("#userpwd").val(),""==o||""==a?(""==o&&$("#username").addClass("field-error"),void(""==a&&$("#userpwd").addClass("field-error"))):($("#form-login input, #form-login button").attr("disabled",!0),/^[\wñ]+$/i.test(o)&&/^[\w!@\*\-\?¡¿+\/.,#]+$/i.test(a)?(mostrarProcesando(skin),void grecaptcha.ready(function(){grecaptcha.execute("6LdRI6QUAAAAAEp5lA831CK33fEazexMFq8ggA4-",{action:"login"}).then(function(i){validateCaptcha(i,o,a)},function(o){o||(ocultarProcesando(),habilitar(),$("#dialog-error").dialog({title:"Conexión Personas",modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#error").click(function(){$("#dialog-error").dialog("close")}))})})):(ocultarProcesando(),$("#dialog-login").dialog({modal:"true",width:"440px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),void $("#invalido").click(function(){$("#dialog-login").dialog("close"),habilitar()})))}),$("#slideshow").click(function(){$("#content-product").dialog({modal:!0,buttons:{Ok:function(){$(this).dialog("close")}},open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}})}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(o,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});