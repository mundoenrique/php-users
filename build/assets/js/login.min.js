var base_url,base_cdn,skin;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn"),skin=$("body").attr("data-app-skin"),$(function(){function a(a){var o="";switch(a){case"pichincha":o="loading-pichincha.gif";break;case"latodo":o="loading-latodo.gif"}$("#login").attr("disabled","true"),""==o?$("#login").html('<div id="loading" class="icono-load" style="display:flex; width:20px; margin:0 auto;"><span aria-hidden="true" class="icon-refresh icon-spin" style="font-size: 20px"></span></div>'):$("#login").html('<img src="'+base_cdn+"img/"+o+'">'),"pichincha"==a&&($("#login").css({position:"relative",height:"35px",width:"100%",opacity:"1"}),$("#login").children(0).css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"25px"}))}function o(){$("#login").html("Ingresar"),$("#login").prop("disabled",!1)}function i(i,t){var l=navigator.cookieEnabled;if(!/^[\wñ]+$/i.test(i)||!/^[\w!@\*\-\?¡¿+\/.,#]+$/i.test(t))return o(),$("#dialog-login").dialog({modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),void $("#invalido").click(function(){$("#dialog-login").dialog("close"),e()});if(""!=i&&""!=t&&l){$("#username").attr("disabled","true"),$("#userpwd").attr("disabled","true"),$(".ju-sliderbutton-text").html("Verificando..."),$(".ju-sliderbutton .ju-sliderbutton-slider .ui-slider-handle").hide(),a(skin);var r=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),d=JSON.stringify({user_name:i,user_pass:hex_md5(t)});d=CryptoJS.AES.encrypt(d,r,{format:CryptoJSAesJson}).toString(),$consulta=$.post(base_url+"/users/login",{request:d,cpo_name:r,plot:btoa(r)}),$consulta.done(function(a){data=JSON.parse(CryptoJS.AES.decrypt(a.code,a.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),1==data?$("#dialog-login-ve").dialog({modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}):0==data.rc?1==data.passwordTemp?$(location).attr("href",base_url+"/users/cambiarPassword?t=t"):1==data.passwordVencido?$(location).attr("href",base_url+"/users/cambiarPassword?t=v"):$(location).attr("href",base_url+"/dashboard"):-1==data.rc?(o(),$("#dialog-login").dialog({modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-login").dialog("close"),e()})):-194==data.rc?(o(),$("#dialog-overlay").dialog({title:"Password Caducado",modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#caducado").click(function(){$("#dialog-overlay").dialog("close"),e()})):-205==data.rc?(o(),$("#dialog-voygo-error").dialog({modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#error-voygo").click(function(){$("#dialog-voygo-error").dialog("close")})):-35==data.rc||-8==data.rc?(o(),$("#dialog-bloq").dialog({modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#aceptar").click(function(){$("#dialog-bloq").dialog("close"),e()})):(o(),$("#dialog-error").dialog({title:"Error en el sistema",modal:"true",width:"440px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#error").click(function(){$("#dialog-error").dialog("close"),e()}))})}else l?""!=i&&""!=t||(""==i&&$("#username").addClass("field-error"),""==t&&$("#userpwd").addClass("field-error")):$("<div><h5>La funcionalidad de cookies de su navegador se encuentra desactivada.</h5><h4>Por favor vuelva activarla.</h4></div>").dialog({title:"Conexion personas Online",modal:!0,maxWidth:700,maxHeight:300,resizable:!1,close:function(){$(this).dialog("destroy")},buttons:{Aceptar:function(){$(this).dialog("destroy")}}})}function e(){$("#username").removeAttr("disabled"),$("#userpwd").removeAttr("disabled"),$(".ju-sliderbutton-text").html("Desliza para ingresar"),$(".ju-sliderbutton .ju-sliderbutton-slider .ui-slider-handle").show()}var t,l;$("#slideUnlock").sliderbutton({text:"Desliza para ingresar",activate:function(){$("#username").removeAttr("class"),$("#userpwd").removeAttr("class"),$("#username").val($("#username").val().replace(/[ ]/g,"")),t=$("#username").val(),t=t.toUpperCase(),l=$("#userpwd").val(),$("#userpwd").val(""),i(t,l)}}),$(".ui-slider-handle.ui-state-default.ui-corner-all").append('<a class="unlock-knob" title="Desliza para ingresar"><span aria-hidden="true" class="icon-arrow-right"></span></a>'),$("#login").click(function(){$("#username").removeAttr("class"),$("#userpwd").removeAttr("class"),$("#username").val($("#username").val().replace(/[ ]/g,"")),t=$("#username").val(),t=t.toUpperCase(),l=$("#userpwd").val(),$("#userpwd").val(""),i(t,l)}),$("#slideshow").click(function(){$("#content-product").dialog({modal:!0,buttons:{Ok:function(){$(this).dialog("close")}},open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}})}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(a,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});