function msgService(a,e,t,r){$("#registrar").fadeIn(),$("#dialogo-movil").dialog({title:a,modal:"true",resizable:!1,closeOnEscape:!1,width:"440px",open:function(a,r){$(".ui-dialog-titlebar-close",r.dialog).hide(),$("#modalType").addClass(t),$("#msgService").html(e)}}),$("#inva5").click(function(){$("#dialogo-movil").dialog("close"),1==r&&$(location).attr("href",base_url+"/transferencia/HistorialPe")})}var base_url,base_cdn;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn"),$(function(){function a(a,e,t){var r,i,s,n,o="Transferencia realizada",c="";n='<div id ="loading" class="data-indicator" style="text-align: center;">',n+='<h3 style="border-bottom: 0px;">Cargando</h3>',n+='<span aria-hidden="true" class="icon-refresh icon-spin" style="font-size: 50px;"></span>',n+="</div>",$("#carga").append(n);var d={noTarjeta:a,mes:e,anio:t},l=$.param(d),u=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),p=JSON.stringify({data:l,model:"historial_loadPe"});p=CryptoJS.AES.encrypt(p,u,{format:CryptoJSAesJson}).toString(),$.ajax({url:base_url+"/transferencia/peGeneral",type:"post",data:{request:p,cpo_name:u,plot:btoa(u)},datatype:"JSON",success:function(a){switch(data=JSON.parse(CryptoJS.AES.decrypt(a.code,a.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),data.code){case 0:$("#carga").children().remove(),$("#list-detail").children().remove(),$.each(data.listaTransferenciasRealizadas,function(a,e){"1"===e.estatusOperacion?(i="icon-ok-sign",s="feed-success",r="Procesado",o="Transferencia realizada"):(i="icon-cancel-sign",s="feed-error",r="Rechazado",o="Transferencia rechazada"),c="1"===e.autorizado?'<div class="verified">Autorizada</div>':"";var t,n=e.fechaTransferencia.split(" "),d=n[0].split("-"),l=d[2],u=$(".dashboard-item").attr("moneda");switch(d[1]){case"01":t="Ene";break;case"02":t="Feb";break;case"03":t="Mar";break;case"04":t="Abr";break;case"05":t="May";break;case"06":t="Jun";break;case"07":t="Jul";break;case"08":t="Ago";break;case"09":t="Sep";break;case"10":t="Oct";break;case"11":t="Nov";break;case"12":t="Dic"}var p='<li class="feed-item '+s+'">';p+='<div class="feed-date">'+l+'<span class="feed-date-month">'+t+"</span></div>",p+='<div class="feed-status">',p+='<span aria-hidden="true" class="'+i+'" title="'+r+'"></span>',p+="</div>",p+=o+": "+e.beneficiario+'<span class="money-amount">'+c+'<div class="amount-history">'+u+" "+e.montoTransferencia+"</div> </span>",p+='<ul class="feed-metadata">',p+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-phone"></span>'+e.telefonoDestino+"</li>",p+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-card"></span>'+e.tarjetaDestinoMascara+"</li>",p+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-mail"></span>   '+e.concepto+"</li>",p+="</ul>",p+="</li>",$("#list-detail").append(p)});break;case 1:$(location).attr("href",base_url+"/users/error_gral");break;case 2:$("#carga").children().remove();var e='<div id="empty-state" style="position: static;">';e+="<h2>No se encontraron movimientos</h2>",e+="<p>Vuelva a realizar la búsqueda con un filtro distinto para obtener resultados.</p>",e+='<span aria-hidden="true" class="icon-cancel-sign" style="position: relative;right: -415px;"></span>',e+="</div>",$("#list-detail").append(e);break;default:msgService(data.title,data.msg,data.modalType,1)}}})}$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")});var a=$("#dashboard-donor");a.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var e=$("#filters-stack .option-set"),t=e.find("a");t.click(function(){var e=$(this);if(e.hasClass("selected"))return!1;var t=e.parents(".option-set");t.find(".selected").removeClass("selected"),e.addClass("selected");var r={},i=t.attr("data-option-key"),s=e.attr("data-option-value");return s="false"!==s&&s,r[i]=s,"layoutMode"===i&&"function"==typeof changeLayoutMode?changeLayoutMode(e,r):a.isotope(r),!1})}),$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item"),$(this).parents("li").addClass("current-stack-item")}),$(".dashboard-item").click(function(){var e,t,r,i,s,n,o;e=$(this).find("img").attr("src"),t=$(this).attr("card"),r=$(this).attr("marca").toLowerCase(),i=$(this).attr("mascara"),s=$(this).attr("producto1"),$(this).attr("empresa"),o=$(this).attr("nombre"),$("#donor").children().remove(),n='<div class="product-presentation" producto="'+s+'">',n+='<img src="'+e+'" width="200" height="130" alt="" />',n+='<div class="product-network '+r+'"></div>',n+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+t+'"/>',n+="</div>",n+='<div class="product-info">',n+='<p class="product-cardholder" id="nombreCtaOrigen">'+o+"</p>",n+='<p class="product-cardnumber" id="mascara">'+i+"</p>",n+='<p class="product-metadata" id="marca">'+s+"</p>",n+='<nav class="product-stack">',n+='<ul class="stack">',n+='<li class="stack-item">',n+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',n+="</li>",n+="</ul>",n+="</nav>",n+="</div>",$("#donor").append(n),$(".product-button").removeClass("disabled-button"),$("#agregarCuenta").attr("href","#"),$("#agregarCuenta").parents("li").removeClass("disabled-group-action-item"),$.each($(".dashboard-item"),function(a,e){$(this).hasClass("current-dashboard-item")&&$(this).removeClass("current-dashboard-item")}),$(this).addClass("current-dashboard-item"),$("#content-product").dialog("close");var c=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val(),anio=$("#filter-year").val(),$("#buscar").removeClass("disabled-button"),$("#list-detail").children().remove(),a(c,mes,anio),$(".stack-item").click(function(){$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#botonContinuar").attr("disabled",!0),$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}})})}),$("#content").on("click","#buscar",function(){var e=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val(),anio=$("#filter-year").val(),$("#list-detail").children().remove(),a(e,mes,anio)})});