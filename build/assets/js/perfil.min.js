function systemDialog(e,o,a){$("#completar-afiliacion").dialog({title:e,modal:"true",width:"440px",open:function(e,a){$(".ui-dialog-titlebar-close",a.dialog).hide(),$("#msgAfil").html(o)}}),$("#acept").click(function(){switch($("#actualizar").fadeIn(),$("#completar-afiliacion").dialog("close"),a){case"dash":$(location).attr("href",base_url+"/dashboard");break;case"tyc":$("#tyc").focus()}})}function tycModal(){$("#dialog-tc").dialog({dialogClass:"cond-serv",modal:"true",width:"940px",draggable:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("html, body").animate({scrollTop:$("body").offset().top},0),$(".cond-serv").css("top","50px"),$("#ok").click(function(){$("#dialog-tc").dialog("close")})}var base_url,base_cdn,skin,fecha=new Date,controlValid=0;base_url=$("body").attr("data-app-url"),base_cdn=$("body").attr("data-app-cdn"),skin=$("body").attr("data-app-skin");var aplicaperfil=$("#content").attr("aplicaperfil"),afiliado=$("#content").attr("afiliado"),tyc=$("#content").attr("tyc"),country=$("#content").attr("country");$(function(){function e(){"N"==$("#content").attr("aplicaperfil")||"Pe"!=$("#pais-residencia-value").val()?($("#contract").remove(),$(".dig-verificador").remove(),$(".remove-perfil-plata-sueldo").remove(),$(".row-fecha-nacimiento").css({width:"31%",float:"left"}),$(".col-profile-fecha-nac .nac-input").css("width","17%"),$(".row-profesion").css({width:"100%",float:"left"}),$(".row-profesion select").css("width","27%"),$(".row-modifica").removeClass("row-profile"),$(".row-modifica").addClass("col-divide-profile"),$(".row-modifica >li").removeClass("col-md-3-profile"),$(".row-modifica").css("float","left"),$(".expand-row").css("width","31%")):"S"!=$("#content").attr("aplicaperfil")&&"Pe"!=$("#pais-residencia-value").val()||$(".row-profesion").remove()}function o(){0==D.val()?$("#cargo-publico-no").attr("checked","checked"):1==D.val()&&$("#cargo-publico-si").attr("checked","checked")}function a(){0==O.val()?$("#sujeto-obligado-no").attr("checked","checked"):1==O.val()&&$("#sujeto-obligado-si").attr("checked","checked")}function i(){for(var e=$("#antiguedad").val(),o=0;o<51;o++)$("#antiguedad_laboral").append("<option value="+o+">"+o+"</option>"),e==o&&$('#antiguedad_laboral > option[value="'+e+'"]').attr("selected","selected")}function t(){var e=$("#situacion-laboral-value").val();$('#situacion_laboral > option[value="'+e+'"]').attr("selected","selected")}function r(){var e=$("#otro_telefono_tipo_value").val();$('#otro_telefono_tipo > option[value="'+e+'"]').attr("selected","selected")}function n(){var e=$("#acTipo").val();$('#tipo_direccion > option[value="'+e+'"]').prop("selected","selected")}function c(){var e=$("#edo-civil-value").val();$('#edocivil > option[value="'+e+'"]').attr("selected","selected")}function l(){var e=$("#fecha-nacimiento-valor").val(),o=e.substring(0,2),a=e.substring(3,5),i=e.substring(6,10);$("#dia-nacimiento").val(o),"pichincha"!=skin?$('#mes-nacimiento > option[value="'+a+'"]').attr("selected","selected"):(meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiempre","Octubre","Noviembre","Diciembre"],a-=1,$("#mes-nacimiento-bp").val(meses[a])),$("#anio-nacimiento").val(i)}function s(){var e=$("#dia-nacimiento").val(),o=$("#mes-nacimiento option:selected").val(),a=$("#anio-nacimiento").val();return""!=e&&""!=o&&""!=a?a<anioMayorEdad?($("#fecha-nacimiento-valor").val(e+"/"+o+"/"+a),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):a==anioMayorEdad&&(o<mesActual?($("#fecha-nacimiento-valor").val(e+"/"+o+"/"+a),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):o==mesActual&&(e<=diaActual&&($("#fecha-nacimiento-valor").val(e+"/"+o+"/"+a),$("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0))):""!=e||""!=o||""!=a?($("#dia").removeClass("field-error").addClass("field-success"),$("#mes").removeClass("field-error").addClass("field-success"),$("#ano").removeClass("field-error").addClass("field-success"),!0):void 0}function d(){return dia=$("#dia-nacimiento").val(),mes=$("#mes-nacimiento option:selected").val(),31==dia&&2==mes||30==dia&&2==mes||31==dia&&4==mes||31==dia&&6==mes||31==dia&&9==mes||31==dia&&11==mes?($("#dia-nacimiento").removeClass("field-success").addClass("field-error"),$("#mes-nacimiento").removeClass("field-success").addClass("field-error"),!1):($("#dia-nacimiento").removeClass("field-error").addClass("field-success"),$("#mes-nacimiento").removeClass("field-error").addClass("field-success"),!0)}function p(){return primer_nombre=$("#primer-nombre").val(),primer_nombre.match(/[^a-z ñáéíóú \s]/gi)?($("#primer-nombre").removeClass("field-success").addClass("field-error"),!1):($("#primer-nombre").removeClass("field-error").addClass("field-success"),!0)}function u(){return segundo_nombre=$("#segundo-nombre").val(),segundo_nombre.match(/[^a-z ñáéíóú \s]/gi)?($("#segundo-nombre").removeClass("field-success").addClass("field-error"),!1):($("#segundo-nombre").removeClass("field-error").addClass("field-success"),!0)}function m(){return primer_apellido=$("#primer-apellido").val(),primer_apellido.match(/[^a-z ñáéíóú \s]/gi)?($("#primer-apellido").removeClass("field-success").addClass("field-error"),!1):($("#primer-apellido").removeClass("field-error").addClass("field-success"),!0)}function f(){return segundo_apellido=$("#segundo-apellido").val(),segundo_apellido.match(/[^a-z ñáéíóú \s]/gi)?($("#segundo-apellido").removeClass("field-success").addClass("field-error"),!1):($("#segundo-apellido").removeClass("field-error").addClass("field-success"),!0)}function v(){return cargo=$("#cargo").val(),cargo.match(/[^a-z ñáéíóú \s]/gi)?($("#cargo").removeClass("field-success").addClass("field-error"),!1):($("#cargo").removeClass("field-error").addClass("field-success"),!0)}function b(){return lugarnac=$("#lugar-nacimiento").val(),lugarnac.match(/[^a-z ñáéíóú \s]/gi)?($("#lugar-nacimiento").removeClass("field-success").addClass("field-error"),!1):($("#lugar-nacimiento").removeClass("field-error").addClass("field-success"),!0)}function g(){return centro_laboral=$("#centro_laboral").val(),centro_laboral.match(/[^a-z ñáéíóú \s]/gi)?($("#centro_laboral").removeClass("field-success").addClass("field-error"),!1):($("#centro_laboral").removeClass("field-error").addClass("field-success"),!0)}function _(){controlValid=1,w(),R.submit(),1==R.valid()&&($("#actualizar").css("display","none"),$("#load_reg").show(),P())}function y(){switch(j){case"Co":$("#pais-de-residencia").val("Colombia"),$("#state").text("Departamento"),$("#city").text("Municipio");break;case"Pe":case"Usd":$("#pais-de-residencia").val("Perú"),$("#state").text("Departamento"),$("#city").text("Provincia");break;case"Ve":$("#pais-de-residencia").val("Venezuela"),$("#state").text("Estado"),$("#city").text("Ciudad");break;case"Ec":$("#pais-de-residencia").val("Ecuador"),$("#state").text("Departamento"),$("#city").text("Municipio")}}function h(){$("#cargo-publico-no").is(":checked")&&($(".cargo_publico").removeAttr("id name").attr("disabled","disabled").val(""),$(".institucion_publica").removeAttr("id name").attr("disabled","disabled").val(""))}function C(){""==$("#otro_telefono_tipo").val()?$("#otro_telefono_num").attr("disabled","disabled").val(""):""!=$("#otro_telefono_tipo").val()&&$("#otro_telefono_num").removeAttr("disabled","disabled")}function S(){var e=$("#aplicaPerfil").val();if("S"==e){var o=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),a=JSON.stringify({pais:j,subRegion:1});a=CryptoJS.AES.encrypt(a,o,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listadoDepartamento",{request:a,cpo_name:o,plot:btoa(o)},function(e){if(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#departamento").empty().append("<option value=''>Cargando...</option>"),0==data.rc){$("#departamento").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#departamento").append(a)});var o=$("#departamento_data").val();$('#departamento > option[value="'+o+'"]').attr("selected","selected"),E(o,j)}else $("#dialog-cargar-regiones").show(800),$("#invalido3").click(function(){$("#dialog-cargar-regiones").hide("slow")})})}else if("N"==e&&"pichincha"!=skin){o=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),a=JSON.stringify({codPais:j,subRegion:1});a=CryptoJS.AES.encrypt(a,o,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listaEstado",{request:a,cpo_name:o,plot:btoa(o)},function(e){if(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#departamento").empty().append("<option value=''>Cargando...</option>"),0==data.rc){$("#departamento").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaEstados,function(e,o){var a;a="<option value="+o.codEstado+"> "+o.estados+" </option>",$("#departamento").append(a)});var o=$("#departamento_data").val();$('#departamento > option[value="'+o+'"]').attr("selected","selected"),E(o,j)}else $("#dialog-cargar-regiones").show(800),$("#invalido3").click(function(){$("#dialog-cargar-regiones").hide("slow")})})}}function E(e,o){var a=$("#aplicaPerfil").val();if("S"==a){var i=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),t=JSON.stringify({pais:o,subRegion:e});t=CryptoJS.AES.encrypt(t,i,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listadoDepartamento",{request:t,cpo_name:i,plot:btoa(i)},function(e){if(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc){$("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#provincia").append(a)});var a=$("#provincia_data").val();$('#provincia > option[value="'+a+'"]').attr("selected","selected"),k(a,o)}})}else if("N"==a){i=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),t=JSON.stringify({codPais:o,codEstado:e});t=CryptoJS.AES.encrypt(t,i,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listaCiudad",{request:t,cpo_name:i,plot:btoa(i)},function(e){if(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc){$("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaCiudad,function(e,o){var a;a="<option value="+o.codCiudad+"> "+o.ciudad+" </option>",$("#provincia").append(a)});var o=$("#provincia_data").val();$('#provincia > option[value="'+o+'"]').attr("selected","selected")}})}}function k(e,o){var a=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),i=JSON.stringify({pais:o,subRegion:e});i=CryptoJS.AES.encrypt(i,a,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listadoDepartamento",{request:i,cpo_name:a,plot:btoa(a)},function(e){if(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc){$("#distrito").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#distrito").append(a)});var o=$("#distrito_data").val();$('#distrito > option[value="'+o+'"]').attr("selected","selected")}else $("#distrito").empty().append("<option value=''>-</option>")})}function J(e,o){var a=$("#aplicaPerfil").val();if("S"==a){var i=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),t=JSON.stringify({pais:o,subRegion:e});t=CryptoJS.AES.encrypt(t,i,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listadoDepartamento",{request:t,cpo_name:i,plot:btoa(i)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc&&($("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#provincia").append(a)}))}),$("#provincia").change(function(){$("#distrito").empty().append("<option value=''>Cargando...</option>"),""!=this.value?A(this.value,o):$("#distrito").empty().append("<option value=''>-</option>")})}else if("N"==a){i=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),t=JSON.stringify({codPais:o,codEstado:e});t=CryptoJS.AES.encrypt(t,i,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listaCiudad",{request:t,cpo_name:i,plot:btoa(i)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc&&($("#provincia").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaCiudad,function(e,o){var a;a="<option value="+o.codCiudad+"> "+o.ciudad+" </option>",$("#provincia").append(a)}))})}}function A(e,o){var a=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),i=JSON.stringify({pais:o,subRegion:e});i=CryptoJS.AES.encrypt(i,a,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/listadoDepartamento",{request:i,cpo_name:a,plot:btoa(a)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),0==data.rc?($("#distrito").empty().append("<option value=''>Seleccione</option>"),$.each(data.listaSubRegiones,function(e,o){var a;a="<option value="+o.codregion+"> "+o.region+" </option>",$("#distrito").append(a)})):$("#distrito").empty().append("<option value=''>-</option>")})}function q(){profesion=$("#content").attr("profesion"),tipo_profesion=$("#content").attr("tipo_profesion"),""!=profesion&&""!=tipo_profesion?lista_p='<option selected value="'+tipo_profesion+'">'+profesion+"</option>":""!=profesion&&""!=tipo_profesion||(lista_p='<option selected value="">Seleccione</option>');var e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$.post(base_url+"/perfil/profesiones",{cpo_name:e,plot:btoa(e)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$.each(data.listaProfesiones,function(e,o){o.idProfesion!=tipo_profesion&&o.tipoProfesion!=profesion&&(lista_p+='<option value="'+o.idProfesion+'"> '+o.tipoProfesion+" </option>")}),$("#listaProfesion").append(lista_p)})}function N(){genero=$("#content").attr("sexo"),inf_cel=$("#notificacions-sms").attr("value"),inf_mail=$("#notificacions-email").attr("value"),aProteccion=$("#proteccion").attr("value"),aContrato=$("#contrato").attr("value"),"M"==genero&&$("#gender_m").attr("checked",!0),"F"==genero&&$("#gender_f").attr("checked",!0),1==inf_mail&&$("#notificacions-email").attr("checked",!0),1==inf_cel&&$("#notificacions-sms").attr("checked",!0),1==aProteccion&&($("#proteccion").attr("checked",!0),$("body").off("click","#proteccion")),1==aContrato&&($("#contrato").attr("checked",!0),$("body").off("click","#contrato"))}function P(){var e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),o="";$("input[type='radio'][name='gender']").each(function(){$(this).is(":checked")&&(o=$(this).val())});var a="";$("input[type='radio'][name='cargo_public']").each(function(){$(this).is(":checked")&&(a=$(this).val())});var i="";$("input[type='radio'][name='sujeto-obligado']").each(function(){$(this).is(":checked")&&(i=$(this).val())}),"Ec-bp"==country||""==otro_telefono_num?(otro_telefono_tipo="",otro_telefono_num=""):(otro_telefono_tipo=$("#otro_telefono_tipo").val(),otro_telefono_num=$("#otro_telefono_num").val()),$("#notificacions-sms").is(":checked")?($("#notificacions-sms").val("1"),notSms="1"):(notSms=$("#notificacions-sms").val("0"),notSms="0"),$("#notificacions-email").is(":checked")?($("#notificacions-email").val("1"),notEmail="1"):(notEmail=$("#notificacions-email").val("0"),notEmail="0"),$("#proteccion").is(":checked")?($("#proteccion").val("1"),proteccion="1"):($("#proteccion").val("0"),proteccion="0"),$("#contrato").is(":checked")?($("#contrato").val("1"),contrato="1"):($("#contrato").val("0"),contrato="0");var t=$("#telefono_hab").val(),r=$("#telefono").val(),n=$("#email").val();"Ec-bp"==country&&(t=$("#hab_cypher").val(),r=$("#cel_cypher").val(),n=$("#email_cypher").val());var c=$("#ingreso_promedio").val().replace(/,/g,"");c=parseFloat(c);var l=JSON.stringify({userName:$("#content").attr("userName"),tipo_identificacion:$("#tipo_identificacion").val(),verifyDigit:$("#dig-ver").val(),primerNombre:$("#primer-nombre").val(),segundoNombre:$("#segundo-nombre").val(),primerApellido:$("#primer-apellido").val(),segundoApellido:$("#segundo-apellido").val(),lugarNacimiento:$("#lugar-nacimiento").val(),fechaNacimiento:$("#fecha-nacimiento-valor").val(),sexo:o,edocivil:$("#edo-civil-value").val(),nacionalidad:$("#nacionalidad-valor").val(),profesion:$("#listaProfesion").val(),tipo_profesion:$("#tipo_profesion_value").val(),tipo_direccion:$("#tipo_direccion_value").val(),codigoPostal:$("#codepostal").val(),paisResidencia:$("#pais-residencia-value").val(),departamento_residencia:$("#departamento").val(),provincia_residencia:$("#provincia").val(),distrito_residencia:$("#distrito").val(),direccion:$("#direccion").val(),telefono_hab:t,telefono:r,otro_telefono_tipo:otro_telefono_tipo,otro_telefono_num:otro_telefono_num,email:n,ruc_cto_labora:$("#ruc_cto_labora").val(),centro_laboral:$("#centro_laboral").val(),situacion_laboral:$("#situacion_laboral").val(),antiguedad_laboral_value:$("#antiguedad_laboral").val(),profesion_labora:$(".profesion-labora").val(),cargo:$("#cargo").val(),ingreso_promedio:c,cargo_publico_sino:a,cargo_publico:$("#cargo_publico").val(),institucion_publica:$("#institucion_publica").val(),sujeto_obligado:i,dtfechorcrea_usu:$("#dtfechorcrea_usu").val(),id_ext_per:$("#id_ext_per").val(),tipo_id_ext_per:$("#tipo_id_ext_per").val(),aplicaPerfil:$("#aplicaPerfil").val(),notarjeta:$("#notarjeta").val(),acCodCiudad:$("#provincia").val(),acCodEstado:$("#departamento").val(),acCodPais:$("#acCodPais").val(),acTipo:$("#tipo_direccion_value").val(),acZonaPostal:$("#codepostal").val(),disponeClaveSMS:$("#disponeClaveSMS").val(),tyc:$("#tyc").is(":checked")?"1":"0",notSms:notSms,notEmail:notEmail,proteccion:proteccion,contrato:contrato});l=CryptoJS.AES.encrypt(l,e,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/actualizar",{request:l,cpo_name:e,plot:btoa(e)},function(e){switch(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#load_reg").hide(),data.rc){case 0:$("#content-formulario-perfil").remove(),$("#exito").css("display","block");break;case-200:systemDialog("Alerta",data.msg,"dash");break;case-271:$(".overlay-modal").show(),$("#dialogo-actualizacion-incompleta").show();break;case-335:$("#dig-ver").focus(),systemDialog("Perfil","Dígito verificador inválido");break;case-317:case-314:case-313:case-311:case-21:systemDialog("Activación Plata beneficios","El perfil se actualizó satisfactoriamente, pero no fue posible activar su tarjeta, comuníquese con el <strong>Centro de Contacto</strong>","dash");break;default:$(location).attr("href",base_url+"/users/error_gral")}})}function w(){jQuery.validator.setDefaults({debug:!0,success:"valid"}),jQuery.validator.addMethod("numberEqual1",function(e,o){return!(o.value.length>0)||o.value!=$("#telefono_hab").val()&&o.value!=$("#telefono").val()},"Teléfono Otro está repetido"),jQuery.validator.addMethod("numberEqual2",function(e,o){return!(o.value.length>0)||o.value!=$("#telefono").val()&&o.value!=$("#otro_telefono_num").val()},"Teléfono Fijo está repetido"),jQuery.validator.addMethod("numberEqual3",function(e,o){return!(o.value.length>0)||o.value!=$("#telefono_hab").val()&&o.value!=$("#otro_telefono_num").val()},"Teléfono Móvil está repetido"),jQuery.validator.addMethod("username",function(e,o,a){return a.test(e)},"Usuario invalido. "),jQuery.validator.addMethod("mayorEdadAnio",function(e,o){if(0!=controlValid)return!0;var a=s();return 1==a||0!=a&&void 0},"Usted no es mayor de edad. "),jQuery.validator.addMethod("validarFecha",function(e,o){var a=d();return 1==a||0!=a&&void 0},"Fecha invalida"),jQuery.validator.addMethod("validaNombre1",function(e,o){var a=p();return 1==a||0!=a&&void 0},"El campo Primer nombre no admite caracteres especiales."),jQuery.validator.addMethod("validaNombre2",function(e,o){var a=u();return 1==a||0!=a&&void 0},"El campo Segundo nombre no admite caracteres especiales."),jQuery.validator.addMethod("validaApellido1",function(e,o){var a=m();return 1==a||0!=a&&void 0},"El campo Primer apellido no admite caracteres especiales."),jQuery.validator.addMethod("validaApellido2",function(e,o){var a=f();return 1==a||0!=a&&void 0},"El campo Segundo apellido no admite caracteres especiales."),jQuery.validator.addMethod("validaCargo",function(e,o){var a=v();return 1==a||0!=a&&void 0},"El campo Cargo no admite caracteres especiales."),jQuery.validator.addMethod("validaLugarnac",function(e,o){var a=b();return 1==a||0!=a&&void 0},"El campo Lugar de Nacimiento no admite caracteres especiales."),jQuery.validator.addMethod("validaCentro",function(e,o){var a=g();return 1==a||0!=a&&void 0},"El campo Centro Laboral no admite caracteres especiales."),jQuery.validator.addMethod("mail",function(e,o,a){return a.test(e)},"Correo invalido. "),$("#form-perfil").validate({errorElement:"label",ignore:".ignore",errorContainer:"#msg",errorClass:"field-error",validClass:"field-success",errorLabelContainer:"#msg",rules:{"dig-ver":{required:!0,digits:!0,maxlength:1},primer_nombre:{required:!0,validaNombre1:!0},segundo_nombre:{required:!1,validaNombre2:!0},primer_apellido:{required:!0,validaApellido1:!0},segundo_apellido:{required:!1,validaApellido2:!0},lugar_nac:{required:!1,validaLugarnac:!0},"dia-nacimiento":{required:!0,number:!0,range:[1,31]},"mes-nacimiento":{required:!0,number:!0,range:[1,12],validarFecha:!0},"anio-nacimiento":{required:!0,number:!0,min:1900,mayorEdadAnio:!0},genero:{required:!1},edo_civil:{required:!1},nacionalidad:{required:!0,lettersonly:!0},tipo_direccion:{required:!0},codepostal:{required:!1,digits:!0,maxlength:x},pais_Residencia:{required:!0},departamento_residencia:{required:!0},provincia_residencia:{required:!0},distrito_residencia:{required:!0},direccion:{required:!0},email:{mail:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/},telefono_hab:{number:!0,numberEqual2:!0,maxlength:11,minlength:M},telefono:{required:!0,number:!0,numberEqual3:!0,maxlength:11,minlength:7},otro_telefono_tipo:{required:!1},otro_telefono_num:{number:!0,numberEqual1:!0,maxlength:11,minlength:7},ruc_laboral:{required:!0},centro_laboral:{required:!0,validaCentro:!0},situacion_laboral:{required:!1},profesion_labora:{required:!0},profesion:{required:!0},cargo:{validaCargo:!0},ingreso_promedio:{required:!1,number:!0},desem_publico:{required:!0},cargo_publico:{required:!0},institucion_publica:{required:!0},uif:{required:!0},contrato:{required:!0},tyc:{required:!0}},messages:{"dig-ver":"Dígito verificador inválido.",primer_nombre:"El campo Primer Nombre no puede estar vacío y debe contener solo letras.",segundo_nombre:"El campo Segundo Nombre debe contener solo letras.",primer_apellido:"El campo Apellido Paterno no puede estar vacío y debe contener solo letras.",segundo_apellido:"El campo Apellido Materno debe contener solo letras.",lugar_nac:"El campo Lugar de Nacimiento debe contener solo letras.","dia-nacimiento":{required:"El campo Día no puede estar vacío y debe contener solo números.",number:"El campo Día no puede estar vacío y debe contener solo números.",mayorEdadAnio:"Usted no es mayor de edad.",range:"El Día debe estar comprendido entre 1 y 31."},"mes-nacimiento":{required:"El campo Mes no puede estar vacío y debe contener solo números.",number:"El campo Mes no puede estar vacío y debe contener solo números.",mayorEdadAnio:"Usted no es mayor de edad.",validarFecha:"Fecha invalida."},"anio-nacimiento":{required:"El campo Año no puede estar vacío y debe contener solo números.",number:"El campo Año no puede estar vacío y debe contener solo números.",mayorEdadAnio:"Usted no es mayor de edad.",min:"Por favor ingrese un Año de nacimiento válido."},nacionalidad:{lettersonly:"El campo Nacionalidad no puede contener números.",required:"El campo Nacionalidad no puede estar vacío."},tipo_direccion:"El campo Tipo Dirección no puede estar vacío.",codepostal:{digits:"El campo Código Postal debe contener solo números.",maxlength:"El campo Código postal debe contener máximo "+x+" caracteres númericos."},pais_Residencia:"El campo País de Residencia no puede estar vacío y debe contener solo letras.",departamento_residencia:"El campo Departamento no puede estar vacío.",provincia_residencia:"El campo Provincia no puede estar vacío.",distrito_residencia:"El campo Distrito no puede estar vacío.",direccion:"El campo Dirección no puede estar vacío.",email:"El correo electrónico no puede estar vacío y debe contener formato correcto. (usuario@ejemplo.com).",telefono_hab:{number:"El campo Teléfono Fijo debe contener solo números.",numberEqual2:"Teléfono Fijo está repetido.",minlength:"El campo Teléfono Fijo debe contener mínimo 7 caracteres numéricos.",maxlength:"El campo Teléfono Fijo debe contener máximo "+M+" caracteres númericos."},telefono:{required:"El campo Teléfono Móvil no puede estar vacío y debe contener solo números.",number:"El campo Teléfono Móvil no puede estar vacío y debe contener solo números.",numberEqual3:"Teléfono Móvil está repetido.",minlength:"El campo Teléfono Móvil debe contener minimo 7 caracteres númericos.",maxlength:"El campo Teléfono Móvil debe contener máximo 11 caracteres numéricos."},otro_telefono_num:{number:"El campo Otro Teléfono debe contener solo números.",numberEqual1:"El campo Otro Teléfono está repetido.",minlength:"El campo Otro Teléfono  debe contener mínimo 7 caracteres numéricos.",maxlength:"El campo Otro Teléfono  debe contener máximo 11 caracteres numéricos."},ruc_laboral:"El campo Teléfono Móvil no puede estar vacío.",centro_laboral:"El campo Centro Laboral no puede estar vacío y no puede contener caracteres especiales.",profesion_labora:"El campo Ocupación Laboral no puede estar vacío y debe contener solo letras.",profesion:"Debe seleccionar una profesión.",cargo:"El campo Cargo no admite caracteres especiales.",ingreso_promedio:"El campo Ingreso promedio mensual debe contener solo números.",desem_publico:"El campo ¿Desempeñó cargo público en últimos 2 años? no puede estar vacío",cargo_publico:"El campo Cargo Público no puede estar vacío y debe contener solo letras.",institucion_publica:"El campo Institución pública no puede estar vacío.",uif:"El campo ¿Es sujeto obligado a informar UIF-Perú, conforme al artículo 3° de la Ley N° 29038? no puede estar vacío.",contrato:"Debe aceptar el contrato de cuenta dinero electrónico.",tyc:"Debe aceptar los términos y condiciones."}})}"pichincha"==skin&&($("input[type=text], input[type=password]").prop("readonly",!0),$("input[type=radio], input[type=checkbox]").prop("disabled",!0)),"0"==tyc&&systemDialog("Términos y Condiciones","Debes aceptar los términos y condiciones.","tyc"),"S"==aplicaperfil&&"0"==afiliado&&($("#widget-account").focus(),systemDialog("Activa tu tarjeta plata beneficio","Completa el formulario."));var M="7",x="10";"pichincha"==skin&&($("#codepostal").attr("maxlength","6"),x="6",M="11"),$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),N(),"pichincha"!=skin?q():$("#listaProfesion-bp").val($("#content").attr("profesion")),setTimeout(function(){$("#msg").fadeOut()},5e3),$("#loading-first").remove(),$("#content-holder").css("display","block"),e();var D=$("#cargo-publico");$("#cargo-publico-si").on("click",function(){$("#cargo-publico-no").removeAttr("checked","checked")}),$("#cargo-publico-no").on("click",function(){$("#cargo-publico-si").removeAttr("checked","checked")}),o();var O=$("#uif");$("#sujeto-obligado-si").on("click",function(){$("#sujeto-obligado-no").removeAttr("checked","checked")}),$("#sujeto-obligado-no").on("click",function(){$("#sujeto-obligado-si").removeAttr("checked","checked")}),a(),i(),t(),r(),n(),c(),l(),$("#dia-nacimiento").blur(s,d),$("#mes-nacimiento").change(s,d),$("#anio-nacimiento").blur(s,d),$("#dia-nacimiento").blur(d),$("#mes-nacimiento").change(d),anio=new Date,anioActual=anio.getFullYear(),mesActual=anio.getMonth()+1,diaActual=anio.getDate(),anioMayorEdad=parseInt(anioActual-18);var j=$("#pais-residencia-value").val().split("-")[0];y(),h(),$("#cargo-publico-no").on("click",function(){$(".cargo_publico").removeAttr("id name").attr("disabled","disabled").val(""),$(".institucion_publica").removeAttr("id name").attr("disabled","disabled").val("")}),$("#cargo-publico-si").on("click",function(){$(".cargo_publico").attr({id:"cargo_publico",name:"cargo_publico"}).removeAttr("disabled","disabled"),$(".institucion_publica").attr({id:"institucion_publica",name:"institucion_publica"}).removeAttr("disabled","disabled")}),C(),$("#otro_telefono_tipo").on("change",function(){C()}),S(),$("#departamento").change(function(){$("#provincia").empty().append("<option value=''>Cargando...</option>"),$("#distrito").empty().append("<option value=''>-</option>"),""!=this.value?J(this.value,j):$("#provincia").empty().append("<option value=''>-</option>")}),$("#listaProfesion").on("change",function(){$("#tipo_profesion_value").val($("#listaProfesion").val())}),$(".profesion-labora").on("change",function(){$(".tipo_profesion_value").val($(".profesion-labora").val())}),$("#tipo_direccion").on("change",function(){$("#tipo_direccion_value").val($("#tipo_direccion").val())}),$("#otro_telefono_tipo").on("change",function(){$("#otro_telefono_tipo_value").val($("#otro_telefono_tipo").val())}),$("#edocivil").on("change",function(){$("#edo-civil-value").val($("#edocivil").val())}),$("#invalido1").on("click",function(){$("#dialogo-fallo-actualizacion").hide(),$(".overlay-modal").hide()}),$("#invalido2").on("click",function(){$("#dialogo-actualizacion-incompleta").hide(),location.reload(!0)}),$(".label-inline").on("click","a",tycModal),$("#tyc").on("click",function(){tycModal(),$("#tyc").off("click")}),$("#tyc").is(":checked")&&$("#tyc").off("click").prop("disabled",!0),$("#proteccion").on("click",function(){$(this).off("click"),$("#datos_personales").dialog({title:"PROTECCIÓN DE DATOS PERSONALES",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#close-datos").click(function(){$("#datos_personales").dialog("close")})}),1==aProteccion&&$("#proteccion").off("click").prop("disabled",!0),$("#contrato").on("click",function(){$(this).off("click"),$("#contrato_cuenta").dialog({title:"CONTRATO DE CUENTA DINERO ELECTRÓNICO PLATA BENEFICIOS",dialogClass:"contratos",modal:!0,width:"940px",draggable:!1,rezise:!1,open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$(".contratos").css("top","50px"),$("#close-contrato").click(function(){$("#contrato_cuenta").dialog("close")}),
$("html, body").animate({scrollTop:$("body").offset().top},0)}),1==aContrato&&$("#contrato").off("click").prop("disabled",!0);var R=$("#form-perfil");w(),$("#actualizar").on("click",function(e){if(e.preventDefault(),pais=$("#content").attr("accodpais"),email=$("#email").val(),userName=$("#content").attr("username"),verificarMail=$("#verificar-email").val(),"Ec-bp"===country&&(email=$("#email_cypher").val(),verificarMail=$("#email_cypher").val()),"Ec-bp"==country||email==verificarMail||email.match(/[\s]/gi))email==verificarMail&&($("#msg-correo").css("display","none"),$("#email").removeClass("field-error").addClass("field-success"),$("#actualizar").removeAttr("disabled"),_());else{$("#loading").show();var o=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),a=JSON.stringify({pais:pais,email:email,username:userName});a=CryptoJS.AES.encrypt(a,o,{format:CryptoJSAesJson}).toString(),$.post(base_url+"/perfil/verificarEmail",{request:a,cpo_name:o,plot:btoa(o)},function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),$("#msg-correo").hide(),response_email=JSON.parse(data),-238==response_email.rc?($("#loading").hide(),$("#msg-correo").css("display","none"),$("#email").removeClass("field-error").addClass("field-success"),$("#actualizar").removeAttr("disabled"),_()):0==response_email.rc?($("#loading").hide(),$("#email").removeClass("field-success").addClass("field-error"),$("#dialogo_disponible").dialog({title:"Correo no disponible",modal:"true",width:"440px",open:function(e,o){$(".ui-dialog-titlebar-close",o.dialog).hide()}}),$("#disp").click(function(){$("#dialogo_disponible").dialog("close")})):($("#loading").hide(),$("#msg-correo").css("display","none"),$("#email").removeClass("field-error").addClass("field-success"),$("#actualizar").removeAttr("disabled"),_())})}}),$("#perfil-cancelar").click(function(){window.location.href=base_url+"/dashboard"})});