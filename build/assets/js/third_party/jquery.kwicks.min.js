(function(e){var i={init:function(i){var s=e.extend({duration:500,spacing:5},i);if(void 0===s.size)throw new Error('Kwicks option "size" is required');if(void 0===s.minSize&&void 0===s.maxSize)throw new Error('One of Kwicks options "minSize" or "maxSize" is required');if(void 0!==s.minSize&&void 0!==s.maxSize)throw new Error('Kwicks options "minSize" and "maxSize" may not both be set');if(s.minSize>s.size)throw new Error('Kwicks option "minSize" may not be greater than "size"');if(s.maxSize<s.size)throw new Error('Kwicks option "maxSize" may not be less than "size"');if(s.behavior&&"menu"!==s.behavior)throw new Error("Unrecognized Kwicks behavior specified: "+s.behavior);return this.each(function(){e(this).data("kwicks",new t(this,s))})},expand:function(i){return this.each(function(){var t,s=e(this);if(s.is(".kwicks-processed")){if("number"!=typeof i)throw new Error('Kwicks method "expand" requires an index');i>=0&&(t=s.children().eq(i))}else{if(!s.parent().is(".kwicks-processed"))throw new Error('Cannot call "expand" method on a non-Kwicks element');t=s,i=t.index()}var n=t&&t.length?t:s;n.trigger("expand.kwicks",{index:i})})},expanded:function(){var e=this.first().data("kwicks");if(!e)throw new Error('Cannot called "expanded" method on a non-Kwicks element');return e.expandedIndex},select:function(i){return this.each(function(){var t,s=e(this);if(s.is(".kwicks-processed")){if("number"!=typeof i)throw new Error('Kwicks method "select" requires an index');i>=0&&(t=s.children().eq(i))}else{if(!s.parent().is(".kwicks-processed"))throw new Error('Cannot call "expand" method on a non-Kwicks element');t=s,i=t.index()}var n=t&&t.length?t:s;n.trigger("select.kwicks",{index:i})})},selected:function(){var e=this.first().data("kwicks");if(!e)throw new Error('Cannot called "selected" method on a non-Kwicks element');return e.selectedIndex}};e.fn.kwicks=function(e){if(i[e])return i[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof e&&e)throw new Error("Unrecognized kwicks method: "+e);return i.init.apply(this,arguments)},e.event.special.expand={_default:function(i,t){if("kwicks"===i.namespace){var s=e(i.target),n=s.data("kwicks")||s.parent().data("kwicks");n&&n.expand(t.index)}}},e.event.special.select={_default:function(i,t){if("kwicks"===i.namespace){var s=e(i.target),n=s.data("kwicks")||s.parent().data("kwicks");n&&n.select(t.index)}}};var t=function(i,t){this.opts=t;t.isVertical;this.$container=e(i).addClass("kwicks").addClass("acordion"),this.$panels=this.$container.children();var s=this.$panels.length;void 0===t.minSize?t.minSize=(t.size*s-t.maxSize)/(s-1):t.maxSize=t.size*s-t.minSize*(s-1),this.selectedIndex=this.$panels.filter(".kwicks-selected").index(),this.expandedIndex=this.selectedIndex,this.primaryDimension=t.isVertical?"height":"width",this.secondaryDimension=t.isVertical?"width":"height",this.primaryAlignment=t.isVertical?"top":"left",this.secondaryAlignment=t.isVertical?"bottom":"right",this.$timer=e({progress:0}),this.offsets=this.getOffsetsForExpanded(),this.initStyles(),this.initBehavior()};t.prototype.getOffsetsForExpanded=function(){for(var e=this.expandedIndex,i=this.$panels.length,t=this.opts.spacing,s=this.opts.size,n=this.opts.minSize,r=this.opts.maxSize,o=[0],a=1;a<i;a++)o[a]=-1===e?a*(s+t):a<=e?a*(n+t):r+n*(a-1)+a*t;return o},t.prototype.setStyle=e.support.style?function(e,i){e.setAttribute("style",i)}:function(e,i){e.style.cssText=i},t.prototype.updatePanelStyles=function(){var e=this.offsets,i=this.$panels,t=this.primaryDimension,s=this.primaryAlignment,n=this.secondaryAlignment,r=this.opts.spacing,o=this._containerSize;o||(o=this._containerSize=this.$container.css(t).replace("px",""));for(var a,d,c,h,p=this._stylesInited?"":"position:absolute;",l=i.length;l--;)c=a,a=Math.round(e[l]),l===i.length-1?(d=o-a,h=n+":0;"+t+":"+d+"px;"):(d=c-a-r,h=s+":"+a+"px;"+t+":"+d+"px;"),this.setStyle(i[l],p+h);this._stylesInited||(this.$container.addClass("kwicks-processed"),this._stylesInited=!0)},t.prototype.initStyles=function(){var e=this.opts,i=this.$container,t=this.$panels,s=t.length,n=this.primaryDimension,r=this.secondaryDimension;i.css(n,e.size*s+e.spacing*(s-1)),i.css(r,t.eq(0).css(r)),this.updatePanelStyles()},t.prototype.initBehavior=function(){if(this.opts.behavior){var i=this.$container;switch(this.opts.behavior){case"menu":this.$container.on("mouseleave",function(){i.kwicks("expand",-1)}).children().on("mouseover",function(){e(this).kwicks("expand")}).click(function(){e(this).kwicks("select")});break;default:throw new Error("Unrecognized behavior option: "+this.opts.behavior)}}},t.prototype.getExpandedPanel=function(){return-1===this.expandedIndex?e([]):this.$panels.eq(this.expandedIndex)},t.prototype.getSelectedPanel=function(){return-1===this.selectedIndex?e([]):this.$panels.eq(this.selectedIndex)},t.prototype.select=function(e){if(e===this.selectedIndex)return this.expand(e);this.getSelectedPanel().removeClass("kwicks-selected"),this.selectedIndex=e,this.getSelectedPanel().addClass("kwicks-selected"),this.expand(e)},t.prototype.expand=function(e){var i=this;if(-1===e&&(e=this.selectedIndex),e!==this.expandedIndex){this.getExpandedPanel().removeClass("kwicks-expanded"),this.expandedIndex=e,this.getExpandedPanel().addClass("kwicks-expanded");var t=this.$timer,s=this.$panels.length,n=this.offsets.slice(),r=this.offsets,o=this.getOffsetsForExpanded();t.stop()[0].progress=0,t.animate({progress:1},{duration:this.opts.duration,easing:this.opts.easing,step:function(e){r.length=0;for(var t=0;t<s;t++){var a=o[t],d=a-(a-n[t])*(1-e);r[t]=d}i.updatePanelStyles()}})}}})(jQuery);