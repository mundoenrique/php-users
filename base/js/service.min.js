var path=window.location.href.split("/"),base_cdn,base_url,viewControl="",bloqAction,moneda,pais;base_cdn=path[0]+"//"+path[2].replace("online","cdn")+"/"+path[3],base_url=path[0]+"//"+path[2]+"/"+path[3],$(function(){$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){},function(){$(".submenu-user").attr("style","display:none")}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({dialogClass:"cond-serv",modal:"true",width:"940px",draggable:!1,open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}}),$(".cond-serv").css("top","50px"),$("#ok").click(function(){$("#dialog-tc").dialog("close")})}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas",modal:"true",width:"940px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")});var a=$("#dashboard-donor");a.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var b=$("#filters-stack .option-set"),c=b.find("a");c.click(function(){var b=$(this);if(b.hasClass("selected"))return!1;var c=b.parents(".option-set");c.find(".selected").removeClass("selected"),b.addClass("selected");var d={},e=c.attr("data-option-key"),f=b.attr("data-option-value");return f="false"!==f&&f,d[e]=f,"layoutMode"===e&&"function"==typeof changeLayoutMode?changeLayoutMode(b,d):a.isotope(d),!1})}),$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item"),$(this).parents("li").addClass("current-stack-item")}),$(".dashboard-item").click(function(){var n,q,a=$(this).find("img").attr("src"),b=$(this).attr("card"),c=$(this).attr("marca").toLowerCase(),d=$(this).attr("mascara"),e=$(this).attr("producto1"),g=($(this).attr("empresa"),$(this).attr("nombre")),i=($(this).attr("moneda"),$(this).attr("prefix")),j=$(this).attr("bloqueo"),k=$(this).attr("condition"),l=$(this).attr("fe"),m=!0,o='<p class="field-tip" style="margin-left: 10px;">Indique la operación que desea realizar</p>',p=0==k?'<li id="replace" class="service-item-unselect"><span class="icon-spinner services-item"></span>Solicitud <br>de reposición</span></li>':"";switch(pais=$(this).attr("pais"),o+='<ul class="product-balance-group services-content">',j){case"N":bloqAction="Bloquear ",n="lock",o+='<li id="lock" class="service-item-unselect"><span class="icon-'+n+' services-item"></span>Bloquear <br>cuenta</li>',o+='<li id="key" class="service-item-unselect"><span class="icon-key services-item"></span>Cambio <br>de PIN</span></li>',o+=p;break;case"PB":bloqAction="Desbloquear ",n="unlock",o+='<li id="lock" class="service-item-unselect"><span class="icon-'+n+' services-item"></span>Desbloquear <br>cuenta</li>',o+=p;break;default:m=!1}o+="</ul>",1==m?($("#donor").children().remove(),q='<div class="product-presentation" producto="'+e+'">',q+='<img src="'+a+'" width="200" height="130" alt="" />',q+='<div class="product-network '+c+'"></div>',q+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" prefix="'+i+'" cardOrigen="'+b+'" stat-bloq="'+j+'" fe="'+l+'"/>',q+="</div>",q+='<div class="product-info">',q+='<p class="product-cardholder" id="nombreCtaOrigen">'+g+"</p>",q+='<p class="product-cardnumber">'+d+"</p>",q+='<p class="product-metadata">'+e+"</p>",q+='<nav class="product-stack">',q+='<ul class="stack">',q+='<li class="stack-item">',q+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',q+="</li>",q+="</ul>",q+="</nav>",q+="</div>",q+='<div class="product-scheme">',q+=o,q+="</div>",$("#donor").append(q)):notiSystem("Servicios","No es posible realizar esta acción, la tarjeta se encuentra bloqueada permanentemente","warning").delay(10),$("#content-product").dialog("close"),$(".stack-item").click(function(){viewControl="",$("#lock-acount").hide(),$("#change-key").hide(),$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#continuar").prop("disabled",!0),$("#content-product").dialog({title:"Modificación de Cuentas",modal:"true",width:"940px",open:function(a,b){$(".ui-dialog-titlebar-close",b.dialog).hide()}})})}),$("#donor").on("click","#lock, #key, #replace",function(a){var d,b=a.target.id,c=a.target.parentNode.id;switch(d=b?b:c){case"lock":viewControl!=d&&""!=viewControl?notiSystem(bloqAction+"cuenta","¿Realmente desea realizar esta acción?","warning","carry",d):viewSelect(d);break;case"key":viewControl!=d&&""!=viewControl?notiSystem("Cambio de PIN","¿Realmente desea realizar esta acción?","warning","carry",d):viewSelect(d);break;case"replace":viewControl!=d&&""!=viewControl?notiSystem("Reposición de tarjeta","¿Realmente desea realizar esta acción?","warning","carry",d):viewSelect(d)}}),$("#continuar").on("click",function(){var d,f,g,h,i,j,k,a=$("#continuar").attr("data-action"),b=$("#donor-cardnumber-origen").attr("fe"),c=$("#donor-cardnumber-origen").attr("cardorigen"),e=$("#donor-cardnumber-origen").attr("prefix");switch("changePin"!=a&&(d=$("#donor-cardnumber-origen").attr("stat-bloq"),f=$("#bloqueo-cuenta"),$("#fecha-exp-bloq").val(b),$("#card-bloq").val(c),$("#status").val(d),$("#prefix-bloq").val(e)),a){case"lockAccoun":$("#lock-type").val("temporary"),$("#prevent-bloq").hide(),k="LockAccount";break;case"changePin":h=$("#pin-current").val(),i=$("#new-pin").val(),$("#fecha-exp-cambio").val(b),$("#card-cambio").val(c),$("#pin-current-now").val(h),$("#new-pin-now").val(i),$("#prefix-cambio").val(e),f=$("#cambio-pin"),k="changePin";break;case"lockReplace":$("#lock-type").val("final"),j=$("#mot-sol").val(),$("#mot-sol-now").val(j),k="LockAccount"}validar_campos(),f.submit(),1==f.valid()&&(g=f.serialize(),lock_change(g,k,f,a))})});