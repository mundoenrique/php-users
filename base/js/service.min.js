var path=window.location.href.split("/"),base_cdn,base_url,viewControl="",bloqAction,moneda,pais;base_cdn=path[0]+"//"+path[2].replace("online","cdn")+"/"+path[3],base_url=path[0]+"//"+path[2]+"/"+path[3],$(function(){$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({dialogClass:"cond-serv",modal:"true",width:"940px",draggable:!1,open:function(e,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$(".cond-serv").css("top","50px"),$("#ok").click(function(){$("#dialog-tc").dialog("close")})}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas",modal:"true",width:"940px",open:function(e,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")});var e=$("#dashboard-donor");e.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var a=$("#filters-stack .option-set"),t=a.find("a");t.click(function(){var a=$(this);if(a.hasClass("selected"))return!1;var t=a.parents(".option-set");t.find(".selected").removeClass("selected"),a.addClass("selected");var i={},o=t.attr("data-option-key"),c=a.attr("data-option-value");return c="false"!==c&&c,i[o]=c,"layoutMode"===o&&"function"==typeof changeLayoutMode?changeLayoutMode(a,i):e.isotope(i),!1})}),$(".dashboard-item").click(function(){var e,a,t=$(this).find("img").attr("src"),i=$(this).attr("card"),o=$(this).attr("marca").toLowerCase(),c=$(this).attr("mascara"),r=$(this).attr("producto1"),n=($(this).attr("empresa"),$(this).attr("nombre")),s=($(this).attr("moneda"),$(this).attr("prefix")),l=$(this).attr("bloqueo"),d=$(this).attr("condition"),p=$(this).attr("fe"),u=!0,v='<p class="field-tip" style="margin-left: 10px;">Indique la operación que desea realizar</p>';pais=$(this).attr("pais"),v="Ve"==pais?"Haga clic aquí si requiere reponer su PIN para acceso a operaciones en comercios y cajeros automáticos":v;var m=0==d&&"Ve"!=pais?'<li id="replace" class="service-item-unselect"><span class="icon-spinner services-item"></span>Solicitud <br>de reposición</span></li>':"";switch(v+='<ul class="product-balance-group services-content">',l){case"N":if("Ve"==pais)break;bloqAction="Bloquear ",e="lock",v+='<li id="lock" class="service-item-unselect"><span class="icon-'+e+' services-item"></span>Bloquear <br>cuenta</li>',v+='<li id="key" class="service-item-unselect"><span class="icon-key services-item"></span>Cambio <br>de PIN</span></li>';break;case"PB":if("Ve"==pais)break;bloqAction="Desbloquear ",e="unlock",v+='<li id="lock" class="service-item-unselect"><span class="icon-'+e+' services-item"></span>Desbloquear <br>cuenta</li>';break;default:u=!1}"Ve"==pais&&(v+='<li id="recover" class="service-item-unselect"><span class="icon-key services-item"></span>Reposición <br>de PIN</span></li>'),v+=m,v+="</ul>",1==u?($("#donor").children().remove(),a='<div class="product-presentation" producto="'+r+'">',a+='<img src="'+t+'" width="200" height="130" alt="" />',a+='<div class="product-network '+o+'"></div>',a+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" prefix="'+s+'" cardOrigen="'+i+'" stat-bloq="'+l+'" fe="'+p+'"/>',a+="</div>",a+='<div class="product-info">',a+='<p class="product-cardholder" id="nombreCtaOrigen">'+n+"</p>",a+='<p class="product-cardnumber">'+c+"</p>",a+='<p class="product-metadata">'+r+"</p>",a+='<nav class="product-stack">',a+='<ul class="stack">',a+='<li class="stack-item">',a+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',a+="</li>",a+="</ul>",a+="</nav>",a+="</div>",a+='<div class="product-scheme">',a+=v,a+="</div>",$("#donor").append(a)):notiSystem("Servicios","No es posible realizar esta acción, la tarjeta se encuentra bloqueada permanentemente","warning").delay(10),$("#content-product").dialog("close"),$(".stack-item").click(function(){viewControl="",$("#lock-acount").hide(),$("#change-key").hide(),$("#rec-key").hide(),$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#continuar").prop("disabled",!0),$("#content-product").dialog({title:"Modificación de Cuentas",modal:"true",width:"940px",open:function(e,a){$(".ui-dialog-titlebar-close",a.dialog).hide()}})})}),$("#donor").on("click","#lock, #key, #replace, #recover",function(e){var a,t=e.target.id,i=e.target.parentNode.id;switch(a=t?t:i){case"lock":viewControl!=a&&""!=viewControl?notiSystem(bloqAction+"cuenta","¿Realmente desea realizar esta acción?","warning","carry",a):viewSelect(a);break;case"key":viewControl!=a&&""!=viewControl?notiSystem("Cambio de PIN","¿Realmente desea realizar esta acción?","warning","carry",a):viewSelect(a);break;case"replace":viewControl!=a&&""!=viewControl?notiSystem("Reposición de tarjeta","¿Realmente desea realizar esta acción?","warning","carry",a):viewSelect(a);break;case"recover":viewControl!=a&&""!=viewControl?notiSystem("Recuperar cuenta","¿Realmente desea realizar esta acción?","warning","carry",a):viewSelect(a)}}),$("#continuar").on("click",function(){var e,a,t,i,o,c,r,n=$("#continuar").attr("data-action"),s=$("#donor-cardnumber-origen").attr("fe"),l=$("#donor-cardnumber-origen").attr("cardorigen"),d=$("#donor-cardnumber-origen").attr("prefix");switch("changePin"!=n&&(e=$("#donor-cardnumber-origen").attr("stat-bloq"),a=$("#bloqueo-cuenta"),$("#fecha-exp-bloq").val(s),$("#card-bloq").val(l),$("#status").val(e),$("#prefix-bloq").val(d)),n){case"lockAccoun":$("#lock-type").val("temporary"),$("#prevent-bloq").hide(),r="LockAccount";break;case"changePin":i=$("#pin-current").val(),o=$("#new-pin").val(),$("#fecha-exp-cambio").val(s),$("#card-cambio").val(l),$("#pin-current-now").val(i),$("#new-pin-now").val(o),$("#prefix-cambio").val(d),a=$("#cambio-pin"),r="changePin";break;case"lockReplace":$("#lock-type").val("final"),c=$("#mot-sol").val(),$("#mot-sol-now").val(c),r="LockAccount";break;case"recoverKey":$("#rec-clave").hide(),$("#fecha-exp-rec").val(s),$("#card-rec").val(l),$("#prefix-rec").val(d),a=$("#recover-key"),r="recoverKey"}validar_campos(),a.submit(),1==a.valid()&&(t=a.serialize(),lock_change(t,r,a,n))})});