var path,base_cdn;path=window.location.href.split("/");base_cdn=path[0]+"//"+path[2].replace("online","cdn")+"/"+path[3];base_url=path[0]+"//"+path[2]+"/"+path[3];$(function(){$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")});$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")});$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(f,g){$(".ui-dialog-titlebar-close",g.dialog).hide()}});$("#cerrar").click(function(){$("#content-product").dialog("close")});var d=$("#dashboard-donor");d.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:true}});var c=$("#filters-stack .option-set"),e=c.find("a");e.click(function(){var j=$(this);if(j.hasClass("selected")){return false}var h=j.parents(".option-set");h.find(".selected").removeClass("selected");j.addClass("selected");var f={},g=h.attr("data-option-key"),i=j.attr("data-option-value");i=i==="false"?false:i;f[g]=i;if(g==="layoutMode"&&typeof changeLayoutMode==="function"){changeLayoutMode(j,f)}else{d.isotope(f)}return false})});$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item");$(this).parents("li").addClass("current-stack-item")});$(".dashboard-item").click(function(){var j,g,e,d,k,h,f,i;j=$(this).find("img").attr("src");g=$(this).attr("card");e=$(this).attr("marca").toLowerCase();d=$(this).attr("mascara");k=$(this).attr("producto1");h=$(this).attr("empresa");i=$(this).attr("nombre");$("#donor").children().remove();f='<div class="product-presentation" producto="'+k+'">';f+='<img src="'+j+'" width="200" height="130" alt="" />';f+='<div class="product-network '+e+'"></div>';f+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+g+'" />';f+="</div>";f+='<div class="product-info">';f+='<p class="product-cardholder" id="nombreCtaOrigen">'+i+"</p>";f+='<p class="product-cardnumber" id="mascara">'+d+"</p>";f+='<p class="product-metadata" id="marca">'+k+"</p>";f+='<nav class="product-stack">';f+='<ul class="stack">';f+='<li class="stack-item">';f+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>';f+="</li>";f+="</ul>";f+="</nav>";f+="</div>";$("#donor").append(f);$(".product-button").removeClass("disabled-button");$("#agregarCuenta").attr("href","#");$("#agregarCuenta").parents("li").removeClass("disabled-group-action-item");$(this).addClass("current-dashboard-item");$("#content-product").dialog("close");var c=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val();anio=$("#filter-year").val();$("#list-detail").children().remove();$("#buscar").removeClass("disabled-button");a(c,mes,anio);$(".stack-item").click(function(){$("#tdestino").children().remove();$("#tdestino").append($("#removerDestino").html());$("#botonContinuar").attr("disabled",true);$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(l,m){$(".ui-dialog-titlebar-close",m.dialog).hide()}})})});$("#content").on("click","#buscar",function(){var c=$("#donor-cardnumber-origen").attr("cardorigen");mes=$("#filter-month").val();anio=$("#filter-year").val();$("#list-detail").children().remove();a(c,mes,anio)});function a(f,e,h){var d,j,i,c,g="Transferencia realizada";c='<div id ="loading" class="data-indicator" style="text-align: center;">';c+='<h3 style="border-bottom: 0px;">Cargando</h3>';c+='<span aria-hidden="true" class="icon-refresh icon-spin" style="font-size: 50px;"></span>';c+="</div>";$("#carga").append(c);$.post(base_url+"/historial/historial",{noTarjeta:f,tipoOperacion:"P2C",mes:e,anio:h},function(l){if(l.rc==-61){$(location).attr("href",base_url+"/users/error_gral")}if(l.rc==0){$("#carga").children().remove();$("#list-detail").children().remove();$.each(l.listaTransferenciasRealizadas,function(s,p){if(p.estatusOperacion=="0"){j="icon-warning-sign";i="feed-warning";d="En proceso"}else{if(p.estatusOperacion==1){j="icon-ok-sign";i="feed-success";d="Procesado"}else{j="icon-cancel-sign";i="feed-error";d="Rechazado"}}var m=p.fechaTransferencia.split("/");var r=m[0];var n;var o=$(".dashboard-item").attr("moneda");switch(m[1]){case"01":n="Ene";break;case"02":n="Feb";break;case"03":n="Mar";break;case"04":n="Abr";break;case"05":n="May";break;case"06":n="Jun";break;case"07":n="Jul";break;case"08":n="Ago";break;case"09":n="Sep";break;case"10":n="Oct";break;case"11":n="Nov";break;case"12":n="Dic";break}var q='<li class="feed-item '+i+'">';q+='<div class="feed-date"> '+r+' <span class="feed-date-month"> '+n+" </span></div>";q+='<div class="feed-status">';q+='<span aria-hidden="true" class="'+j+'" title="'+d+'"></span>';q+="</div>";q+=g+": "+p.beneficiario+'<span class="money-amount"> '+o+" "+p.montoTransferencia+" </span>";q+='<ul class="feed-metadata">';q+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-info-sign"></span>'+p.referencia+"</li>";q+='<li class="feed-metadata-item"><span aria-hidden="true" class="icon-bank"></span>'+p.banco+"</li>";q+="</ul>";q+="</li>";$("#list-detail").append(q)})}else{$("#carga").children().remove();var k='<div id="empty-state" style="position: static;">';k+="<h2>No se encontraron movimientos</h2>";k+="<p>Vuelva a realizar la búsqueda con un filtro distinto para obtener resultados.</p>";k+='<span aria-hidden="true" class="icon-cancel-sign" style="position: relative;right: -415px;"></span>';k+="</div>";$("#list-detail").append(k)}})}function b(c){switch(mes){case 1:mes="Today it's Sunday";break;case 1:x="Today it's Monday";break;case 2:x="Today it's Tuesday";break;case 3:x="Today it's Wednesday";break;case 4:x="Today it's Thursday";break;case 5:x="Today it's Friday";break;case 6:x="Today it's Saturday";break}}$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(c,d){$(".ui-dialog-titlebar-close",d.dialog).hide()}});$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});