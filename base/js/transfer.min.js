function countBeneficiary(a,e){var t,o=numberBeneficiary.length;return"get"==a?(console.log("tamaño: "+numberBeneficiary.length+" Acción: "+a),console.log(numberBeneficiary),t=numberBeneficiary[o-1],numberBeneficiary.pop(),console.log(t),console.log(numberBeneficiary),t):void("set"==a&&(console.log("tamaño: "+numberBeneficiary.length+" Acción: "+a+" numero: "+e),numberBeneficiary.push(e)))}var path,base_cdn;path=window.location.href.split("/"),base_cdn=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cpo_baseCdn\s*\=\s*([^;]*).*$)|^.*$/,"$1")),base_url=path[0]+"//"+path[2]+"/"+path[3];var montoMaxOperaciones,montoMinOperaciones,dobleAutenticacion,claveValida,claveC,moneda,totaldef,pais,saldo_imp,trans,numberBeneficiary=[3,2,1];$(function(){function a(){var a;return $.each($("#tdestino").children(),function(e,t){a=e}),a+1}function e(){$(".dialogDestino").click(function(){$("#content-destino").dialog({title:"Selección de Cuentas Destino",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#close").click(function(){$("#content-destino").dialog("close")})})}function t(){$.each($("#dashboard-beneficiary").children(".dashboard-item"),function(a,e){$(e).removeClass("disabled-dashboard-item"),$.each($("#tdestino").children(":not(.obscure-group)"),function(a,t){$(t).find("#tarjetaDestino").val()==$(e).attr("card")&&$(e).addClass("disabled-dashboard-item")})})}function o(){var a,e=0;return $.each($(".dinero"),function(t,o){a=$(o).val().replace(",","."),e+=parseFloat(a),e.toFixed(2)}),isNaN(e)&&(e=0),e}function n(a){var e,t;$.ajaxSetup({async:!1});var o={clave:hex_md5(a)};return $.ajax({url:base_url+"/transferencia/operaciones",data:o,type:"post",dataType:"json",success:function(a){rpta=$.parseJSON(a.response),t=$.parseJSON(a.transferir),0==rpta.rc?e=!0:(e=!1,t=!1),rpta.rc==-61&&$(location).attr("href",base_url+"/users/error_gral")}}),$.ajaxSetup({async:!0}),t}function i(){$.ajaxSetup({async:!1});var a;return $.post(base_url+"/transferencia/crearClave",function(e){0==e.rc?a=!0:(a=!1,$("#dialog-error-clave").dialog({modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#invalido2").click(function(){$("#dialog-error-clave").dialog("close"),$(location).attr("href",base_url+"/transfer")})),e.rc==-61&&$(location).attr("href",base_url+"/users/error_gral")}),a}function r(a){$.ajaxSetup({async:!1});var e;return $.post(base_url+"/transferencia/confirmacion",{clave:hex_md5(a)},function(a){0==a.rc?e=!0:(e=!1,$("#dialog-error-correo").dialog({title:"Contraseñas no coinciden",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-error-correo").dialog("close")})),a.rc==-61&&$(location).attr("href",base_url+"/users/error_gral")}),e}function s(a,e,t,o,n,i){var r,s;$.ajaxSetup({async:!1});var c={cuentaOrigen:a,cuentaDestino:e,monto:t,descripcion:o,tipoOpe:"P2P",idUsuario:n,id_afil_terceros:i};return $.ajax({url:base_url+"/transferencia/procesar",data:c,type:"post",dataType:"json",success:function(a){0==a.rc?(s=a.dataTransaccion.referencia,r=s,$("#confTransfer").prop("disabled",!1)):(r=!1,$("#confTransfer").prop("disabled",!1)),a.rc==-61&&($(location).attr("href",base_url+"/users/error_gral"),$("#confTransfer").prop("disabled",!1))}}),$.ajaxSetup({async:!0}),r}function c(a,e,t){1==a?($(e).find(".data-resultado").addClass("data-success"),$(e).find(".iconoTransferencia").removeClass("data-indicator icon-refresh icon-spin"),$(e).find(".iconoTransferencia").addClass("icon-ok-sign"),$(e).find("#estatus").empty(),$(e).find("#estatus").text("Transacción exitosa. No. de Referencia: "+t)):($(e).find(".data-resultado").addClass("data-error"),$(e).find(".iconoTransferencia").removeClass("data-indicator data-indicator icon-refresh icon-spin"),$(e).find(".iconoTransferencia").addClass("icon-cancel-sign"),$(e).find("#estatus").empty(),$(e).find("#estatus").text("Transacción fallida."))}function l(a){for(var e="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",t="AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc",o=0;o<e.length;o++)a=a.replace(e.charAt(o),t.charAt(o));return a}var d=$("#content").attr("confirmacion");"1"==d?($("#content-clave").hide(),$("#tabs-menu").show(),$("#content_plata").show()):$("#content-clave").show(),$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$("#continuar_transfer").click(function(){var a=$("#transpwd").val();n(a)?($("#content-clave").hide(),$("#content_plata").show()):($("#content_clave").show(),$.balloon.defaults.classname="field-error",$.balloon.defaults.css=null,$("#transpwd").showBalloon({position:"right",contents:"Clave inválida"}),setTimeout(function(){$("#transpwd").hideBalloon()},3e3))}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")}),$.each($(".dashboard-item"),function(a,e){$.post(base_url+"/dashboard/saldo",{tarjeta:$(e).attr("card")},function(a){var t=$(".dashboard-item").attr("moneda"),o=a.disponible;"string"!=typeof o&&(o="---"),$(e).find(".dashboard-item-balance").html(t+o)})});var a=$("#dashboard-donor");a.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var e=$("#filters-stack .option-set"),t=e.find("a");t.click(function(){var e=$(this);if(e.hasClass("selected"))return!1;var t=e.parents(".option-set");t.find(".selected").removeClass("selected"),e.addClass("selected");var o={},n=t.attr("data-option-key"),i=e.attr("data-option-value");return i="false"!==i&&i,o[n]=i,"layoutMode"===n&&"function"==typeof changeLayoutMode?changeLayoutMode(e,o):a.isotope(o),!1})}),$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item"),$(this).parents("li").addClass("current-stack-item")}),$(".dashboard-item").click(function(){var n,i,r,s,c,d,p,u,f,h,b,g,v,x,_=[];for(h=new Date,b=h.getFullYear(),g=b-5,v=b+5,x=g;x<=v;x++)_.push(x);n=$(this).find("img").attr("src"),i=$(this).attr("card"),r=$(this).attr("marca").toLowerCase(),s=$(this).attr("mascara"),c=$(this).attr("producto1"),d=$(this).attr("empresa"),u=$(this).attr("nombre"),f=$(this).attr("moneda"),pais=$(this).attr("pais"),$("#donor").children().remove(),p='<div class="product-presentation" producto="'+c+'">',p+='<img src="'+n+'" width="200" height="130" alt="" />',p+='<div class="product-network '+r+'"></div>',p+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+i+'" />',p+="</div>",p+='<div class="product-info">',p+='<p class="product-cardholder" id="nombreCtaOrigen">'+u+"</p>",p+='<p class="product-cardnumber">'+s+"</p>",p+='<p class="product-metadata">'+c+"</p>",p+='<nav class="product-stack">',p+='<ul class="stack">',p+='<li class="stack-item">',p+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',p+="</li>",p+="</ul>",p+="</nav>",p+="</div>",p+='<div class="product-scheme">',p+='<ul class="product-balance-group" style="margin: 10px 0">',p+='<li>Disponible <span class="product-balance" id="balance-available">'+f+" 0.00</span></li>",p+='<li>A debitar <span class="product-balance debitar" id="balance-debit">'+f+" 0.00</span></li>",p+="</ul>",p+="<ul class='field-group'>",p+="<li class='field-group-item'>",p+="<label for='dayExp'>Fecha de Vencimiento</label>",p+="<select id='MonthExp' name='MonthExp' style='margin-right: 5px;'>",p+="<option value=''>Mes</option>",p+="<option value='01'>01</option>",p+="<option value='02'>02</option>",p+="<option value='03'>03</option>",p+="<option value='04'>04</option>",p+="<option value='05'>05</option>",p+="<option value='06'>06</option>",p+="<option value='07'>07</option>",p+="<option value='08'>08</option>",p+="<option value='09'>09</option>",p+="<option value='10'>10</option>",p+="<option value='11'>11</option>",p+="<option value='12'>12</option>",p+="</select>",p+="<select id='yearExp' name='yearExp'>",p+="<option value=''>Año</option>",p+="</select>",p+="</li>",p+="</ul>",p+="</div>",$("#donor").append(p),$.each(_,function(a,e){var t=e.toString().substring(2,4),o="<option value='"+t+"'>"+e+"</option>";$("#yearExp").append(o)}),$("#wait").show(),$.post(base_url+"/dashboard/saldo",{tarjeta:$(this).attr("card")},function(a){var e=a.disponible;"string"!=typeof e&&(e="---"),$("#balance-available").html(f+e),$("#balance-available").attr("saldo",e)}),$("#agregarCuenta").attr("href","#"),$("#agregarCuenta").parents("li").removeClass("disabled-group-action-item"),$.each($(".dashboard-item"),function(a,e){$(this).hasClass("current-dashboard-item")&&$(this).removeClass("current-dashboard-item")}),$(this).addClass("current-dashboard-item"),$("#content-product").dialog("close"),$(".stack-item").click(function(){$(".product-button").addClass("disabled-button"),$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#continuar").attr("disabled",!0),$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}})}),$.post("transferencia/ctaDestino",{nroTarjeta:$(this).attr("card"),prefijo:$(this).attr("prefix"),operacion:"P2P"},function(i){i.rc==-150&&($("#content_plata").children().remove(),$("#tabs-menu").children().remove(),$("#content_plata").append($("#content-no-afil").html()),$("#content-no-afil").children().remove(),$("#content-destino").dialog("close")),0==i.rc&&($("#wait").hide(),$(".product-button").removeClass("disabled-button"),montoMaxOperaciones=i.parametrosTransferencias[0].montoMaxOperaciones,montoMinOperaciones=i.parametrosTransferencias[0].montoMinOperaciones,montoMaxDiario=i.parametrosTransferencias[0].montoMaxDiario,montoMaxSemanal=i.parametrosTransferencias[0].montoMaxSemanal,montoMaxMensual=i.parametrosTransferencias[0].montoMaxMensual,cantidadOperacionesDiarias=i.parametrosTransferencias[0].cantidadOperacionesDiarias,cantidadOperacionesSemanales=i.parametrosTransferencias[0].cantidadOperacionesSemanales,cantidadOperacionesMensual=i.parametrosTransferencias[0].cantidadOperacionesMensual,montoAcumDiario=i.parametrosTransferencias[0].montoAcumDiario,montoAcumSemanal=i.parametrosTransferencias[0].montoAcumSemanal,montoAcumMensual=i.parametrosTransferencias[0].montoAcumMensual,acumCantidadOperacionesDiarias=i.parametrosTransferencias[0].acumCantidadOperacionesDiarias,acumCantidadOperacionesSemanales=i.parametrosTransferencias[0].acumCantidadOperacionesSemanales,acumCantidadOperacionesMensual=i.parametrosTransferencias[0].acumCantidadOperacionesMensual,dobleAutenticacion=i.parametrosTransferencias[0].dobleAutenticacion,$("#dashboard-beneficiary").empty(),$.each(i.cuentaDestinoPlata,function(a,e){imagen1=e.nombre_producto.toLowerCase(),imagen2=l(imagen1),imagen3=imagen2.replace(" ","-"),imagen4=imagen3.replace(" ","-"),n=imagen4.replace("/","-"),p=" <li class='dashboard-item "+e.nomEmp+" muestraDestino' card='"+e.noTarjeta+"' nombre='"+e.NombreCliente+"' marca='"+e.marca+"' mascara='"+e.noTarjetaConMascara+"' empresa='"+e.nomEmp+"' producto='"+e.nombre_producto+"'>",p+="<a rel='section' class='escogerDestino'>",p+="<img src='"+base_cdn+"/img/products/"+pais+"/"+n+".png' width='200' height='130' alt='' />",p+="<div class='dashboard-item-network "+e.marca.toLowerCase()+"'>"+e.marca+"</div>",p+="<div class='dashboard-item-info'>",p+="<p class='dashboard-item-cardholder'>"+e.NombreCliente+"</p>",p+="<p class='dashboard-item-cardnumber'>"+e.noTarjetaConMascara+"</p>",p+="<p class='dashboard-item-category'>"+e.nombre_producto+"</p>",p+="</div>",p+=" </a>",p+="</li>",$("#dashboard-beneficiary").append(p)})),i.rc==-61&&$(location).attr("href",base_url+"/users/error_gral"),$(".muestraDestino").click(function(){if(1==$(this).hasClass("disabled-dashboard-item"))$("#content-destino").dialog("close");else{var n,i,r,s,c,l,d,p;n=$(this).find("img").attr("src"),i=$(this).attr("card"),r=$(this).attr("marca"),s=$(this).attr("mascara"),c=$(this).attr("producto"),l=$(this).attr("empresa"),p=$(this).attr("nombre"),$(".edit").remove();var u=a(),h=countBeneficiary("get");d='<div class="group" count-Beneficiary = "'+h+'"> ',d+='<div class="product-presentation">',d+='<img src="'+n+'" width="200" height="130" alt="" />',d+='<div class="product-network '+r.toLowerCase()+'"></div>',d+='<input id="tarjetaDestino" name="tarjetaDestino" type="hidden" value="'+i+'" />',d+='<input id="marcaDestino" name="marcaDestino" type="hidden" value="'+f+'" />',d+='<input id="marca" name="marcaDestino" type="hidden" value="'+c+'" />',d+="</div>",d+='<div class="product-info">',d+='<p class="product-cardholder">'+p+"</p>",d+='<p class="product-cardnumber">'+s+"</p>",d+='<p class="product-metadata">'+c+"</p>",d+='<nav class="product-stack">',d+='<ul class="stack">',d+='<li class="stack-item modifica">',d+='<a rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',d+="</li>",d+='<li class="stack-item elimina">',d+='<a rel="section" title="Remover"><span aria-hidden="true" class="icon-cancel"></span></a>',d+="</li>",d+="</ul>",d+="</nav>",d+="</div>",d+='<div class="product-scheme">',d+='<fieldset class="form-inline">',d+='<label for="beneficiary-1x-description" title="Descripción de la transferencia.">Concepto</label>',d+='<input class="field-large mont" id="beneficiary-'+u+'x-description" maxlength="60" name="beneficiary-1x-description" type="text" />',d+='<label for="beneficiary-1x-amount" title="Monto a transferir.">Importe</label>',d+='<div class="field-category"> '+f+" ",d+='<input id="beneficiary-1x-coin" name="beneficiary-1x-coin" type="hidden" value="'+f+'."/>',d+="</div>",d+='<input class="field-small monto dinero" id="beneficiary-'+u+'-amount" maxlength="12" name="beneficiary-1x-amount"/> <br/>',d+="</fieldset>",d+="</div>",d+="</div>",$("#content_plata #tdestino").append(d),$("#beneficiary-1x").removeClass("obscure-group"),$("#content-destino").dialog("close"),$("#tdestino").children("#btn-destino").remove(),$("#tdestino").append($("#removerDestino").html()),t();var b=$(".monto").val().replace(",",".");$("#content_plata").on("keyup",".monto",function(){b=$(this).val().replace(",","."),parseFloat(b)>saldo_imp&&($("#dialog-max-monto1").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_inv").click(function(){$("#dialog-max-monto1").dialog("close")}),$(this).val("")),parseFloat(b)>parseFloat(montoMaxOperaciones)&&($("#dialog-max-monto").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido1").click(function(){$("#dialog-max-monto").dialog("close")}),$(this).val("")),parseFloat(b)+parseFloat(montoAcumMensual)>parseFloat(montoMaxMensual)?($("#dialog-min-monto2").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido3").click(function(){$("#dialog-min-monto2").dialog("close")}),$(this).val(""),$("#balance-debit").html(m+o().toFixed(2))):parseFloat($(this).val())+parseFloat(montoAcumDiario)>parseFloat(montoMaxDiario)?($("#dialog-min-monto3").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido4").click(function(){$("#dialog-min-monto3").dialog("close")}),$(this).val(""),$("#balance-debit").html(m+o().toFixed(2))):(m=$(".dashboard-item").attr("moneda"),$(this).parents(".group").attr("montInput",$(this).val()),$(this).val().replace(",","."),$("#balance-debit").html(m+o().toFixed(2)))}),e(),u>=3&&$("#tdestino").children("#btn-destino").remove(),u>=1?$("#continuar").removeAttr("disabled"):$("#continuar").attr("disabled","")}})}),$("#content_plata").on("click",".modifica",function(){console.log("Aquí"),$(this).parents(".group").addClass("edit"),$("#content-destino").dialog({title:"Selección de Cuentas Destino",modal:"true",width:"940px",beforeClose:function(a,e){$(".group").removeClass("edit")},open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}})}),$("#content_plata").on("click",".elimina",function(){m=$(".dashboard-item").attr("moneda"),suma=o(),0!=suma?(montoR1=$(this).parents(".group").attr("montInput").replace(",","."),montoRestar=parseFloat(montoR1)):montoRestar=0,saldo1=suma-montoRestar,saldo=saldo1.toFixed(2),saldo<0||isNaN(saldo)?$("#balance-debit").html(m+0):$("#balance-debit").html(m+saldo),countBeneficiary("set"),$(this).parents(".group").remove(),t(),0==$("#tdestino").find("#btn-destino").length&&($("#tdestino").append($("#removerDestino").html()),e()),a()>1?$("#continuar").removeAttr("disabled"):$("#continuar").attr("disabled","")}),e()}),$("#content_plata").on("click",".confir",function(){var a=!0,e=0,t=[],n=!1;if($("#validate").submit(),$("#montoTotal").remove(),$("#tdestino").append("<input id='montoTotal' name='montoTotal' type='hidden' class='checkTotal' value='' />"),$("#montoTotal").val(o()),total=o(),saldo=saldo_imp,valor_concepto1=$("#beneficiary-1x-description").val(),valor_concepto2=$("#beneficiary-2x-description").val(),valor_concepto3=$("#beneficiary-3x-description").val(),valor_monto1=$("#beneficiary-1-amount").val(),valor_monto2=$("#beneficiary-2-amount").val(),valor_monto3=$("#beneficiary-3-amount").val(),""===$("#MonthExp").val()&&(t.push("Seleccione el mes de vencimiento"),a=!1),""===$("#yearExp").val()&&(t.push("Seleccione el año de vencimiento"),a=!1),""!==valor_concepto1&&""!==valor_concepto2&&""!==valor_concepto3||(t.push("El campo concepto no debe estar vacío."),a=!1),""===valor_monto1||""===valor_monto2||""===valor_monto3?(t.push("El campo importe no debe estar vacío."),n=!0):n=!1,expr="Pe"==pais||"Usd"==pais?/^-?[0-9]+([\.][0-9]{0,2})?$/:/^-?[0-9]+([\,][0-9]{0,2})?$/,!expr.test(valor_monto1)&&void 0!=valor_monto1||!expr.test(valor_monto2)&&void 0!=valor_monto2||!expr.test(valor_monto3)&&void 0!=valor_monto3){var i="Pe"==pais||"Usd"==pais?"un punto":"una coma";t.push("Para indicar decimales debe usar "+i+"."),a=!1}if(parseFloat(total)>saldo&&(t.push("El monto total excede su saldo disponible."),a=!1),parseFloat(acumCantidadOperacionesDiarias)+parseFloat(e)>=parseFloat(cantidadOperacionesDiarias)&&(t.push("Usted excede el límite diario permitido."),a=!1),parseFloat(acumCantidadOperacionesSemanales)+parseFloat(e)>=parseFloat(cantidadOperacionesSemanales)&&(t.push("Usted excede el límite semanal permitido."),a=!1),parseFloat(acumCantidadOperacionesMensual)+parseFloat(e)>parseFloat(cantidadOperacionesMensual)&&(t.push("Usted excede el límite mensual permitido."),a=!1),parseFloat(total)>parseFloat(montoMaxOperaciones)&&(t.push("El monto a total a debitar supera el monto máximo de operaciones."),a=!1),parseFloat(total)<parseFloat(montoMinOperaciones)&&0==n&&(t.push("El monto total a debitar es menor al monto mínimo de operaciones."),a=!1),parseFloat(total)+parseFloat(montoAcumDiario)>parseFloat(montoMaxDiario)?(t.push("El monto total a debitar es mayor al monto maximo diario permitido."),a=!1):parseFloat(total)+parseFloat(montoAcumSemanal)>parseFloat(montoMaxSemanal)?(t.push("El monto total a debitar es mayor al monto maximo diario permitido."),a=!1):parseFloat(total)+parseFloat(montoAcumMensual)>parseFloat(montoMaxMensual)&&(t.push("El monto total a debitar es mayor al monto maximo mensual permitido."),a=!1),totaldef=parseFloat(valor_monto1)+parseFloat(valor_monto2)+parseFloat(valor_monto3),a===!1)$("#inputValid").dialog({title:"Transferencia entre tarjetas",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide(),console.log(t),$.each(t,function(a,e){$("#contentValid").append("<p>"+e+"</p>")})}}),$("#closeValid").on("click",function(){$(this).off("click"),t=[],$("#contentValid").children().not("span").remove(),$("#inputValid").dialog("close")});else if(1==a){var r,s,c;s=$("#donor").find(".product-cardholder").html(),c=$("#donor").find(".product-cardnumber").html(),numeroCtaOrigen=$("#donor").find("#donor-cardnumber-origen").attr("cardOrigen"),nombreCtaOrigen=$("#donor").find("#nombreCtaOrigen").html(),banco=$("#donor").find(".banco").html(),marca=$("#donor").find(".product-metadata").html(),r="<tr>",r+='<td class="data-label"><label>Cuenta Origen</label></td>',r+='<td class="data-reference" id="nombreOrigenTransfer" colspan="2" numeroCtaOrigen="'+numeroCtaOrigen+'" nombreCtaOrigen="'+nombreCtaOrigen+'">'+s+'<br /><span class="highlight" id="mascaraOrigenTransfer">'+c+'</span><br /><span class="lighten"> '+marca+" </span></td>",r+="</tr>",$("#cargarConfirmacion").append(r);var l=0;montodef=0,$.each($("#tdestino").children(":not(.obscure-group, .checkTotal)"),function(a,t){var o,n,i,r,s;if(l+=1,n=$(t).find(".product-cardholder").html(),i=$(t).find(".product-cardnumber").html(),r=$(t).find("#beneficiary-"+l+"-amount").val(),montodef=parseFloat($(t).find("#beneficiary-"+l+"-amount").val())+montodef,s=$(t).find("#beneficiary-"+l+"x-description").val(),marcad=$(t).find("#marca").val(),ctnDestino=$(t).find("#tarjetaDestino").val(),id_afil=$(t).find(".id_afiliacion").val(),"Ve"==pais||"Co"==pais){var c=$(".product-scheme").find(".debitar").html().replace(/Bs./g,"");total1=c.replace(".",",")}else{var c=$(".product-scheme").find(".debitar").html().replace(/S../g,"");total1=c}moneda=$(".dashboard-item").attr("moneda"),e+=1,o='<tr class="trdestino" card="'+ctnDestino+'" id_afil="'+id_afil+'" nombre="'+n+'" monto="'+r+'" concepto="'+s+'" moneda="'+moneda+'" mascara="'+i+'" marca="'+marcad+'">',o+='<td class="data-label"><label>Cuentas Destino</label></td>',o+='<td class="data-reference" id="nombreDestinoTransfer">'+n+'<br /><span class="highlight" id="mascaraDestinoTransfer">'+i+'</span><br /><span class="lighten"> '+marcad+" </span></td>",o+='<td class="data-metadata data-resultado">',o+='<div class="data-indicator">',o+='<span aria-hidden="true" class="iconoTransferencia"></span>',o+='</div><span class="data-metadata" id="conceptoDestino"><strong>Concepto: </strong>'+s+'<br /><strong>Monto: </strong> <span class="money-amount" monto="'+r+'" id="montoDestinoTransfer"> '+moneda+" "+r+'<br /> </span><strong>Estatus: </strong><span class="money-amount" id="estatus">En espera por confirmación.</span></td>',o+="</td>",o+="</tr>",o+="<tr>",o+='<td class="data-spacing" colspan="3"></td>',o+="</tr>",$("#cargarConfirmacion").append(o)}),$("#content_plata").children().remove(),$("#content_plata").append($("#contentConfirmacion").html()),$("#contentConfirmacion").remove();var d;d="<tr>",d+='<td class="data-spacing" colspan="3"></td>',d+="</tr>",d+="<tr>",d+='<td colspan="2"></td>',d+='<td class="data-metadata">Total<br /><span class="money-amount" id="mm">'+moneda+" "+total1+'</span></td> <input id="montoTotal" name="montoTotal" type="hidden" total="'+total+'" />',d+="</tr>",$("#cargarConfirmacion").append(d).html()}}),$("#content_plata").on("click","#confTransfer",function(){$("#confTransfer").prop("disabled",!0);$("#transpwd").val();if("S"==dobleAutenticacion)i()&&$("#dialog-confirm").dialog({modal:!0,title:"Verificación requerida.",buttons:{Cancelar:function(){$(this).dialog("close")},Aceptar:function(){var a=$("#transpwd_confirmacion").val();if(r(a)){$("#dialog-confirm").dialog("close");var e,t,o,n,i,l=$("#nombreOrigenTransfer").attr("numeroCtaOrigen"),d=$("#nombreOrigenTransfer").attr("nombreCtaOrigen");$(".data-indicator").show(),$.each($(".trdestino"),function(a,r){if(e=$(r).attr("card"),t="",nombre1=$(r).attr("nombre"),o=$(r).attr("monto").replace(",","."),n=$(r).attr("concepto"),trans=s(l,e,o,n,d,t),0!=trans){i=!0,c(i,r,trans);var p;nombre=$("#nombreOrigenTransfer").html(),mascara=$("#mascaraOrigenTransfer").html();var m=new Date;hora=m.getHours()+":"+m.getMinutes()+":"+m.getSeconds();var u=m.getDate(),f=m.getMonth()+1;m.getFullYear();u<10&&(u="0"+u),f<10&&(f="0"+f);p="<tr>",p+='<td class="data-label"><label>Cuenta Origen</label></td>',p+='<td class="data-reference" colspan="2"><br>'+nombre+"</td>",p+="</tr>",$("#progress").children().remove(),cabecera="<ul class='steps'>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-exchange'></span> Transferir</li>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-view'></span> Confirmación</li>",cabecera+="<li class='step-item current-step-item'><span aria-hidden='true' class='icon-thumbs-up'></span> Finalización</li>",cabecera+="</ul>",$("#progress").append(cabecera).html(),$("#titulo").children().remove(),titulo="<h2>Finalización</h2>",$("#titulo").append(titulo).html(),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#exit").click(function(){$(location).attr("href",base_url+"/dashboard")})}else i=!1,trans="-",c(i,r,trans),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#transfer-success").show(),$("#exit").click(function(){$(location).attr("href",base_url+"/transferencia")})})}}},open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}});else{var a,e,t,o,n,l=$("#nombreOrigenTransfer").attr("numeroCtaOrigen"),d=$("#nombreOrigenTransfer").attr("nombreCtaOrigen");$(".data-indicator").show(),$.each($(".trdestino"),function(i,r){if(a=$(r).attr("card"),e="",nombre1=$(r).attr("nombre"),t=$(r).attr("monto").replace(",","."),o=$(r).attr("concepto"),trans=s(l,a,t,o,d,e),0!=trans){n=!0,c(n,r,trans);var p;nombre=$("#nombreOrigenTransfer").html(),mascara=$("#mascaraOrigenTransfer").html();var m=new Date;hora=m.getHours()+":"+m.getMinutes()+":"+m.getSeconds();var u=m.getDate(),f=m.getMonth()+1;m.getFullYear();u<10&&(u="0"+u),f<10&&(f="0"+f);p="<tr>",p+='<td class="data-label"><label>Cuenta Origen</label></td>',p+='<td class="data-reference" colspan="2"><br>'+nombre+"</td>",p+="</tr>",$("#progress").children().remove(),cabecera="<ul class='steps'>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-exchange'></span> Transferir</li>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-view'></span> Confirmación</li>",cabecera+="<li class='step-item current-step-item'><span aria-hidden='true' class='icon-thumbs-up'></span> Finalización</li>",cabecera+="</ul>",$("#progress").append(cabecera).html(),$("#titulo").children().remove(),titulo="<h2>Finalización</h2>",$("#titulo").append(titulo).html(),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#transfer-success").show(),$("#exit").click(function(){$(location).attr("href",base_url+"/dashboard")})}else n=!1,trans="-",c(n,r,trans),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#exit").click(function(){$(location).attr("href",base_url+"/transferencia")})})}}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});