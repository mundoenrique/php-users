var path,base_cdn;path=window.location.href.split("/"),base_cdn=path[0]+"//"+path[2].replace("online","cdn")+"/"+path[3],base_url=path[0]+"//"+path[2]+"/"+path[3];var montoMaxOperaciones,montoMinOperaciones,dobleAutenticacion,claveValida,claveC,moneda,totaldef,pais,saldo_imp,trans;$(function(){function a(){var a;return $.each($("#tdestino").children(),function(e,t){a=e}),a+1}function e(){$(".dialogDestino").click(function(){$("#content-destino").dialog({title:"Selección de Cuentas Destino",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#close").click(function(){$("#content-destino").dialog("close")})})}function t(){$.each($("#dashboard-beneficiary").children(".dashboard-item"),function(a,e){$(e).removeClass("disabled-dashboard-item"),$.each($("#tdestino").children(":not(.obscure-group)"),function(a,t){$(t).find("#tarjetaDestino").val()==$(e).attr("card")&&$(e).addClass("disabled-dashboard-item")})})}function o(){var a,e=0;return $.each($(".dinero"),function(t,o){a=$(o).val().replace(",","."),e+=parseFloat(a),e.toFixed(2)}),isNaN(e)&&(e=0),e}function n(a){var e,t;$.ajaxSetup({async:!1});var o={clave:hex_md5(a)};return $.ajax({url:base_url+"/transferencia/operaciones",data:o,type:"post",dataType:"json",success:function(a){rpta=$.parseJSON(a.response),t=$.parseJSON(a.transferir),0==rpta.rc?e=!0:(e=!1,t=!1),rpta.rc==-61&&$(location).attr("href",base_url+"/users/error_gral")}}),$.ajaxSetup({async:!0}),t}function i(){$.ajaxSetup({async:!1});var a;return $.post(base_url+"/transferencia/crearClave",function(e){0==e.rc?a=!0:(a=!1,$("#dialog-error-clave").dialog({modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#invalido2").click(function(){$("#dialog-error-clave").dialog("close"),$(location).attr("href",base_url+"/transfer")})),e.rc==-61&&$(location).attr("href",base_url+"/users/error_gral")}),a}function r(a){$.ajaxSetup({async:!1});var e;return $.post(base_url+"/transferencia/confirmacion",{clave:hex_md5(a)},function(a){0==a.rc?e=!0:(e=!1,$("#dialog-error-correo").dialog({title:"Contraseñas no coinciden",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#invalido").click(function(){$("#dialog-error-correo").dialog("close")})),a.rc==-61&&$(location).attr("href",base_url+"/users/error_gral")}),e}function l(a,e,t,o,n,i){var r,l;$.ajaxSetup({async:!1});var s={cuentaOrigen:a,cuentaDestino:e,monto:t,descripcion:o,tipoOpe:"P2P",idUsuario:n,id_afil_terceros:i};return $.ajax({url:base_url+"/transferencia/procesar",data:s,type:"post",dataType:"json",success:function(a){0==a.rc?(l=a.dataTransaccion.referencia,r=l,$("#confTransfer").prop("disabled",!1)):(r=!1,$("#confTransfer").prop("disabled",!1)),a.rc==-61&&($(location).attr("href",base_url+"/users/error_gral"),$("#confTransfer").prop("disabled",!1))}}),$.ajaxSetup({async:!0}),r}function s(a,e,t){1==a?($(e).find(".data-resultado").addClass("data-success"),$(e).find(".iconoTransferencia").removeClass("data-indicator icon-refresh icon-spin"),$(e).find(".iconoTransferencia").addClass("icon-ok-sign"),$(e).find("#estatus").empty(),$(e).find("#estatus").text("Transacción exitosa. No. de Referencia: "+t)):($(e).find(".data-resultado").addClass("data-error"),$(e).find(".iconoTransferencia").removeClass("data-indicator data-indicator icon-refresh icon-spin"),$(e).find(".iconoTransferencia").addClass("icon-cancel-sign"),$(e).find("#estatus").empty(),$(e).find("#estatus").text("Transacción fallida."))}function c(a){for(var e="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",t="AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc",o=0;o<e.length;o++)a=a.replace(e.charAt(o),t.charAt(o));return a}var d=$("#content").attr("confirmacion");"1"==d?($("#content-clave").hide(),$("#tabs-menu").show(),$("#content_plata").show()):$("#content-clave").show(),$(".transfers").hover(function(){$(".submenu-transfer").attr("style","display:block")},function(){$(".submenu-transfer").attr("style","display:none")}),$(".user").hover(function(){$(".submenu-user").attr("style","display:block")},function(){$(".submenu-user").attr("style","display:none")}),$("#continuar_transfer").click(function(){var a=$("#transpwd").val();n(a)?($("#content-clave").hide(),$("#content_plata").show()):($("#content_clave").show(),$.balloon.defaults.classname="field-error",$.balloon.defaults.css=null,$("#transpwd").showBalloon({position:"right",contents:"Clave inválida"}),setTimeout(function(){$("#transpwd").hideBalloon()},3e3))}),$(".dialog").click(function(){$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cerrar").click(function(){$("#content-product").dialog("close")}),$.each($(".dashboard-item"),function(a,e){$.post(base_url+"/dashboard/saldo",{tarjeta:$(e).attr("card")},function(a){var t=$(".dashboard-item").attr("moneda"),o=a.disponible;"string"!=typeof o&&(o="---"),$(e).find(".dashboard-item-balance").html(t+o)})});var a=$("#dashboard-donor");a.isotope({itemSelector:".dashboard-item",animationEngine:"jQuery",animationOptions:{duration:800,easing:"easeOutBack",queue:!0}});var e=$("#filters-stack .option-set"),t=e.find("a");t.click(function(){var e=$(this);if(e.hasClass("selected"))return!1;var t=e.parents(".option-set");t.find(".selected").removeClass("selected"),e.addClass("selected");var o={},n=t.attr("data-option-key"),i=e.attr("data-option-value");return i="false"!==i&&i,o[n]=i,"layoutMode"===n&&"function"==typeof changeLayoutMode?changeLayoutMode(e,o):a.isotope(o),!1})}),$("li.stack-item a").click(function(){$(".stack").find(".current-stack-item").removeClass("current-stack-item"),$(this).parents("li").addClass("current-stack-item")}),$(".dashboard-item").click(function(){var n,i,r,l,s,d,p,u,f;n=$(this).find("img").attr("src"),i=$(this).attr("card"),r=$(this).attr("marca").toLowerCase(),l=$(this).attr("mascara"),s=$(this).attr("producto1"),d=$(this).attr("empresa"),u=$(this).attr("nombre"),f=$(this).attr("moneda"),pais=$(this).attr("pais"),$("#donor").children().remove(),p='<div class="product-presentation" producto="'+s+'">',p+='<img src="'+n+'" width="200" height="130" alt="" />',p+='<div class="product-network '+r+'"></div>',p+='<input id="donor-cardnumber-origen" name="donor-cardnumber" type="hidden" cardOrigen="'+i+'" />',p+="</div>",p+='<div class="product-info">',p+='<p class="product-cardholder" id="nombreCtaOrigen">'+u+"</p>",p+='<p class="product-cardnumber">'+l+"</p>",p+='<p class="product-metadata">'+s+"</p>",p+='<nav class="product-stack">',p+='<ul class="stack">',p+='<li class="stack-item">',p+='<a dialog button product-button rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',p+="</li>",p+="</ul>",p+="</nav>",p+="</div>",p+='<div class="product-scheme">',p+='<ul class="product-balance-group">',p+='<li>Disponible <span class="product-balance" id="balance-available">'+f+" 0.00</span></li>",p+='<li>A debitar <span class="product-balance debitar" id="balance-debit">'+f+" 0.00</span></li>",p+="</ul>",p+="</div>",$("#donor").append(p),$.post(base_url+"/dashboard/saldo",{tarjeta:$(this).attr("card")},function(a){var e=a.disponible;"string"!=typeof e&&(e="---"),$("#balance-available").html(f+e),$("#balance-available").attr("saldo",e)}),$(".product-button").removeClass("disabled-button"),$("#agregarCuenta").attr("href","#"),$("#agregarCuenta").parents("li").removeClass("disabled-group-action-item"),$.each($(".dashboard-item"),function(a,e){$(this).hasClass("current-dashboard-item")&&$(this).removeClass("current-dashboard-item")}),$(this).addClass("current-dashboard-item"),$("#content-product").dialog("close"),$(".stack-item").click(function(){$("#tdestino").children().remove(),$("#tdestino").append($("#removerDestino").html()),$("#continuar").attr("disabled",!0),$("#content-product").dialog({title:"Selección de Cuentas Origen",modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}})}),$.post("transferencia/ctaDestino",{nroTarjeta:$(this).attr("card"),prefijo:$(this).attr("prefix"),operacion:"P2P"},function(i){i.rc==-150&&($("#content_plata").children().remove(),$("#tabs-menu").children().remove(),$("#content_plata").append($("#content-no-afil").html()),$("#content-no-afil").children().remove(),$("#content-destino").dialog("close")),i.rc==-0&&(montoMaxOperaciones=i.parametrosTransferencias[0].montoMaxOperaciones,montoMinOperaciones=i.parametrosTransferencias[0].montoMinOperaciones,montoMaxDiario=i.parametrosTransferencias[0].montoMaxDiario,montoMaxSemanal=i.parametrosTransferencias[0].montoMaxSemanal,montoMaxMensual=i.parametrosTransferencias[0].montoMaxMensual,cantidadOperacionesDiarias=i.parametrosTransferencias[0].cantidadOperacionesDiarias,cantidadOperacionesSemanales=i.parametrosTransferencias[0].cantidadOperacionesSemanales,cantidadOperacionesMensual=i.parametrosTransferencias[0].cantidadOperacionesMensual,montoAcumDiario=i.parametrosTransferencias[0].montoAcumDiario,montoAcumSemanal=i.parametrosTransferencias[0].montoAcumSemanal,montoAcumMensual=i.parametrosTransferencias[0].montoAcumMensual,acumCantidadOperacionesDiarias=i.parametrosTransferencias[0].acumCantidadOperacionesDiarias,acumCantidadOperacionesSemanales=i.parametrosTransferencias[0].acumCantidadOperacionesSemanales,acumCantidadOperacionesMensual=i.parametrosTransferencias[0].acumCantidadOperacionesMensual,dobleAutenticacion=i.parametrosTransferencias[0].dobleAutenticacion,$("#dashboard-beneficiary").empty(),$.each(i.cuentaDestinoPlata,function(a,e){imagen1=e.nombre_producto.toLowerCase(),imagen2=c(imagen1),imagen3=imagen2.replace(" ","-"),imagen4=imagen3.replace(" ","-"),n=imagen4.replace("/","-"),p=" <li class='dashboard-item "+e.nomEmp+" muestraDestino' card='"+e.noTarjeta+"' nombre='"+e.NombreCliente+"' marca='"+e.marca+"' mascara='"+e.noTarjetaConMascara+"' empresa='"+e.nomEmp+"' producto='"+e.nombre_producto+"'>",p+="<a rel='section' class='escogerDestino'>",p+="<img src='"+base_cdn+"/img/products/"+pais+"/"+n+".png' width='200' height='130' alt='' />",p+="<div class='dashboard-item-network "+e.marca.toLowerCase()+"'>"+e.marca+"</div>",p+="<div class='dashboard-item-info'>",p+="<p class='dashboard-item-cardholder'>"+e.NombreCliente+"</p>",p+="<p class='dashboard-item-cardnumber'>"+e.noTarjetaConMascara+"</p>",p+="<p class='dashboard-item-category'>"+e.nombre_producto+"</p>",p+="</div>",p+=" </a>",p+="</li>",$("#dashboard-beneficiary").append(p)})),i.rc==-61&&$(location).attr("href",base_url+"/users/error_gral"),$(".muestraDestino").click(function(){if(1==$(this).hasClass("disabled-dashboard-item"))$("#content-destino").dialog("close");else{var n,i,r,l,s,c,d,p;n=$(this).find("img").attr("src"),i=$(this).attr("card"),r=$(this).attr("marca"),l=$(this).attr("mascara"),s=$(this).attr("producto"),c=$(this).attr("empresa"),p=$(this).attr("nombre"),$(".edit").remove();var u=a();d='<div class="group"> ',d+='<div class="product-presentation">',d+='<img src="'+n+'" width="200" height="130" alt="" />',d+='<div class="product-network '+r.toLowerCase()+'"></div>',d+='<input id="tarjetaDestino" name="tarjetaDestino" type="hidden" value="'+i+'" />',d+='<input id="marcaDestino" name="marcaDestino" type="hidden" value="'+f+'" />',d+='<input id="marca" name="marcaDestino" type="hidden" value="'+s+'" />',d+="</div>",d+='<div class="product-info">',d+='<p class="product-cardholder">'+p+"</p>",d+='<p class="product-cardnumber">'+l+"</p>",d+='<p class="product-metadata">'+s+"</p>",d+='<nav class="product-stack">',d+='<ul class="stack">',d+='<li class="stack-item modifica">',d+='<a rel="section" title="Seleccionar otra cuenta"><span aria-hidden="true" class="icon-edit"></span></a>',d+="</li>",d+='<li class="stack-item elimina">',d+='<a rel="section" title="Remover"><span aria-hidden="true" class="icon-cancel"></span></a>',d+="</li>",d+="</ul>",d+="</nav>",d+="</div>",d+='<div class="product-scheme">',d+='<fieldset class="form-inline">',d+='<label for="beneficiary-1x-description" title="Descripción de la transferencia.">Concepto</label>',d+='<input class="field-large mont" id="beneficiary-'+u+'x-description" maxlength="60" name="beneficiary-1x-description" type="text" />',d+='<label for="beneficiary-1x-amount" title="Monto a transferir.">Importe</label>',d+='<div class="field-category"> '+f+" ",d+='<input id="beneficiary-1x-coin" name="beneficiary-1x-coin" type="hidden" value="'+f+'."/>',d+="</div>",d+='<input class="field-small monto dinero" id="beneficiary-'+u+'-amount" maxlength="12" name="beneficiary-1x-amount"/> <br/>',d+="</fieldset></div></div>",$("#content_plata #tdestino").append(d),$("#beneficiary-1x").removeClass("obscure-group"),$("#content-destino").dialog("close"),$("#tdestino").children("#btn-destino").remove(),$("#tdestino").append($("#removerDestino").html()),t();var h=$(".monto").val().replace(",",".");$("#content_plata").on("keyup",".monto",function(){var a=$(this).val();"Pe"!=pais&&"Usd"!=pais||(expr=/^-?[0-9]+([\.][0-9]{0,2})?$/,saldo_imp=$("#balance-available").attr("saldo").replace(",","")),"Ve"!=pais&&"Co"!=pais||(expr=/^-?[0-9]+([\,][0-9]{0,2})?$/,saldo_imp1=$("#balance-available").attr("saldo").replace(".",""),saldo_imp=saldo_imp1.replace(",",".")),expr.test(a)||("Pe"!=pais&&"Usd"!=pais||($("#dialog-error-monto").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido").click(function(){$("#dialog-error-monto").dialog("close")})),"Ve"!=pais&&"Co"!=pais||($("#dialog-error-monto-vc").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido_vc").click(function(){$("#dialog-error-monto-vc").dialog("close")})),$(this).val("")),h=$(this).val().replace(",","."),parseFloat(h)>saldo_imp&&($("#dialog-max-monto1").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_inv").click(function(){$("#dialog-max-monto1").dialog("close")}),$(this).val("")),parseFloat(h)>parseFloat(montoMaxOperaciones)&&($("#dialog-max-monto").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido1").click(function(){$("#dialog-max-monto").dialog("close")}),$(this).val("")),parseFloat(h)+parseFloat(montoAcumMensual)>parseFloat(montoMaxMensual)?($("#dialog-min-monto2").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido3").click(function(){$("#dialog-min-monto2").dialog("close")}),$(this).val(""),$("#balance-debit").html(m+o().toFixed(2))):parseFloat($(this).val())+parseFloat(montoAcumDiario)>parseFloat(montoMaxDiario)?($("#dialog-min-monto3").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido4").click(function(){$("#dialog-min-monto3").dialog("close")}),$(this).val(""),$("#balance-debit").html(m+o().toFixed(2))):(m=$(".dashboard-item").attr("moneda"),$(this).parents(".group").attr("montInput",$(this).val()),$(this).val().replace(",","."),$("#balance-debit").html(m+o().toFixed(2)))}),e(),u>=3&&$("#tdestino").children("#btn-destino").remove(),u>=1?$("#continuar").removeAttr("disabled"):$("#continuar").attr("disabled","")}})}),$(".modifica").click(function(){$(this).parents(".group").addClass("edit"),$("#content-destino").dialog({title:"Selección de Cuentas Destino",modal:"true",width:"940px",beforeClose:function(a,e){$(".group").removeClass("edit")},open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}})}),$("#content_plata").on("click",".elimina",function(){m=$(".dashboard-item").attr("moneda"),suma=o(),0!=suma?(montoR1=$(this).parents(".group").attr("montInput").replace(",","."),montoRestar=parseFloat(montoR1)):montoRestar=0,saldo1=suma-montoRestar,saldo=saldo1.toFixed(2),saldo<0||isNaN(saldo)?$("#balance-debit").html(m+0):$("#balance-debit").html(m+saldo),$(this).parents(".group").remove(),t(),0==$("#tdestino").find("#btn-destino").length&&($("#tdestino").append($("#removerDestino").html()),e()),a()>1?$("#continuar").removeAttr("disabled"):$("#continuar").attr("disabled","")}),e()}),$("#content_plata").on("click",".confir",function(){var a=!0,e=0;if($("#validate").submit(),$("#montoTotal").remove(),$("#tdestino").append("<input id='montoTotal' name='montoTotal' type='hidden' class='checkTotal' value='' />"),$("#montoTotal").val(o()),total=o(),console.info(total),saldo=saldo_imp,valor_concepto1=$("#beneficiary-1x-description").val(),valor_concepto2=$("#beneficiary-2x-description").val(),valor_concepto3=$("#beneficiary-3x-description").val(),""!=valor_concepto1&&""!=valor_concepto2&&""!=valor_concepto3||($("#campos_vacios").dialog({title:"Error Campos",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_campos").click(function(){$("#campos_vacios").dialog("close")}),a=!1),parseFloat(total)>saldo&&($("#dialog-error-monto9").dialog({title:"Error Monto",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_monto9").click(function(){$("#dialog-error-monto9").dialog("close")}),a=!1),parseFloat(acumCantidadOperacionesDiarias)+parseFloat(e)>=parseFloat(cantidadOperacionesDiarias)&&($("#dialog-cant-ope1").dialog({title:"Cantidad de Operaciones",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cant_ope1").click(function(){$("#dialog-cant-ope1").dialog("close")}),a=!1),parseFloat(acumCantidadOperacionesSemanales)+parseFloat(e)>=parseFloat(cantidadOperacionesSemanales)&&($("#dialog-cant-ope-sm").dialog({title:"Cantidad de Operaciones",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cant_ope_sm").click(function(){$("#dialog-cant-ope-sm").dialog("close")}),a=!1),parseFloat(acumCantidadOperacionesMensual)+parseFloat(e)>parseFloat(cantidadOperacionesMensual)&&($("#dialog-cant-ope2").dialog({title:"Cantidad de Operaciones",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#cant_ope2").click(function(){$("#dialog-cant-ope2").dialog("close")}),a=!1),valor_monto1=$("#beneficiary-1-amount").val(),valor_monto2=$("#beneficiary-2-amount").val(),valor_monto3=$("#beneficiary-3-amount").val(),(parseFloat(valor_monto1)<parseFloat(montoMinOperaciones)||parseFloat(valor_monto2)<parseFloat(montoMinOperaciones)||parseFloat(valor_monto3)<parseFloat(montoMinOperaciones))&&($("#dialog-min-monto").dialog({title:"Monto no permitido",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#monto_invalido2").click(function(){$("#dialog-min-monto").dialog("close")}),$(this).val(""),a=!1),parseFloat(total)>parseFloat(montoMaxOperaciones)&&($("#dialog-error-monto1").dialog({title:"Error monto total",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_monto1").click(function(){$("#dialog-error-monto1").dialog("close")}),a=!1),parseFloat(total)<parseFloat(montoMinOperaciones)&&($("#dialog-error-monto2").dialog({title:"Error monto total",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_monto2").click(function(){$("#dialog-error-monto2").dialog("close")}),a=!1),parseFloat(total)+parseFloat(montoAcumDiario)>parseFloat(montoMaxDiario)?($("#dialog-error-monto7").dialog({title:"Error monto total",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_monto7").click(function(){$("#dialog-error-monto7").dialog("close")}),a=!1):parseFloat(total)+parseFloat(montoAcumSemanal)>parseFloat(montoMaxSemanal)?($("#dialog-error-monto-sm").dialog({title:"Error monto total",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_monto_sm").click(function(){$("#dialog-error-monto-sm").dialog("close")}),a=!1):parseFloat(total)+parseFloat(montoAcumMensual)>parseFloat(montoMaxMensual)&&($("#dialog-error-monto8").dialog({title:"Error monto total",modal:"true",width:"440px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#error_monto8").click(function(){$("#dialog-error-monto8").dialog("close")}),a=!1),totaldef=parseFloat(valor_monto1)+parseFloat(valor_monto2)+parseFloat(valor_monto3),1==a){var t,n,i;n=$("#donor").find(".product-cardholder").html(),i=$("#donor").find(".product-cardnumber").html(),numeroCtaOrigen=$("#donor").find("#donor-cardnumber-origen").attr("cardOrigen"),nombreCtaOrigen=$("#donor").find("#nombreCtaOrigen").html(),banco=$("#donor").find(".banco").html(),marca=$("#donor").find(".product-metadata").html(),t="<tr>",t+='<td class="data-label"><label>Cuenta Origen</label></td>',t+='<td class="data-reference" id="nombreOrigenTransfer" colspan="2" numeroCtaOrigen="'+numeroCtaOrigen+'" nombreCtaOrigen="'+nombreCtaOrigen+'">'+n+'<br /><span class="highlight" id="mascaraOrigenTransfer">'+i+'</span><br /><span class="lighten"> '+marca+" </span></td>",t+="</tr>",$("#cargarConfirmacion").append(t);var r=0;montodef=0,$.each($("#tdestino").children(":not(.obscure-group, .checkTotal)"),function(a,t){var o,n,i,l,s;if(r+=1,n=$(t).find(".product-cardholder").html(),i=$(t).find(".product-cardnumber").html(),l=$(t).find("#beneficiary-"+r+"-amount").val(),montodef=parseFloat($(t).find("#beneficiary-"+r+"-amount").val())+montodef,s=$(t).find("#beneficiary-"+r+"x-description").val(),marcad=$(t).find("#marca").val(),ctnDestino=$(t).find("#tarjetaDestino").val(),id_afil=$(t).find(".id_afiliacion").val(),"Ve"==pais||"Co"==pais){var c=$(".product-scheme").find(".debitar").html().replace(/Bs./g,"");total1=c.replace(".",",")}else{var c=$(".product-scheme").find(".debitar").html().replace(/S../g,"");total1=c}moneda=$(".dashboard-item").attr("moneda"),e+=1,o='<tr class="trdestino" card="'+ctnDestino+'" id_afil="'+id_afil+'" nombre="'+n+'" monto="'+l+'" concepto="'+s+'" moneda="'+moneda+'" mascara="'+i+'" marca="'+marcad+'">',o+='<td class="data-label"><label>Cuentas Destino</label></td>',o+='<td class="data-reference" id="nombreDestinoTransfer">'+n+'<br /><span class="highlight" id="mascaraDestinoTransfer">'+i+'</span><br /><span class="lighten"> '+marcad+" </span></td>",o+='<td class="data-metadata data-resultado">',o+='<div class="data-indicator">',o+='<span aria-hidden="true" class="iconoTransferencia"></span>',o+='</div><span class="data-metadata" id="conceptoDestino"><strong>Concepto: </strong>'+s+'<br /><strong>Monto: </strong> <span class="money-amount" monto="'+l+'" id="montoDestinoTransfer"> '+moneda+" "+l+'<br /> </span><strong>Estatus: </strong><span class="money-amount" id="estatus">En espera por confirmación.</span></td>',o+="</td>",o+="</tr>",o+="<tr>",o+='<td class="data-spacing" colspan="3"></td>',o+="</tr>",$("#cargarConfirmacion").append(o)}),$("#content_plata").children().remove(),$("#content_plata").append($("#contentConfirmacion").html()),$("#contentConfirmacion").remove();var l;l="<tr>",l+='<td class="data-spacing" colspan="3"></td>',l+="</tr>",l+="<tr>",l+='<td colspan="2"></td>',l+='<td class="data-metadata">Total<br /><span class="money-amount" id="mm">'+moneda+" "+total1+'</span></td> <input id="montoTotal" name="montoTotal" type="hidden" total="'+total+'" />',l+="</tr>",$("#cargarConfirmacion").append(l).html()}}),$("#content_plata").on("click","#confTransfer",function(){$("#confTransfer").prop("disabled",!0);$("#transpwd").val();if("S"==dobleAutenticacion)i()&&$("#dialog-confirm").dialog({modal:!0,title:"Verificación requerida.",buttons:{Cancelar:function(){$(this).dialog("close")},Aceptar:function(){var a=$("#transpwd_confirmacion").val();if(r(a)){$("#dialog-confirm").dialog("close");var e,t,o,n,i,c=$("#nombreOrigenTransfer").attr("numeroCtaOrigen"),d=$("#nombreOrigenTransfer").attr("nombreCtaOrigen");$(".data-indicator").show(),$.each($(".trdestino"),function(a,r){if(e=$(r).attr("card"),t="",nombre1=$(r).attr("nombre"),o=$(r).attr("monto").replace(",","."),n=$(r).attr("concepto"),trans=l(c,e,o,n,d,t),0!=trans){i=!0,s(i,r,trans);var m;nombre=$("#nombreOrigenTransfer").html(),mascara=$("#mascaraOrigenTransfer").html();var p=new Date;hora=p.getHours()+":"+p.getMinutes()+":"+p.getSeconds();var u=p.getDate(),f=p.getMonth()+1;p.getFullYear();u<10&&(u="0"+u),f<10&&(f="0"+f);m="<tr>",m+='<td class="data-label"><label>Cuenta Origen</label></td>',m+='<td class="data-reference" colspan="2"><br>'+nombre+"</td>",m+="</tr>",$("#progress").children().remove(),cabecera="<ul class='steps'>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-exchange'></span> Transferir</li>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-view'></span> Confirmación</li>",cabecera+="<li class='step-item current-step-item'><span aria-hidden='true' class='icon-thumbs-up'></span> Finalización</li>",cabecera+="</ul>",$("#progress").append(cabecera).html(),$("#titulo").children().remove(),titulo="<h2>Finalización</h2>",$("#titulo").append(titulo).html(),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#exit").click(function(){$(location).attr("href",base_url+"/dashboard")})}else i=!1,trans="-",s(i,r,trans),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#transfer-success").show(),$("#exit").click(function(){$(location).attr("href",base_url+"/transferencia")})})}}},open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}});else{var a,e,t,o,n,c=$("#nombreOrigenTransfer").attr("numeroCtaOrigen"),d=$("#nombreOrigenTransfer").attr("nombreCtaOrigen");$(".data-indicator").show(),$.each($(".trdestino"),function(i,r){if(a=$(r).attr("card"),e="",nombre1=$(r).attr("nombre"),t=$(r).attr("monto").replace(",","."),o=$(r).attr("concepto"),trans=l(c,a,t,o,d,e),0!=trans){n=!0,s(n,r,trans);var m;nombre=$("#nombreOrigenTransfer").html(),mascara=$("#mascaraOrigenTransfer").html();var p=new Date;hora=p.getHours()+":"+p.getMinutes()+":"+p.getSeconds();var u=p.getDate(),f=p.getMonth()+1;p.getFullYear();u<10&&(u="0"+u),f<10&&(f="0"+f);m="<tr>",m+='<td class="data-label"><label>Cuenta Origen</label></td>',m+='<td class="data-reference" colspan="2"><br>'+nombre+"</td>",m+="</tr>",$("#progress").children().remove(),cabecera="<ul class='steps'>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-exchange'></span> Transferir</li>",cabecera+="<li class='step-item completed-step-item'><span aria-hidden='true' class='icon-view'></span> Confirmación</li>",cabecera+="<li class='step-item current-step-item'><span aria-hidden='true' class='icon-thumbs-up'></span> Finalización</li>",cabecera+="</ul>",$("#progress").append(cabecera).html(),$("#titulo").children().remove(),titulo="<h2>Finalización</h2>",$("#titulo").append(titulo).html(),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#transfer-success").show(),$("#exit").click(function(){$(location).attr("href",base_url+"/dashboard")})}else n=!1,trans="-",s(n,r,trans),$("#confimacion_t").children().remove(),completar1='<button id="exit">Finalizar</button>',$("#confimacion_t").append(completar1).html(),$("#exit").click(function(){$(location).attr("href",base_url+"/transferencia")})})}}),$(".label-inline").on("click","a",function(){$("#dialog-tc").dialog({modal:"true",width:"940px",open:function(a,e){$(".ui-dialog-titlebar-close",e.dialog).hide()}}),$("#ok").click(function(){$("#dialog-tc").dialog("close")})})});